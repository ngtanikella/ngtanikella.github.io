!function(){"use strict";var t,e={1718:function(t,e,n){var r=n(290);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){s=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var i=function(){(0,r._l)("Gravity Forms Advanced Post Creation Common: Initialized all javascript that targeted document ready.")},c=function(){(0,r.Gc)(i)},s=n(7867),u=n(455),d=n(2888),l=n(8564),f=n.n(l),p=n(9433),m=n(6598),v=n(9957),g=n(3054),y=gform_apc_shared.i18n,h=gform_apc_shared.pagination,b=s.React.useMemo,_=function(t){return t&&"object"===(0,d.A)(t)&&Array.isArray(t.data)?t.data.map(function(t){var e="publish"===t.post_status?y.published:y.draft;return t.post_status||(e=""),{title:{component:m.A,props:{content:t.post_title||y.untitledPost,size:"text-sm"}},status:{component:m.A,props:{content:e,size:"text-sm"}},date:{component:m.A,props:{content:t.post_date,size:"text-sm"}},actions:{component:m.A,props:{asHtml:!0,content:t.actions||"",size:"text-sm"}}}}):(console.warn("Gravity Forms Advanced Post Creation Invalid postsData:",t),[])},A=[{component:m.A,key:"title",props:{content:y.columnTitle,size:"text-sm",weight:"medium"}},{component:m.A,key:"status",props:{content:y.columnStatus,size:"text-sm",weight:"medium"},hideAt:600},{component:m.A,key:"date",props:{content:y.columnDate,size:"text-sm",weight:"medium"},hideAt:600},{component:m.A,key:"actions",props:{content:y.columnActions,size:"text-sm",weight:"medium"}}],P=function(t){var e=t.postsData,n=(null==e?void 0:e.totalPages)>1,r=b(function(){return n?[v.hi]:[]},[n]),o=b(function(){return{isLoading:l,moduleState:{currentPage:0,instance:0,formToShow:e.formToShow||"",postsPerPage:e.postsPerPage||5,data:[],gridTitle:e.gridTitle||""}}},[]),a=b(function(){return{pagination:{onClick:(t=(0,u.A)(f().mark(function t(e){var n;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("gf_apc_pagination_nonce",h.nonce),n.append("formToShow",e.formToShow),n.append("action","gf_apc_pagination"),n.append("postsPerPage",e.postsPerPage),n.append("currentPage",e.currentPage),n.append("instance",e.instance),t.next=9,fetch(h.ajax_url+"?apc_page_".concat(e.instance,"=").concat(e.currentPage+1),{method:"POST",body:n}).then(function(t){return t.json()}).then(function(t){var e=t.data;S(_(e))}).catch(function(t){return console.error("Gravity Forms Advanced Post Creation Error retrieving pagination data:",t),m(!1),[]});case 9:m(!1);case 10:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),onPageChange:function(t){},pageCount:e.totalPages||1,previousLabel:y.previousLabel,previousAriaLabel:y.previousPage,nextLabel:y.nextLabel,nextAriaLabel:y.nextPage}};var t},[]),i=(0,g.A)({data:[],dataPerPage:5,initialState:o,modules:r,moduleAttributes:a,useAjax:!0}),c=i.moduleState,d=i.updateModuleState,l=i.isLoading,m=i.setIsLoading,P=i.gridLocked,w=i.organizedData,S=i.setOrganizedData;s.React.useEffect(function(){if(null!=e&&e.data){var t=_(e);S(t)}},[e,S]);return s.React.createElement(p.A,{columns:A,data:w,dataPerPage:5,emptyMessageAttributes:{style:{maxWidth:"360px"}},isLoading:l,modules:r,moduleAttributes:a,moduleState:c,setIsLoading:m,updateModuleState:d,useAjax:!0,columnStyleProps:{title:{flex:"1"},status:{flex:"0 0 auto"},date:{flex:"0 0 auto"},actions:{flex:"0 0 auto"}},gridLocked:P,showColumnsInFooter:!1,i18n:{emptyMessageI18n:y.noPostsFoundMessage,emptyTitleI18n:"",gridHeadingI18n:c.gridTitle}})},w=s.ReactDOM.createRoot,S=new Map,x=new Map,E=new Map,O=function(t){var e=document.querySelector('.apc-posts-container[data-client-id="'.concat(t,'"]'));if(e){var n=e.dataset.apcPosts||"{}",r=n;if(E.get(t)!==r){var o;try{o=JSON.parse(n)}catch(e){return void console.error("Gravity Forms Advanced Post Creation Error parsing post data for ".concat(t,":"),e)}E.set(t,r);var a=x.get(t);S.get(t)&&a&&a!==e&&(S.delete(t),x.delete(t));try{var i=w(e);i.render(s.React.createElement(P,{postsData:o})),S.set(t,i),x.set(t,e)}catch(e){console.error("Gravity Forms Advanced Post Creation Failed to render ApcDataGridComponent for ".concat(t),e)}}}},I=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=[];if(null!==(t=window.wp)&&void 0!==t&&t.data){n=wp.data.select("core/block-editor").getBlocks().filter(function(t){return"gravityforms/apc-posts"===t.name&&t.attributes.clientId})}else{var r=document.querySelectorAll(".apc-posts-container[data-client-id]");n=Array.from(r).map(function(t){return{attributes:{clientId:t.dataset.clientId}}})}var o=!1;n.forEach(function(t){var e=t.attributes.clientId;document.querySelector('.apc-posts-container[data-client-id="'.concat(e,'"]'))&&(O(e,t.attributes),o=!0)}),!o&&e<20&&setTimeout(function(){return I(e+1)},250)},C=function(){var t;null!==(t=window.wp)&&void 0!==t&&t.data?wp.domReady(function(){var t,e;I(),t=wp.data,e=t.select,(0,t.subscribe)(function(){e("core/block-editor").getBlocks().filter(function(t){return"gravityforms/apc-posts"===t.name&&t.attributes.clientId}).forEach(function(t){O(t.attributes.clientId,t.attributes)})})}):"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return I()}):I()},F=function(){c(C())},k=function(){F(),function(){var t=document.querySelector("form[data-apc-readonly-fields]");if(t){var e=t.id.replace("gform_","");if(e){var n=t.getAttribute("data-apc-readonly-fields"),r=[];try{r=JSON.parse(n||"[]")}catch(t){return void console.error("Gravity Forms Advanced Post Creation Edit Form: Could not parse readonly fields data.",t)}var a=new Set(r.map(String));if(0!==a.size){var i=function(t){"BUTTON"===t.tagName?t.disabled=!0:t.readOnly=!0,t.setAttribute("tabindex","-1")};a.forEach(function(t){var n=document.getElementById("field_".concat(e,"_").concat(t));n&&n.querySelectorAll('input:not([type="hidden"]), textarea, select, button').forEach(i)}),new MutationObserver(function(t){var e,n=o(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;"childList"===r.type&&r.addedNodes.forEach(function(t){t.nodeType===Node.ELEMENT_NODE&&(t.matches("button")?[t]:t.querySelectorAll("button")).forEach(function(t){var e=t.closest(".gfield");if(e&&e.id){var n=e.id.match(/_(\d+)$/);n&&a.has(n[1])&&i(t)}})})}}catch(t){n.e(t)}finally{n.f()}}).observe(t,{childList:!0,subtree:!0}),t.addEventListener("click",function(n){if(n.target.closest("a.gform_apc_delete_file")){n.preventDefault();var r=n.target.closest("a.gform_apc_delete_file");e=r.dataset.formId;var o=r.dataset.fieldId;if(!e||!o)return void console.error("Gravity Forms Advanced Post Creation Edit Form: Missing formId or fieldId on single delete link.");var a=document.getElementById("gform_apc_current_file_".concat(e,"_").concat(o));a&&(a.style.display="none");var i=t.querySelector('input[name="gform_apc_file_'.concat(o,'"]'));i&&(i.value="")}else if(n.target.closest("a.gform_apc_delete_multi_file")){n.preventDefault();var c=n.target.closest("a.gform_apc_delete_multi_file"),s=c.dataset.fieldId,u=c.dataset.fileUrl;if(!s||!u)return void console.error("Gravity Forms Advanced Post Creation Edit Form: Missing fieldId or fileUrl on multi delete link.");var d=t.querySelector('input.gform_apc_multiple_files_hidden[name="gform_apc_files_'.concat(s,'"]'));if(!d)return void console.error("Gravity Forms Advanced Post Creation Edit Form: Could not find hidden input for multi-file field ".concat(s,"."));try{var l=JSON.parse(d.value||"[]");l=l.filter(function(t){return t!==u}),d.value=JSON.stringify(l);var f=c.closest("div.gform_apc_current_file");f&&f.remove()}catch(t){console.error("Gravity Forms Advanced Post Creation Edit Form: Error processing multi-file hidden input for field ".concat(s,"."),t)}}})}}else console.error("Gravity Forms Advanced Post Creation Edit Form: Could not determine form ID.")}}()};(function(){(0,r.Gc)(k)})()}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}};return e[t].call(a.exports,a,a.exports,r),a.exports}r.m=e,t=[],r.O=function(e,n,o,a){if(!n){var i=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],a=t[d][2];for(var c=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every(function(t){return r.O[t](n[s])})?n.splice(s--,1):(c=!1,a<i&&(i=a));if(c){t.splice(d--,1);var u=o();void 0!==u&&(e=u)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[n,o,a]},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.e=function(){return Promise.resolve()},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t={593:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,i=n[0],c=n[1],s=n[2],u=0;if(i.some(function(e){return 0!==t[e]})){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var d=s(r)}for(e&&e(n);u<i.length;u++)a=i[u],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(d)},n=self.webpackChunkgravityormsapc=self.webpackChunkgravityormsapc||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),r.nc=void 0,r.O(void 0,[721],function(){return r(7920)});var o=r.O(void 0,[721],function(){return r(1718)});o=r.O(o)}();
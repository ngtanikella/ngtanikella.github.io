/*! For license information please see article.js.LICENSE.txt */

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="527c7b33-5bbb-5102-b324-5a4f9d1aad64")}catch(e){}}();
!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="cd060687-71fb-439e-9cfc-05310937ba35",t._sentryDebugIdIdentifier="sentry-dbid-cd060687-71fb-439e-9cfc-05310937ba35")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"issuu-product-article-stories-frontend@04b98b7"},(()=>{var t={668:t=>{const e=function(){var t=new Function;return t.extend=function(){return new Function},t};e.debug=e,e.default=e,t.exports=e},100:function(t){var e;e=function(){return function(){var t={686:function(t,e,n){"use strict";n.d(e,{default:function(){return v}});var r=n(279),o=n.n(r),i=n(370),s=n.n(i),a=n(817),c=n.n(a);function l(t){try{return document.execCommand(t)}catch(t){return!1}}var u=function(t){var e=c()(t);return l("cut"),e},d=function(t,e){var n=function(t){var e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[e?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=t,n}(t);e.container.appendChild(n);var r=c()(n);return l("copy"),n.remove(),r},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof t?n=d(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?n=d(t.value,e):(n=c()(t),l("copy")),n};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function _(t,e){var n="data-clipboard-".concat(t);if(e.hasAttribute(n))return e.getAttribute(n)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(c,t);var e,n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(o);if(i){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=a.call(this)).resolveOptions(e),n.listenClick(t),n}return e=c,n=[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===f(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=s()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,r=t.container,o=t.target,i=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==o){if(!o||"object"!==h(o)||1!==o.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&o.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(o.hasAttribute("readonly")||o.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return i?p(i,{container:r}):o?"cut"===n?u(o):p(o,{container:r}):void 0}({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(r?"success":"error",{action:n,text:r,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return _("action",t)}},{key:"defaultTarget",value:function(t){var e=_("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return _("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(t,e)}},{key:"cut",value:function(t){return u(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}],n&&m(e.prototype,n),r&&m(e,r),c}(o()),v=b},828:function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var r=n(828);function o(t,e,n,r,o){var s=i.apply(this,arguments);return t.addEventListener(n,s,o),{destroy:function(){t.removeEventListener(n,s,o)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}t.exports=function(t,e,n,r,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return o(t,e,n,r,i)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var r=n(879),o=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(r.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(r.string(t))return function(t,e,n){return o(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(t),r.removeAllRanges(),r.addRange(o),e=r.toString()}return e}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,s=r.length;i<s;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(686)}().default},t.exports=e()},664:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var i,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var l in i=Object(arguments[c]))n.call(i,l)&&(a[l]=i[l]);if(e){s=e(i);for(var u=0;u<s.length;u++)r.call(i,s[u])&&(a[s[u]]=i[s[u]])}}return a}},362:(t,e,n)=>{"use strict";var r=n(441);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},688:(t,e,n)=>{t.exports=n(362)()},441:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},329:function(t,e,n){var r;r=function(t,e,n,r){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./index.js")}({"./index.js":function(t,e,n){"use strict";n.r(e);var r=n("react"),o=n.n(r),i=n("react-dom"),s=n.n(i),a=n("prop-types"),c=n.n(a);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,d(e).apply(this,arguments))}var r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),r=e,i=[{key:"propsWith",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};return Object.keys(this.props).forEach((function(r){if(-1!==r.search(t)){var o=e?r.replace(t,""):r;n[o]=this.props[r]}}),this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var t=this.props.options||this.propsWith(/^option-/,!0),e=s.a.findDOMNode(this.element);if(e){var r=n("clipboard");this.clipboard=new r(e,t);var o=this.propsWith(/^on/,!0);Object.keys(o).forEach((function(t){this.clipboard.on(t.toLowerCase(),this.props["on"+t])}),this)}}},{key:"render",value:function(){var t=this,e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){h(t,e,n[e])}))}return t}({title:this.props.title||"",type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:function(e){return t.element=e},onClick:this.props.onClick},this.propsWith(/^data-/),this.propsWith(/^button-/,!0)),r=n("clipboard");return this.props.isVisibleWhenUnsupported||r.isSupported()?o.a.createElement(this.getComponent(),e,this.props.children):null}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}],i&&u(r.prototype,i),e}(o.a.Component);h(f,"propTypes",{options:function(t,e,n){var r=t[e];return r&&"object"!==l(r)||Array.isArray(r)?new Error("Invalid props '".concat(e,"' supplied to '").concat(n,"'. ")+"'".concat(e,"' is not an object.")):void 0!==t["option-text"]&&"function"!=typeof t["option-text"]?new Error("Invalid props 'option-text' supplied to '".concat(n,"'. ")+"'option-text' is not a function."):void 0},title:c.a.string,type:c.a.string,className:c.a.string,style:c.a.object,component:c.a.any,children:c.a.any}),h(f,"defaultProps",{isVisibleWhenUnsupported:!0,onClick:function(){}}),e.default=f},clipboard:function(e,n){e.exports=t},"prop-types":function(t,n){t.exports=e},react:function(t,e){t.exports=n},"react-dom":function(t,e){t.exports=r}})},t.exports=r(n(100),n(688),n(594),n(206))},192:(t,e,n)=>{"use strict";n(664);var r=n(594),o=60103;if(e.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),e.Fragment=i("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!c.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:o,type:t,key:l,ref:u,props:i,_owner:s.current}}e.jsx=l,e.jsxs=l},540:(t,e,n)=>{"use strict";t.exports=n(192)},594:t=>{"use strict";t.exports=React},206:t=>{"use strict";t.exports=ReactDOM},452:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=s(t,i(n)))}return t}function i(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return o.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)r.call(t,n)&&t[n]&&(e=s(e,n));return e}function s(t,e){return e?t?t+" "+e:t+e:t}t.exports?(o.default=o,t.exports=o):void 0===(n=function(){return o}.apply(e,[]))||(t.exports=n)}()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=t=>{let{isDeployed:e,...n}=t;return{sampleRate:e?.5:1,...n}},e={};function r(t){return t&&t.Math==Math?t:void 0}const o="object"==typeof globalThis&&r(globalThis)||"object"==typeof window&&r(window)||"object"==typeof self&&r(self)||"object"==typeof n.g&&r(n.g)||function(){return this}()||{};function i(){return o}function s(t,e,n){const r=n||o,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}const a="production",c=Object.prototype.toString;function l(t){switch(c.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return b(t,Error)}}function u(t,e){return c.call(t)===`[object ${e}]`}function d(t){return u(t,"ErrorEvent")}function p(t){return u(t,"DOMError")}function h(t){return u(t,"String")}function f(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function m(t){return null===t||f(t)||"object"!=typeof t&&"function"!=typeof t}function g(t){return u(t,"Object")}function y(t){return"undefined"!=typeof Event&&b(t,Event)}function _(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function b(t,e){try{return t instanceof e}catch(t){return!1}}function v(t){return!("object"!=typeof t||null===t||!t.__isVue&&!t._isVue)}const w=i(),x=80;function k(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,o=[];let i=0,s=0;const a=" > ",c=a.length;let l;const u=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||x;for(;n&&i++<r&&(l=S(n,u),!("html"===l||i>1&&s+o.length*c+l.length>=d));)o.push(l),s+=l.length,n=n.parentNode;return o.reverse().join(a)}catch(t){return"<unknown>"}}function S(t,e){const n=t,r=[];let o,i,s,a,c;if(!n||!n.tagName)return"";if(w.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(l&&l.length)l.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&h(o))for(i=o.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)s=u[c],a=n.getAttribute(s),a&&r.push(`[${s}="${a}"]`);return r.join("")}const E="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,C=["debug","info","warn","error","log","assert","trace"],T={};function A(t){if(!("console"in o))return t();const e=o.console,n={},r=Object.keys(T);r.forEach((t=>{const r=T[t];n[t]=e[t],e[t]=r}));try{return t()}finally{r.forEach((t=>{e[t]=n[t]}))}}const O=function(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return E?C.forEach((n=>{e[n]=(...e)=>{t&&A((()=>{o.console[n](`Sentry Logger [${n}]:`,...e)}))}})):C.forEach((t=>{e[t]=()=>{}})),e}();function N(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function M(t,e){if(!Array.isArray(t))return"";const n=[];for(let e=0;e<t.length;e++){const r=t[e];try{v(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function D(t,e=[],n=!1){return e.some((e=>function(t,e,n=!1){return!!h(t)&&(u(e,"RegExp")?e.test(t):!!h(e)&&(n?t===e:t.includes(e)))}(t,e,n)))}function R(t,e,n){if(!(e in t))return;const r=t[e],o=n(r);"function"==typeof o&&$(o,r),t[e]=o}function I(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch(n){E&&O.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function $(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,I(t,"__sentry_original__",e)}catch(t){}}function j(t){return t.__sentry_original__}function L(t){if(l(t))return{message:t.message,name:t.name,stack:t.stack,...B(t)};if(y(t)){const e={type:t.type,target:P(t.target),currentTarget:P(t.currentTarget),...B(t)};return"undefined"!=typeof CustomEvent&&b(t,CustomEvent)&&(e.detail=t.detail),e}return t}function P(t){try{return"undefined"!=typeof Element&&b(t,Element)?k(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}}function B(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function z(t){return F(t,new Map)}function F(t,e){if(function(t){if(!g(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||"Object"===e}catch(t){return!0}}(t)){const n=e.get(t);if(void 0!==n)return n;const r={};e.set(t,r);for(const n of Object.keys(t))void 0!==t[n]&&(r[n]=F(t[n],e));return r}if(Array.isArray(t)){const n=e.get(t);if(void 0!==n)return n;const r=[];return e.set(t,r),t.forEach((t=>{r.push(F(t,e))})),r}return t}function H(){const t=o,e=t.crypto||t.msCrypto;let n=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(t){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(t=>(t^(15&n())>>t/4).toString(16)))}function U(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function q(t){const{message:e,event_id:n}=t;if(e)return e;const r=U(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function V(t,e,n){const r=t.exception=t.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=e||""),i.type||(i.type=n||"Error")}function W(t,e){const n=U(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const t={...r&&r.data,...e.data};n.mechanism.data=t}}function J(t){if(t&&t.__sentry_captured__)return!0;try{I(t,"__sentry_captured__",!0)}catch(t){}return!1}function K(t){return Array.isArray(t)?t:[t]}const G=1e3;function Y(){return Date.now()/G}const X=function(){const{performance:t}=o;if(!t||!t.now)return Y;const e=Date.now()-t.now(),n=null==t.timeOrigin?e:t.timeOrigin;return()=>(n+t.now())/G}();let Q;(()=>{const{performance:t}=o;if(!t||!t.now)return void(Q="none");const e=36e5,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,a=t.timing&&t.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):e;s||c<e?i<=c?(Q="timeOrigin",t.timeOrigin):Q="navigationStart":Q="dateNow"})();const Z="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var tt;function et(t){return new rt((e=>{e(t)}))}function nt(t){return new rt(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"}(tt||(tt={}));class rt{constructor(t){rt.prototype.__init.call(this),rt.prototype.__init2.call(this),rt.prototype.__init3.call(this),rt.prototype.__init4.call(this),this._state=tt.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}then(t,e){return new rt(((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(t){r(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){r(t)}else r(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new rt(((e,n)=>{let r,o;return this.then((e=>{o=!1,r=e,t&&t()}),(e=>{o=!0,r=e,t&&t()})).then((()=>{o?n(r):e(r)}))}))}__init(){this._resolve=t=>{this._setResult(tt.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(tt.REJECTED,t)}}__init3(){this._setResult=(t,e)=>{this._state===tt.PENDING&&(_(e)?e.then(this._resolve,this._reject):(this._state=t,this._value=e,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===tt.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(this._state===tt.RESOLVED&&t[1](this._value),this._state===tt.REJECTED&&t[2](this._value),t[0]=!0)}))}}}function ot(){return s("globalEventProcessors",(()=>[]))}function it(t){ot().push(t)}function st(t,e,n,r=0){return new rt(((o,i)=>{const s=t[r];if(null===e||"function"!=typeof s)o(e);else{const a=s({...e},n);Z&&s.id&&null===a&&O.log(`Event processor "${s.id}" dropped event`),_(a)?a.then((e=>st(t,e,n,r+1).then(o))).then(null,i):st(t,a,n,r+1).then(o).then(null,i)}}))}function at(t){const e=X(),n={sid:H(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return z({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&ct(n,t),n}function ct(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||X(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:H()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function lt(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),ct(t,n)}function ut(t){return t.transaction}const dt=1;function pt(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:o,parent_span_id:i,status:s,tags:a,origin:c}=ht(t);return z({data:r,op:o,parent_span_id:i,span_id:e,status:s,tags:a,trace_id:n,origin:c})}function ht(t){return function(t){return"function"==typeof t.getSpanJSON}(t)?t.getSpanJSON():"function"==typeof t.toJSON?t.toJSON():{}}function ft(t,e,n){const r=e.getOptions(),{publicKey:o}=e.getDsn()||{},{segment:i}=n&&n.getUser()||{},s=z({environment:r.environment||a,release:r.release,user_segment:i,public_key:o,trace_id:t});return e.emit&&e.emit("createDsc",s),s}function mt(t){const e=qt();if(!e)return{};const n=ft(ht(t).trace_id||"",e,Vt()),r=ut(t);if(!r)return n;const o=r&&r._frozenDynamicSamplingContext;if(o)return o;const{sampleRate:i,source:s}=r.metadata;null!=i&&(n.sample_rate=`${i}`);const a=ht(r);return s&&"url"!==s&&(n.transaction=a.description),n.sampled=String(function(t){const{traceFlags:e}=t.spanContext();return Boolean(e&dt)}(r)),e.emit&&e.emit("createDsc",n),n}function gt(t,e){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=e;!function(t,e){const{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=e,c=z(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const l=z(r);l&&Object.keys(l).length&&(t.tags={...l,...t.tags});const u=z(o);u&&Object.keys(u).length&&(t.user={...u,...t.user});const d=z(i);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),s&&(t.level=s),a&&(t.transaction=a)}(t,e),r&&function(t,e){t.contexts={trace:pt(e),...t.contexts};const n=ut(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:mt(e),...t.sdkProcessingMetadata};const r=ht(n).description;r&&(t.tags={transaction:r,...t.tags})}}(t,r),function(t,e){t.fingerprint=t.fingerprint?K(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,o),function(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}(t,i)}function yt(t,e){const{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:f}=e;_t(t,"extra",n),_t(t,"tags",r),_t(t,"user",o),_t(t,"contexts",i),_t(t,"sdkProcessingMetadata",a),s&&(t.level=s),h&&(t.transactionName=h),f&&(t.span=f),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...p}}function _t(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}let bt;class vt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=wt()}static clone(t){return t?t.clone():new vt}clone(){const t=new vt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ct(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t;if(e instanceof vt){const t=e.getScopeData();this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&Object.keys(t.user).length&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint.length&&(this._fingerprint=t.fingerprint),e.getRequestSession()&&(this._requestSession=e.getRequestSession()),t.propagationContext&&(this._propagationContext=t.propagationContext)}else if(g(e)){const e=t;this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=wt(),this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const r={timestamp:Y(),...t},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:e,_contexts:n,_tags:r,_extra:o,_user:i,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:t,attachments:e,contexts:n,tags:r,extra:o,user:i,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(t,e={},n=[]){return gt(t,this.getScopeData()),st([...n,...ot(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=e&&e.event_id?e.event_id:H();if(!this._client)return O.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},this),n}captureMessage(t,e,n){const r=n&&n.event_id?n.event_id:H();if(!this._client)return O.warn("No client configured on scope - will not capture message!"),r;const o=new Error(t);return this._client.captureMessage(t,e,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:H();return this._client?(this._client.captureEvent(t,{...e,event_id:n},this),n):(O.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}}function wt(){return{traceId:H(),spanId:H().substring(16)}}const xt="7.119.0",kt=parseFloat(xt),St=100;class Et{constructor(t,e,n,r=kt){let o,i;this._version=r,e?o=e:(o=new vt,o.setClient(t)),n?i=n:(i=new vt,i.setClient(t)),this._stack=[{scope:o}],t&&this.bindClient(t),this._isolationScope=i}isOlderThan(t){return this._version<t}bindClient(t){const e=this.getStackTop();e.client=t,e.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(t){const e=this.pushScope();let n;try{n=t(e)}catch(t){throw this.popScope(),t}return _(n)?n.then((t=>(this.popScope(),t)),(t=>{throw this.popScope(),t})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:H(),r=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:r,...e,event_id:n}),n}captureMessage(t,e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:H(),o=new Error(t);return this.getScope().captureMessage(t,e,{originalException:t,syntheticException:o,...n,event_id:r}),r}captureEvent(t,e){const n=e&&e.event_id?e.event_id:H();return t.type||(this._lastEventId=n),this.getScope().captureEvent(t,{...e,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=St}=r.getOptions&&r.getOptions()||{};if(i<=0)return;const s={timestamp:Y(),...t},a=o?A((()=>o(s,e))):s;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,e),n.addBreadcrumb(a,i))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,e){this.getScope().setTag(t,e),this.getIsolationScope().setTag(t,e)}setExtra(t,e){this.getScope().setExtra(t,e),this.getIsolationScope().setExtra(t,e)}setContext(t,e){this.getScope().setContext(t,e),this.getIsolationScope().setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();n&&t(e)}run(t){const e=Tt(this);try{t(this)}finally{Tt(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return Z&&O.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,e){const n=this._callExtensionMethod("startTransaction",t,e);return Z&&!n&&(this.getClient()?O.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):O.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop().scope,e=t.getSession();e&&lt(e),this._sendSessionUpdate(),t.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:r,environment:i=a}=n&&n.getOptions()||{},{userAgent:s}=o.navigator||{},c=at({release:r,environment:i,user:e.getUser(),...s&&{userAgent:s},...t}),l=e.getSession&&e.getSession();return l&&"ok"===l.status&&ct(l,{status:"exited"}),this.endSession(),e.setSession(c),c}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop(),n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_callExtensionMethod(t,...e){const n=Ct().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e);Z&&O.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function Ct(){return o.__SENTRY__=o.__SENTRY__||{extensions:{},hub:void 0},o}function Tt(t){const e=Ct(),n=Nt(e);return Mt(e,t),n}function At(){const t=Ct();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return function(t=Ct()){return e=t,!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)&&!Nt(t).isOlderThan(kt)||Mt(t,new Et),Nt(t);var e}(t)}function Ot(){return At().getIsolationScope()}function Nt(t){return s("hub",(()=>new Et),t)}function Mt(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}const Dt=/\(error: (.*)\)/,Rt=/captureMessage|captureException/;function It(...t){const e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{const r=[],o=t.split("\n");for(let t=n;t<o.length;t++){const n=o[t];if(n.length>1024)continue;const i=Dt.test(n)?n.replace(Dt,"$1"):n;if(!i.match(/\S*Error: /)){for(const t of e){const e=t(i);if(e){r.push(e);break}}if(r.length>=50)break}}return function(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),Rt.test(e[e.length-1].function||"")&&(e.pop(),Rt.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,50).map((t=>({...t,filename:t.filename||e[e.length-1].filename,function:t.function||"?"})))}(r)}}const $t="<anonymous>";function jt(t){try{return t&&"function"==typeof t&&t.name||$t}catch(t){return $t}}function Lt(t,e=100,n=1/0){try{return Bt("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function Pt(t,e=3,n=102400){const r=Lt(t,e);return o=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(o))>n?Pt(t,e-1,n):r;var o}function Bt(t,e,r=1/0,o=1/0,i=function(){const t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++)if(e[t]===n)return!0;return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}()){const[s,a]=i;if(null==e||["number","boolean","string"].includes(typeof e)&&("number"!=typeof(c=e)||c==c))return e;var c;const l=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if(void 0!==n.g&&e===n.g)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if(v(e))return"[VueViewModel]";if(function(t){return g(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}(e))return"[SyntheticEvent]";if("number"==typeof e&&e!=e)return"[NaN]";if("function"==typeof e)return`[Function: ${jt(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const r=function(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(t){return`**non-serializable** (${t})`}}(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const u="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:r;if(0===u)return l.replace("object ","");if(s(e))return"[Circular ~]";const d=e;if(d&&"function"==typeof d.toJSON)try{return Bt("",d.toJSON(),u-1,o,i)}catch(t){}const p=Array.isArray(e)?[]:{};let h=0;const f=L(e);for(const t in f){if(!Object.prototype.hasOwnProperty.call(f,t))continue;if(h>=o){p[t]="[MaxProperties ~]";break}const e=f[t];p[t]=Bt(t,e,u-1,o,i),h++}return a(e),p}const zt=new WeakMap;const Ft=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ht(t,e){return At().captureEvent(t,e)}function Ut(t,e){At().addBreadcrumb(t,e)}function qt(){return At().getClient()}function Vt(){return At().getScope()}function Wt(t){const e=qt(),n=Ot(),r=Vt(),{release:i,environment:s=a}=e&&e.getOptions()||{},{userAgent:c}=o.navigator||{},l=at({release:i,environment:s,user:r.getUser()||n.getUser(),...c&&{userAgent:c},...t}),u=n.getSession();return u&&"ok"===u.status&&ct(u,{status:"exited"}),Jt(),n.setSession(l),r.setSession(l),l}function Jt(){const t=Ot(),e=Vt(),n=e.getSession()||t.getSession();n&&lt(n),Kt(),t.setSession(),e.setSession()}function Kt(){const t=Ot(),e=Vt(),n=qt(),r=e.getSession()||t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function Gt(t=!1){t?Jt():Kt()}const Yt=[];function Xt(t){const e=t.defaultIntegrations||[],n=t.integrations;let r;e.forEach((t=>{t.isDefaultInstance=!0})),r=Array.isArray(n)?[...e,...n]:"function"==typeof n?K(n(e)):e;const o=function(t){const e={};return t.forEach((t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.keys(e).map((t=>e[t]))}(r),i=function(t){for(let e=0;e<t.length;e++)if(!0==("Debug"===t[e].name))return e;return-1}(o);if(-1!==i){const[t]=o.splice(i,1);o.push(t)}return o}function Qt(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function Zt(t,e,n){if(n[e.name])Z&&O.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,-1===Yt.indexOf(e.name)&&(e.setupOnce(it,At),Yt.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),t.on&&"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",((e,r)=>n(e,r,t)))}if(t.addEventProcessor&&"function"==typeof e.processEvent){const n=e.processEvent.bind(e),r=Object.assign(((e,r)=>n(e,r,t)),{id:e.name});t.addEventProcessor(r)}Z&&O.log(`Integration installed: ${e.name}`)}}function te(t,e){return Object.assign((function(...t){return e(...t)}),{id:t})}const ee=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],ne=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],re="InboundFilters",oe=(t={})=>({name:re,setupOnce(){},processEvent(e,n,r){const o=r.getOptions(),i=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:ee],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:ne],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,o);return function(t,e){return e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t)?(Z&&O.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${q(t)}`),!0):function(t,e){return!(t.type||!e||!e.length)&&function(t){const e=[];let n;t.message&&e.push(t.message);try{n=t.exception.values[t.exception.values.length-1]}catch(t){}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),Z&&0===e.length&&O.error(`Could not extract message for event ${q(t)}`),e}(t).some((t=>D(t,e)))}(t,e.ignoreErrors)?(Z&&O.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${q(t)}`),!0):function(t,e){if("transaction"!==t.type||!e||!e.length)return!1;const n=t.transaction;return!!n&&D(n,e)}(t,e.ignoreTransactions)?(Z&&O.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${q(t)}`),!0):function(t,e){if(!e||!e.length)return!1;const n=ie(t);return!!n&&D(n,e)}(t,e.denyUrls)?(Z&&O.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${q(t)}.\nUrl: ${ie(t)}`),!0):!function(t,e){if(!e||!e.length)return!0;const n=ie(t);return!n||D(n,e)}(t,e.allowUrls)&&(Z&&O.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${q(t)}.\nUrl: ${ie(t)}`),!0)}(e,i)?null:e}});function ie(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(e):null}catch(e){return Z&&O.error(`Cannot extract url for event ${q(t)}`),null}}let se;te(re,oe);const ae="FunctionToString",ce=new WeakMap,le=()=>({name:ae,setupOnce(){se=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=j(this),n=ce.has(qt())&&void 0!==e?e:this;return se.apply(n,t)}}catch(t){}},setup(t){ce.set(t,!0)}});te(ae,le);const ue=i();function de(){if(!("fetch"in ue))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(t){return!1}}function pe(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}const he=i(),fe={},me={};function ge(t,e){fe[t]=fe[t]||[],fe[t].push(e)}function ye(t,e){me[t]||(e(),me[t]=!0)}function _e(t,e){const n=t&&fe[t];if(n)for(const r of n)try{r(e)}catch(e){E&&O.error(`Error while triggering instrumentation handler.\nType: ${t}\nName: ${jt(r)}\nError:`,e)}}const be=o;let ve;function we(t){const e="history";ge(e,t),ye(e,xe)}function xe(){if(!function(){const t=he.chrome,e=t&&t.app&&t.app.runtime,n="history"in he&&!!he.history.pushState&&!!he.history.replaceState;return!e&&n}())return;const t=be.onpopstate;function e(t){return function(...e){const n=e.length>2?e[2]:void 0;if(n){const t=ve,e=String(n);ve=e,_e("history",{from:t,to:e})}return t.apply(this,e)}}be.onpopstate=function(...e){const n=be.location.href,r=ve;if(ve=n,_e("history",{from:r,to:n}),t)try{return t.apply(this,e)}catch(t){}},R(be.history,"pushState",e),R(be.history,"replaceState",e)}const ke=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Se(t,e=!1){const{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${s}`}function Ee(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Ce(t,e=[]){return[t,e]}function Te(t,e){const[n,r]=t;return[n,[...r,e]]}function Ae(t,e){const n=t[1];for(const t of n)if(e(t,t[0].type))return!0;return!1}function Oe(t,e){return(e||new TextEncoder).encode(t)}function Ne(t,e){const[n,r]=t;let o=JSON.stringify(n);function i(t){"string"==typeof o?o="string"==typeof t?o+t:[Oe(o,e),t]:o.push("string"==typeof t?Oe(t,e):t)}for(const t of r){const[e,n]=t;if(i(`\n${JSON.stringify(e)}\n`),"string"==typeof n||n instanceof Uint8Array)i(n);else{let t;try{t=JSON.stringify(n)}catch(e){t=JSON.stringify(Lt(n))}i(t)}}return"string"==typeof o?o:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let r=0;for(const e of t)n.set(e,r),r+=e.length;return n}(o)}function Me(t,e){const n="string"==typeof t.data?Oe(t.data,e):t.data;return[z({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const De={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Re(t){return De[t]}function Ie(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}class $e extends Error{constructor(t,e="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}}const je="7";function Le(t,e={}){const n="string"==typeof e?e:e.tunnel,r="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return n={sentry_key:t.publicKey,sentry_version:je,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(n[t])}`)).join("&");var n}(t,r)}`}const Pe="Not capturing exception because it's already been captured.";class Be{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=function(t){const e="string"==typeof t?function(t){const e=ke.exec(t);if(!e)return void A((()=>{console.error(`Invalid Sentry Dsn: ${t}`)}));const[n,r,o="",i,s="",a]=e.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const t=l.match(/^\d+/);t&&(l=t[0])}return Ee({host:i,pass:o,path:c,projectId:l,port:s,protocol:n,publicKey:r})}(t):Ee(t);if(e&&function(t){if(!E)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find((e=>!t[e]&&(O.error(`Invalid Sentry Dsn: ${e} missing`),!0)))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(O.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(O.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(O.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}(t.dsn):Z&&O.warn("No DSN provided, client will not send events."),this._dsn){const e=Le(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if(J(t))return void(Z&&O.log(Pe));let r=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{r=t}))),r}captureMessage(t,e,n,r){let o=n&&n.event_id;const i=f(t)?t:String(t),s=m(t)?this.eventFromMessage(i,e,n):this.eventFromException(t,n);return this._process(s.then((t=>this._captureEvent(t,n,r))).then((t=>{o=t}))),o}captureEvent(t,e,n){if(e&&e.originalException&&J(e.originalException))return void(Z&&O.log(Pe));let r=e&&e.event_id;const o=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,e,o||n).then((t=>{r=t}))),r}captureSession(t){"string"!=typeof t.release?Z&&O.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),ct(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t))))):et(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return Z&&O.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];Zt(this,t,this._integrations),e||Qt(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=function(t,e,n,r){const o=Ie(n),i=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const s=function(t,e,n,r){const o=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Se(r)},...o&&{trace:z({...o})}}}(t,o,r,e);return delete t.sdkProcessingMetadata,Ce(s,[[{type:i},t]])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=Te(n,Me(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((e=>this.emit("afterSendEvent",t,e)),null)}sendSession(t){const e=function(t,e,n,r){const o=Ie(n);return Ce({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&e&&{dsn:Se(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${t}:${e}`;Z&&O.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}captureAggregateMetrics(t){Z&&O.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=function(t,e,n,r){const o={sent_at:(new Date).toISOString()};n&&n.sdk&&(o.sdk={name:n.sdk.name,version:n.sdk.version}),r&&e&&(o.dsn=Se(e));const i=function(t){const e=function(t){let e="";for(const n of t){const t=Object.entries(n.tags),r=t.length>0?`|#${t.map((([t,e])=>`${t}:${e}`)).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return e}(t);return[{type:"statsd",length:e.length},e]}(t);return Ce(o,[i])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach((t=>t(...e)))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach((e=>{e&&Zt(t,e,n)})),n}(this,t),Qt(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,r=!1;const o=e.exception&&e.exception.values;if(o){r=!0;for(const t of o){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const i="ok"===t.status;(i&&0===t.errors||i&&n)&&(ct(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new rt((e=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r=Ot()){const i=this.getOptions(),s=Object.keys(this._integrations);return!e.integrations&&s.length>0&&(e.integrations=s),this.emit("preprocessEvent",t,e),function(t,e,n,r,i,s){const{normalizeDepth:c=3,normalizeMaxBreadth:l=1e3}=t,u={...e,event_id:e.event_id||n.event_id||H(),timestamp:e.timestamp||Y()},d=n.integrations||t.integrations.map((t=>t.name));!function(t,e){const{environment:n,release:r,dist:o,maxValueLength:i=250}=e;"environment"in t||(t.environment="environment"in e?n:a),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=N(t.message,i));const s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=N(s.value,i));const c=t.request;c&&c.url&&(c.url=N(c.url,i))}(u,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(u,d),void 0===e.type&&function(t,e){const n=o._sentryDebugIds;if(!n)return;let r;const i=zt.get(e);i?r=i:(r=new Map,zt.set(e,r));const s=Object.keys(n).reduce(((t,o)=>{let i;const s=r.get(o);s?i=s:(i=e(o),r.set(o,i));for(let e=i.length-1;e>=0;e--){const r=i[e];if(r.filename){t[r.filename]=n[o];break}}return t}),{});try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.filename&&(t.debug_id=s[t.filename])}))}))}catch(t){}}(u,t.stackParser);const p=function(t,e){if(!e)return t;const n=t?t.clone():new vt;return n.update(e),n}(r,n.captureContext);n.mechanism&&W(u,n.mechanism);const h=i&&i.getEventProcessors?i.getEventProcessors():[],f=(bt||(bt=new vt),bt).getScopeData();s&&yt(f,s.getScopeData()),p&&yt(f,p.getScopeData());const m=[...n.attachments||[],...f.attachments];return m.length&&(n.attachments=m),gt(u,f),st([...h,...ot(),...f.eventProcessors],u,n).then((t=>(t&&function(t){const e={};try{t.exception.values.forEach((t=>{t.stacktrace.frames.forEach((t=>{t.debug_id&&(t.abs_path?e[t.abs_path]=t.debug_id:t.filename&&(e[t.filename]=t.debug_id),delete t.debug_id)}))}))}catch(t){}if(0===Object.keys(e).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach((t=>{n.push({type:"sourcemap",code_file:t,debug_id:e[t]})}))}(t),"number"==typeof c&&c>0?function(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:Lt(t.data,e,n)}})))},...t.user&&{user:Lt(t.user,e,n)},...t.contexts&&{contexts:Lt(t.contexts,e,n)},...t.extra&&{extra:Lt(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Lt(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map((t=>{const r=ht(t).data;return r&&(t.data=Lt(r,e,n)),t}))),r}(t,c,l):t)))}(i,t,e,n,this,r).then((t=>{if(null===t)return t;const e={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if((!t.contexts||!t.contexts.trace)&&e){const{traceId:r,spanId:o,parentSpanId:i,dsc:s}=e;t.contexts={trace:{trace_id:r,span_id:o,parent_span_id:i},...t.contexts};const a=s||ft(r,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:a,...t.sdkProcessingMetadata}}return t}))}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{if(Z){const e=t;"log"===e.logLevel?O.log(e.message):O.warn(e)}}))}_processEvent(t,e,n){const r=this.getOptions(),{sampleRate:o}=r,i=Fe(t),s=ze(t),a=t.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",t),nt(new $e(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const l="replay_event"===a?"replay":a,u=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,t),new $e("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const o=function(t,e,n){const{beforeSend:r,beforeSendTransaction:o}=t;if(ze(e)&&r)return r(e,n);if(Fe(e)&&o){if(e.spans){const t=e.spans.length;e.sdkProcessingMetadata={...e.sdkProcessingMetadata,spanCountBeforeProcessing:t}}return o(e,n)}return e}(r,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(_(t))return t.then((t=>{if(!g(t)&&null!==t)throw new $e(n);return t}),(t=>{throw new $e(`${e} rejected with ${t}`)}));if(!g(t)&&null!==t)throw new $e(n);return t}(o,c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",l,t),i){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw new $e(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!i&&o&&this._updateSessionFromEvent(o,r),i){const t=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const s=r.transaction_info;if(i&&s&&r.transaction!==t.transaction){const t="custom";r.transaction_info={...s,source:t}}return this.sendEvent(r,e),r})).then(null,(t=>{if(t instanceof $e)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new $e(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,(t=>{Z&&O.error("Error while sending event:",t)}));Z&&O.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t[e]}}))}}function ze(t){return void 0===t.type}function Fe(t){return"transaction"===t.type}const He="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Ue(t,e){const n=Ve(t,e),r={type:e&&e.name,value:Je(e)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function qe(t,e){return{exception:{values:[Ue(t,e)]}}}function Ve(t,e){const n=e.stacktrace||e.stack||"",r=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(We.test(t.message))return 1}return 0}(e);try{return t(n,r)}catch(t){}return[]}const We=/Minified React error #\d+;/i;function Je(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function Ke(t,e,n,r,o){let i;if(d(e)&&e.error)return qe(t,e.error);if(p(e)||u(e,"DOMException")){const o=e;if("stack"in e)i=qe(t,e);else{const e=o.name||(p(o)?"DOMError":"DOMException"),s=o.message?`${e}: ${o.message}`:e;i=Ge(t,s,n,r),V(i,s)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return l(e)?qe(t,e):g(e)||y(e)?(i=function(t,e,n,r){const o=qt(),i=o&&o.getOptions().normalizeDepth,s={exception:{values:[{type:y(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Ye(e,{isUnhandledRejection:r})}]},extra:{__serialized__:Pt(e,i)}};if(n){const e=Ve(t,n);e.length&&(s.exception.values[0].stacktrace={frames:e})}return s}(t,e,n,o),W(i,{synthetic:!0}),i):(i=Ge(t,e,n,r),V(i,`${e}`,void 0),W(i,{synthetic:!0}),i)}function Ge(t,e,n,r){const o={};if(r&&n){const r=Ve(t,n);r.length&&(o.exception={values:[{value:e,stacktrace:{frames:r}}]})}if(f(e)){const{__sentry_template_string__:t,__sentry_template_values__:n}=e;return o.logentry={message:t,params:n},o}return o.message=e,o}function Ye(t,{isUnhandledRejection:e}){const n=function(t,e=40){const n=Object.keys(L(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return N(n[0],e);for(let t=n.length;t>0;t--){const r=n.slice(0,t).join(", ");if(!(r.length>e))return t===n.length?r:N(r,e)}return""}(t),r=e?"promise rejection":"exception";return d(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:y(t)?`Event \`${function(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch(t){}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}const Xe=o;let Qe=0;function Ze(){return Qe>0}function tn(t,e={},n){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if(j(t))return t}catch(e){return t}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((t=>tn(t,e)));return t.apply(this,o)}catch(t){throw Qe++,setTimeout((()=>{Qe--})),function(...t){const e=At();if(2===t.length){const[n,r]=t;return n?e.withScope((()=>(e.getStackTop().scope=n,r(n)))):e.withScope(r)}e.withScope(t[0])}((n=>{var o;n.addEventProcessor((t=>(e.mechanism&&(V(t,void 0,void 0),W(t,e.mechanism)),t.extra={...t.extra,arguments:r},t))),o=t,At().captureException(o,function(t){if(t)return function(t){return t instanceof vt||"function"==typeof t}(t)||function(t){return Object.keys(t).some((t=>Ft.includes(t)))}(t)?{captureContext:t}:t}(undefined))})),t}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}catch(t){}$(r,t),I(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch(t){}return r}class en extends Be{constructor(t){!function(t,e,n=[e],r="npm"){const o=t._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${e}`,packages:n.map((t=>({name:`${r}:@sentry/${t}`,version:xt}))),version:xt}),t._metadata=o}(t,"browser",["browser"],Xe.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&Xe.document&&Xe.document.addEventListener("visibilitychange",(()=>{"hidden"===Xe.document.visibilityState&&this._flushOutcomes()}))}eventFromException(t,e){return function(t,e,n,r){const o=Ke(t,e,n&&n.syntheticException||void 0,r);return W(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),et(o)}(this._options.stackParser,t,e,this._options.attachStacktrace)}eventFromMessage(t,e="info",n){return function(t,e,n="info",r,o){const i=Ge(t,e,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),et(i)}(this._options.stackParser,t,e,n,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled())return void(He&&O.warn("SDK not enabled, will not capture user feedback."));const e=function(t,{metadata:e,tunnel:n,dsn:r}){const o={event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Se(r)}},i=function(t){return[{type:"user_report"},t]}(t);return Ce(o,[i])}(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(t,e,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,e,n)}_flushOutcomes(){const t=this._clearOutcomes();if(0===t.length)return void(He&&O.log("No outcomes to send"));if(!this._dsn)return void(He&&O.log("No dsn provided, will not send outcomes"));He&&O.log("Sending outcomes:",t);const e=(n=t,Ce((r=this._options.tunnel&&Se(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:Y(),discarded_events:n}]]));var n,r;this._sendEnvelope(e)}}function nn(){"console"in o&&C.forEach((function(t){t in o.console&&R(o.console,t,(function(e){return T[t]=e,function(...e){_e("console",{args:e,level:t});const n=T[t];n&&n.apply(o.console,e)}}))}))}const rn=o,on=1e3;let sn,an,cn;function ln(){if(!rn.document)return;const t=_e.bind(null,"dom"),e=un(t,!0);rn.document.addEventListener("click",e,!1),rn.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{const n=rn[e]&&rn[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(R(n,"addEventListener",(function(e){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=i[n]=i[n]||{refCount:0};if(!s.handler){const r=un(t);s.handler=r,e.call(this,n,r,o)}s.refCount++}catch(t){}return e.call(this,n,r,o)}})),R(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},i=o[e];i&&(i.refCount--,i.refCount<=0&&(t.call(this,e,i.handler,r),i.handler=void 0,delete o[e]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}function un(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(t){try{return t.target}catch(t){return null}}(n);if(function(t,e){return"keypress"===t&&(!e||!e.tagName||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!e.isContentEditable)}(n.type,r))return;I(n,"_sentryCaptured",!0),r&&!r._sentryId&&I(r,"_sentryId",H());const o="keypress"===n.type?"input":n.type;(function(t){if(t.type!==an)return!1;try{if(!t.target||t.target._sentryId!==cn)return!1}catch(t){}return!0})(n)||(t({event:n,name:o,global:e}),an=n.type,cn=r?r._sentryId:void 0),clearTimeout(sn),sn=rn.setTimeout((()=>{cn=void 0,an=void 0}),on)}}const dn=o,pn="__sentry_xhr_v3__";function hn(){if(!dn.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;R(t,"open",(function(t){return function(...e){const n=Date.now(),r=h(e[0])?e[0].toUpperCase():void 0,o=function(t){if(h(t))return t;try{return t.toString()}catch(t){}}(e[1]);if(!r||!o)return t.apply(this,e);this[pn]={method:r,url:o,request_headers:{}},"POST"===r&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const t=this[pn];if(t&&4===this.readyState){try{t.status_code=this.status}catch(t){}_e("xhr",{args:[r,o],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?R(this,"onreadystatechange",(function(t){return function(...e){return i(),t.apply(this,e)}})):this.addEventListener("readystatechange",i),R(this,"setRequestHeader",(function(t){return function(...e){const[n,r]=e,o=this[pn];return o&&h(n)&&h(r)&&(o.request_headers[n.toLowerCase()]=r),t.apply(this,e)}})),t.apply(this,e)}})),R(t,"send",(function(t){return function(...e){const n=this[pn];return n?(void 0!==e[0]&&(n.body=e[0]),_e("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),t.apply(this,e)):t.apply(this,e)}}))}function fn(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!de())return!1;if(pe(ue.fetch))return!0;let t=!1;const e=ue.document;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=pe(n.contentWindow.fetch)),e.head.removeChild(n)}catch(t){E&&O.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return t})()&&R(o,"fetch",(function(t){return function(...e){const{method:n,url:r}=function(t){if(0===t.length)return{method:"GET",url:""};if(2===t.length){const[e,n]=t;return{url:gn(e),method:mn(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:gn(e),method:mn(e,"method")?String(e.method).toUpperCase():"GET"}}(e),i={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return _e("fetch",{...i}),t.apply(o,e).then((t=>(_e("fetch",{...i,endTimestamp:Date.now(),response:t}),t)),(t=>{throw _e("fetch",{...i,endTimestamp:Date.now(),error:t}),t}))}}))}function mn(t,e){return!!t&&"object"==typeof t&&!!t[e]}function gn(t){return"string"==typeof t?t:t?mn(t,"url")?t.url:t.toString?t.toString():"":""}const yn=["fatal","error","warning","log","info","debug"];function _n(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const bn="Breadcrumbs",vn=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:bn,setupOnce(){},setup(t){var n;e.console&&function(t){const e="console";ge(e,t),ye(e,nn)}(function(t){return function(e){if(qt()!==t)return;const n={category:"console",data:{arguments:e.args,logger:"console"},level:(r=e.level,"warn"===r?"warning":yn.includes(r)?r:"log"),message:M(e.args," ")};var r;if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${M(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}Ut(n,{input:e.args,level:e.level})}}(t)),e.dom&&(n=function(t,e){return function(n){if(qt()!==t)return;let r,o,i="object"==typeof e?e.serializeAttribute:void 0,s="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;s&&s>1024&&(He&&O.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=1024),"string"==typeof i&&(i=[i]);try{const t=n.event,e=function(t){return!!t&&!!t.target}(t)?t.target:t;r=k(e,{keyAttrs:i,maxStringLength:s}),o=function(t){if(!w.HTMLElement)return null;let e=t;for(let t=0;t<5;t++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}(e)}catch(t){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),Ut(a,{event:n.event,name:n.name,global:n.global})}}(t,e.dom),ge("dom",n),ye("dom",ln)),e.xhr&&function(t){ge("xhr",t),ye("xhr",hn)}(function(t){return function(e){if(qt()!==t)return;const{startTimestamp:n,endTimestamp:r}=e,o=e.xhr[pn];if(!n||!r||!o)return;const{method:i,url:s,status_code:a,body:c}=o;Ut({category:"xhr",data:{method:i,url:s,status_code:a},type:"http"},{xhr:e.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(t)),e.fetch&&function(t){const e="fetch";ge(e,t),ye(e,fn)}(function(t){return function(e){if(qt()!==t)return;const{startTimestamp:n,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error)Ut({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args,startTimestamp:n,endTimestamp:r});else{const t=e.response;Ut({category:"fetch",data:{...e.fetchData,status_code:t&&t.status},type:"http"},{input:e.args,response:t,startTimestamp:n,endTimestamp:r})}}}(t)),e.history&&we(function(t){return function(e){if(qt()!==t)return;let n=e.from,r=e.to;const o=_n(Xe.location.href);let i=n?_n(n):void 0;const s=_n(r);i&&i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Ut({category:"navigation",data:{from:n,to:r}})}}(t)),e.sentry&&t.on&&t.on("beforeSendEvent",function(t){return function(e){qt()===t&&Ut({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:q(e)},{event:e})}}(t))}}};te(bn,vn);const wn="Dedupe",xn=()=>{let t;return{name:wn,setupOnce(){},processEvent(e){if(e.type)return e;try{if(function(t,e){return!!e&&(!!function(t,e){const n=t.message,r=e.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!Sn(t,e)&&!!kn(t,e))))}(t,e)||!!function(t,e){const n=En(e),r=En(t);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!Sn(t,e)&&!!kn(t,e)))}(t,e))}(e,t))return He&&O.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){}return t=e}}};function kn(t,e){let n=Cn(t),r=Cn(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let t=0;t<r.length;t++){const e=r[t],o=n[t];if(e.filename!==o.filename||e.lineno!==o.lineno||e.colno!==o.colno||e.function!==o.function)return!1}return!0}function Sn(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function En(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Cn(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}te(wn,xn);let Tn=null;function An(){Tn=o.onerror,o.onerror=function(t,e,n,r,o){return _e("error",{column:r,error:o,line:n,msg:t,url:e}),!(!Tn||Tn.__SENTRY_LOADER__)&&Tn.apply(this,arguments)},o.onerror.__SENTRY_INSTRUMENTED__=!0}let On=null;function Nn(){On=o.onunhandledrejection,o.onunhandledrejection=function(t){return _e("unhandledrejection",t),!(On&&!On.__SENTRY_LOADER__)||On.apply(this,arguments)},o.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Mn="GlobalHandlers",Dn=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Mn,setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(function(t){!function(){const e="error";ge(e,(e=>{const{stackParser:n,attachStacktrace:r}=$n();if(qt()!==t||Ze())return;const{msg:o,url:i,line:s,column:a,error:c}=e,l=void 0===c&&h(o)?function(t,e,n,r){const o=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=d(t)?t.message:t,s="Error";const a=i.match(o);a&&(s=a[1],i=a[2]);return Rn({exception:{values:[{type:s,value:i}]}},e,n,r)}(o,i,s,a):Rn(Ke(n,c||o,void 0,r,!1),i,s,a);l.level="error",Ht(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),ye(e,An)}()}(t),In("onerror")),e.onunhandledrejection&&(function(t){!function(){const e="unhandledrejection";ge(e,(e=>{const{stackParser:n,attachStacktrace:r}=$n();if(qt()!==t||Ze())return;const o=function(t){if(m(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return t}(e),i=m(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Ke(n,o,void 0,r,!0);i.level="error",Ht(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})})),ye(e,Nn)}()}(t),In("onunhandledrejection"))}}};function Rn(t,e,n,r){const o=t.exception=t.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=h(e)&&e.length>0?e:function(){try{return w.document.location.href}catch(t){return""}}();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),t}function In(t){He&&O.log(`Global Handler attached: ${t}`)}function $n(){const t=qt();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}te(Mn,Dn);const jn="HttpContext",Ln=()=>({name:jn,setupOnce(){},preprocessEvent(t){if(!Xe.navigator&&!Xe.location&&!Xe.document)return;const e=t.request&&t.request.url||Xe.location&&Xe.location.href,{referrer:n}=Xe.document||{},{userAgent:r}=Xe.navigator||{},o={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...t.request,...e&&{url:e},headers:o};t.request=i}});function Pn(t,e,n=250,r,o,i,s){if(!(i.exception&&i.exception.values&&s&&b(s.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,l;a&&(i.exception.values=(c=Bn(t,e,o,s.originalException,r,i.exception.values,a,0),l=n,c.map((t=>(t.value&&(t.value=N(t.value,l)),t)))))}function Bn(t,e,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(b(r[o],Error)){zn(s,a);const i=t(e,r[o]),l=c.length;Fn(i,o,l,a),c=Bn(t,e,n,r[o],o,[i,...c],i,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(b(r,Error)){zn(s,a);const l=t(e,r),u=c.length;Fn(l,`errors[${i}]`,u,a),c=Bn(t,e,n,r,o,[l,...c],l,u)}})),c}function zn(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,..."AggregateError"===t.type&&{is_exception_group:!0},exception_id:e}}function Fn(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}te(jn,Ln);const Hn="LinkedErrors",Un=(t={})=>{const e=t.limit||5,n=t.key||"cause";return{name:Hn,setupOnce(){},preprocessEvent(t,r,o){const i=o.getOptions();Pn(Ue,i.stackParser,i.maxValueLength,n,e,t,r)}}},qn=(te(Hn,Un),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"]),Vn="TryCatch",Wn=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Vn,setupOnce(){e.setTimeout&&R(Xe,"setTimeout",Jn),e.setInterval&&R(Xe,"setInterval",Jn),e.requestAnimationFrame&&R(Xe,"requestAnimationFrame",Kn),e.XMLHttpRequest&&"XMLHttpRequest"in Xe&&R(XMLHttpRequest.prototype,"send",Gn);const t=e.eventTarget;t&&(Array.isArray(t)?t:qn).forEach(Yn)}}};function Jn(t){return function(...e){const n=e[0];return e[0]=tn(n,{mechanism:{data:{function:jt(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Kn(t){return function(e){return t.apply(this,[tn(e,{mechanism:{data:{function:"requestAnimationFrame",handler:jt(t)},handled:!1,type:"instrument"}})])}}function Gn(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in n&&"function"==typeof n[t]&&R(n,t,(function(e){const n={mechanism:{data:{function:t,handler:jt(e)},handled:!1,type:"instrument"}},r=j(e);return r&&(n.mechanism.data.handler=jt(r)),tn(e,n)}))})),t.apply(this,e)}}function Yn(t){const e=Xe,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(R(n,"addEventListener",(function(e){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=tn(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:jt(r),target:t},handled:!1,type:"instrument"}}))}catch(t){}return e.apply(this,[n,tn(r,{mechanism:{data:{function:"addEventListener",handler:jt(r),target:t},handled:!1,type:"instrument"}}),o])}})),R(n,"removeEventListener",(function(t){return function(e,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&t.call(this,e,n,r)}catch(t){}return t.call(this,e,o,r)}})))}te(Vn,Wn);const Xn="?";function Qn(t,e,n,r){const o={filename:t,function:e,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Zn=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,tr=/\((\S*)(?::(\d+))(?::(\d+))\)/,er=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,nr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,rr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,or=It([30,t=>{const e=Zn.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){const t=tr.exec(e[2]);t&&(e[2]=t[1],e[3]=t[2],e[4]=t[3])}const[t,n]=ir(e[1]||Xn,e[2]);return Qn(n,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],[50,t=>{const e=er.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const t=nr.exec(e[3]);t&&(e[1]=e[1]||"eval",e[3]=t[1],e[4]=t[2],e[5]="")}let t=e[3],n=e[1]||Xn;return[n,t]=ir(n,t),Qn(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],[40,t=>{const e=rr.exec(t);return e?Qn(e[2],e[1]||Xn,+e[3],e[4]?+e[4]:void 0):void 0}]),ir=(t,e)=>{const n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:Xn,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};const sr=6e4;const ar=30;function cr(t,e,n=function(t){const e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(r){if(!(void 0===t||e.length<t))return nt(new $e("Not adding Promise because buffer limit was reached."));const o=r();return-1===e.indexOf(o)&&e.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(t){return new rt(((n,r)=>{let o=e.length;if(!o)return n(!0);const i=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{et(t).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}(t.bufferSize||ar)){let r={};function o(o){const i=[];if(Ae(o,((e,n)=>{const o=Re(n);if(function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(r,o)){const r=lr(e,n);t.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(e)})),0===i.length)return et();const s=Ce(o[0],i),a=e=>{Ae(s,((n,r)=>{const o=lr(n,r);t.recordDroppedEvent(e,Re(r),o)}))};return n.add((()=>e({body:Ne(s,t.textEncoder)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&Z&&O.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=function(t,{statusCode:e,headers:n},r=Date.now()){const o={...t},i=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(i)for(const t of i.trim().split(",")){const[e,n,,,i]=t.split(":",5),s=parseInt(e,10),a=1e3*(isNaN(s)?60:s);if(n)for(const t of n.split(";"))"metric_bucket"===t&&i&&!i.split(";").includes("custom")||(o[t]=r+a);else o.all=r+a}else s?o.all=r+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${t}`);return isNaN(r)?sr:r-e}(s,r):429===e&&(o.all=r+6e4);return o}(r,t),t)),(t=>{throw a("network_error"),t})))).then((t=>t),(t=>{if(t instanceof $e)return Z&&O.error("Skipped sending event because buffer is full."),a("queue_overflow"),et();throw t}))}return o.__sentry__baseTransport__=!0,{send:o,flush:t=>n.drain(t)}}function lr(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}let ur;function dr(t,e=function(){if(ur)return ur;if(pe(Xe.fetch))return ur=Xe.fetch.bind(Xe);const t=Xe.document;let e=Xe.fetch;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(t){He&&O.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return ur=e.bind(Xe)}()){let n=0,r=0;return cr(t,(function(o){const i=o.body.length;n+=i,r++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,s).then((t=>(n-=i,r--,{statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}catch(t){return ur=void 0,n-=i,r--,nt(t)}}))}function pr(t){return cr(t,(function(e){return new rt(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",t.url);for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&o.setRequestHeader(e,t.headers[e]);o.send(e.body)}))}))}const hr=[oe(),le(),Wn(),vn(),Dn(),Un(),xn(),Ln()];var fr=n(206),mr=n.n(fr),gr=n(594);const yr=t=>!!t.story&&function(t){const{isExplicit:e,isAdSafe:n,canHideAds:r}=t;return!e&&n&&!r}(t.story);var _r=n(540);const br={storyCanShowAds:!1,userPlan:"",isProductionEnv:!0,pingbackHost:""},vr=gr.createContext(br);function wr(t){const{initialState:e}=t,n={storyCanShowAds:yr(e),userPlan:"story"in e&&e.story.userPlan||"",isProductionEnv:"prod"===e.config.environment,pingbackHost:e.config.hosts.pingback};return(0,_r.jsx)(vr.Provider,{value:n,children:t.children})}class xr extends Error{constructor(t,e,n){super("Unable to send request"),this.url=t,this.options=e,this.nativeError=n}}class kr extends Error{constructor(t,e,n,r){super(t),this.url=e,this.httpStatus=n,this.value=r}}class Sr extends Error{constructor(t){super("The request was aborted due to timeout"),this.url=t}}class Er extends Error{constructor(t,e,n){super("Unable to decode response as json string"),this.url=t,this.nativeError=e,this.nativeErrorMessage=n}}var Cr=n(668),Tr=n.n(Cr);const Ar={error:Tr()("@issuu/request:error"),info:Tr()("@issuu/request:info")};let Or;Ar.info.log=console.log.bind(console);try{Or=!0}catch(t){Or=!0}const Nr=t=>Object.entries(t).reduce(((t,e)=>{let[n,r]=e;return null!=r&&t.push(`${n}=${r}`),t}),[]).join("; "),Mr=t=>Object.entries(t).map((t=>{let[e,n]=t;return null!=n?`${encodeURIComponent(e)}=${encodeURIComponent(n)}`:""})).join("&"),Dr=t=>Mr(t).replace(/%20/g,"+");function Rr(t,e,n){return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers;return e.noCache&&(n={...n,"Cache-Control":"no-cache"}),function(t,e){const n=Date.now(),r=e.method;let o=e.cookies||{};if(e.req&&e.req.cookies){const t=e.req.cookies;o={...o,"site.model.username":t["site.model.username"],"site.model.token":t["site.model.token"],iutk:t.iutk};for(const e of Object.keys(t).filter((t=>t.startsWith("x-issuu-"))))o[e]=t[e]}const i="nativeProperty"===e.forwardOriginatingIp?e.req?.ip:"customHeader"===e.forwardOriginatingIp?e.req?.headers["x-forwarded-for"]:void 0,s=e.forwardOriginalRequestedHost?e.req?.hostname:void 0,a=Object.fromEntries(Object.entries({"x-forwarded-for":i,"x-forwarded-host":s,Cookie:Nr(o),"Content-Type":"GET"!==r&&"formdata"===e.bodyType?void 0:"GET"!==r&&"urlencoded"===e.bodyType?"application/x-www-form-urlencoded":"application/json",...e.headers}).filter((t=>"string"==typeof t[1]&&!!t[1])));let c,l=t;if("GET"===r&&(e.body||e.noCache)){let n=e.body||{};e.noCache&&(n={...n,_:Date.now()}),l=t.indexOf("?")>-1?`${t}&${Mr(n)}`:`${t}?${Mr(n)}`}"GET"!==r&&(c="urlencoded"===e.bodyType?Dr(e.body||{}):"formdata"===e.bodyType?e.body:JSON.stringify(e.body||{}));const u="undefined"!=typeof AbortController?new AbortController:void 0,d=e.timeout||(Or?4e3:void 0),p=d?u?.signal:void 0,h=d?setTimeout((()=>{u?.abort()}),d):void 0,f={credentials:"same-origin",method:r,headers:a,body:c,signal:p},m=!1!==e.log;return fetch(l,f).catch((t=>(m&&Ar.error(`${r} ${l} ERROR_REQUEST ${t.message}`),"AbortError"===t.name?Promise.reject(new Sr(l)):Promise.reject(new xr(l,e,t))))).then((t=>t.text().then((e=>{if(!t.ok){m&&Ar.error(`${r} ${l} ${t.status}: ${t.statusText}, response: %o`,e);const n=t=>{try{return JSON.parse(t)}catch(e){if(t)return t}},o=n(e),i="string"==typeof o?o:`${t.status} ${t.statusText}`,s=new kr(i,l,t.status,o);return Promise.reject(s)}return e})).then((t=>{if(e.textResponse)return t;try{return JSON.parse(t)}catch(t){const e=t instanceof Error?t.message:String(t);return m&&Ar.error(`${r} ${l} ERROR_JSON_DECODE ${e}: %o`,t),Promise.reject(new Er(l,t,e))}})).then((e=>{if(m){const e=Date.now()-n;Ar.info(`${r} ${l} ${t.status} ${e}ms`)}return e})))).finally((()=>h&&clearTimeout(h)))}(t,{...e,method:"GET",headers:n})}(`${n||""}/call/article-stories/more-stories?documentSlotId=${t}${e?`&cursor=${e}`:""}`)}const Ir="#f3f3f3";var $r=n(452),jr=n.n($r),Lr={"product-paragraph":"ProductParagraph__product-paragraph__GMmH0__0-0-3287","product-paragraph--xs":"ProductParagraph__product-paragraph--xs__e7Wlt__0-0-3287","product-paragraph--sm":"ProductParagraph__product-paragraph--sm__taM-p__0-0-3287","product-paragraph--md":"ProductParagraph__product-paragraph--md__RD4IP__0-0-3287","product-paragraph--lg":"ProductParagraph__product-paragraph--lg__47dLF__0-0-3287","product-paragraph--xl":"ProductParagraph__product-paragraph--xl__mbI-X__0-0-3287"};const Pr="product-paragraph";function Br(t){let{children:e,className:n,visualSize:r="md",...o}=t;const i=jr()(n,Lr[Pr],Lr[`${Pr}--${r}`]);return gr.createElement("p",{...o,className:i},e)}function zr(){if("undefined"!=typeof document&&void 0!==document.cookie){const t=document.cookie.split(";").map((t=>t.trim())).filter((t=>t.startsWith("iutk=")));if(t.length)return t[0].split("=")[1].trim()}return null}const Fr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Hr;const Ur=new Uint8Array(16);function qr(){if(!Hr&&(Hr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hr(Ur)}const Vr=[];for(let t=0;t<256;++t)Vr.push((t+256).toString(16).slice(1));const Wr=function(t,e,n){if(Fr.randomUUID&&!e&&!t)return Fr.randomUUID();const r=(t=t||{}).random||(t.rng||qr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return Vr[t[e+0]]+Vr[t[e+1]]+Vr[t[e+2]]+Vr[t[e+3]]+"-"+Vr[t[e+4]]+Vr[t[e+5]]+"-"+Vr[t[e+6]]+Vr[t[e+7]]+"-"+Vr[t[e+8]]+Vr[t[e+9]]+"-"+Vr[t[e+10]]+Vr[t[e+11]]+Vr[t[e+12]]+Vr[t[e+13]]+Vr[t[e+14]]+Vr[t[e+15]]}(r)};let Jr=null;function Kr(){if(null===Jr){let t;try{t=zr(),null===t&&(function(){const t=Wr(),e=function(){if("undefined"!=typeof document){const t=/(?:t?)issuu.com$/.exec(document.domain);return t?t[0]:null}return null}();document.cookie=`iutk=${t}${e?`;domain=${e}`:""};path=/;max-age=15552000;samesite=none;secure`}(),t=zr())}catch{t=null}Jr=null===t?"00000000-0000-0000-0000-000000000000":t}return Jr}const Gr="@issuu/tracking-micro-v18.0.2",Yr=t=>{const e=Kr();return e?{iutk:e,...t}:t},Xr=(t,e)=>{const n=`https://${e.pingbackHost}/ping`,r=new Blob([JSON.stringify(Yr(t))],{type:"text/plain;charset=UTF-8"});let o=!1;try{o=navigator.sendBeacon(n,r)}catch(t){}return o};function Qr(t){return function(e){if(Array.isArray(e)&&0===e.length)return!1;const n=(Array.isArray(e)?e:[e]).map((t=>({version:"1.0.0",...t})));return Xr({type:"monitor",version:"2.2.0",origin:Gr,data:n},t)}}function Zr(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)CookieConsent\s*=\s*([^;]*).*$)|^.*$/,"$1").toLowerCase();return t?-1===t.indexOf("preferences:")||-1===t.indexOf("statistics:")||-1===t.indexOf("marketing:")?"invalid":{necessary:!0,preferences:t.indexOf("preferences:true")>-1,statistics:t.indexOf("statistics:true")>-1,marketing:t.indexOf("marketing:true")>-1}:"absent"}const to=()=>(window.ga||(window.ga=function(){window.ga.q=window.ga.q||[];for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];window.ga.q.push(e)}),window.ga);Kr();const eo=function(){(/debugads=([^;]*)/.test(document.cookie)||"undefined"!=typeof window&&window.location.search.includes("debugads=true"))&&console.log(...arguments)};let no=!1;const ro=t=>{const e=(t=>{let{pingbackHost:e,trackingKey:n,attributes:r}=t;const o=Qr({pingbackHost:e}),i=(t,e)=>{const i={type:"ads-widget",attributes:{...r,event_name:t,tracking_key:n}};e&&(i.time=e),eo("ads","pingback",i),o(i)};return{adFilled:t=>{i("filled",t)},adInitialised:()=>{i("initialised")},adRequested:()=>{i("requested")},adTimeout:t=>{i("timeout",t)},adUnfilled:t=>{i("unfilled",t)},adViewable:t=>{i("viewable",t)}}})(t.tracking),n=new Set,r=t.timeout,o=t.onTimeout;let i,s;const a=()=>isNaN(s)?0:Date.now()-s,c=(t,e)=>()=>{n.has(t)||(n.add(t),i&&(clearTimeout(i),i=void 0),t(a()),e&&e())},l={onImpression:c(e.adViewable,t.onImpression),onFilled:c(e.adFilled,t.onFilled),onUnfilled:c(e.adUnfilled,t.onUnfilled),onRequest:c((()=>{s=Date.now(),e.adRequested(),r&&o&&(i=setTimeout((()=>{n.has(e.adFilled)||n.has(e.adUnfilled)||(e.adTimeout(a()),o())}),r))}),t.onRequest)};e.adInitialised(),"htlbid"!==t.adProvider||no||(no=!0,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.dataLayer=window.dataLayer||[];const n={event:t,...e};window.dataLayer.push(n)}("set_gpt_tag"));const u=(t=>{const{rootElm:e}=t,n=e.getAttribute("id")?.trim()||`div-${Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}`;return e.setAttribute("id",n),n})(t),d=((t,e)=>{let{adProvider:n="googletag",adTargeting:r={},network:o,onFilled:i,onImpression:s,onRequest:a,onUnfilled:c,sizes:l}=t;const u=(t=>{let{necessary:e=[],marketing:n=[]}=t;return/(^|;)\s*CookieConsent=[^;]*marketing:true/.test(document.cookie)?e.concat(n):e})(r);let d=null,p=!1;const h=t=>{t.slot.getSlotElementId()===e&&(eo("ads,widget,slotRendered",t),t.isEmpty?c():i())},f=t=>{t.slot.getSlotElementId()===e&&(eo("ads,widget,impressionViewable",t),s())},m=t=>{t.slot.getSlotElementId()===e&&(eo("ads,widget,request",t),a())};return(t=>{window[t]||(window[t]={cmd:[]})})(n),eo("addPlacement, network:",o,"gptTargeting:",u),window[n]?.cmd.push((()=>{const t=window[n];if(t&&!p&&(d=t.defineSlot(o,l,e),d)){t.pubads().addEventListener("impressionViewable",f),t.pubads().addEventListener("slotRenderEnded",h),t.pubads().addEventListener("slotRequested",m);for(let t=0;t<u.length;t++)d.setTargeting(u[t][0],u[t][1]);d.setCollapseEmptyDiv(!1).addService(t.pubads()),t.display(e),t.pubads().refresh([d])}})),()=>{if(p)return;const t=d;d=null,p=!0,window[n]?.cmd.push((()=>{const e=window[n];e&&(t&&e.destroySlots([t]),e.pubads().removeEventListener("impressionViewable",f),e.pubads().removeEventListener("slotRenderEnded",h),e.pubads().removeEventListener("slotRequested",m))}))}})({...t,...l},u);return()=>{i&&(clearTimeout(i),i=void 0),d()}},oo="IN_STORIES",io="DISPLAY",so={[oo]:{network:"/30443627/instories_300x250",sizes:[[300,250],[320,50]]},[io]:{network:"/30443627/stories_300x250",sizes:[[300,250],[400,300]]}},ao=t=>[0,1].map((e=>Math.max(...t.map((t=>{const n=t[e];return"number"==typeof n?n:1})))));function co(t){let{adType:e,page:n}=t;const r=(0,gr.useRef)(null),{network:o,sizes:i}=so[e],s=o.replace(/\/\d+\//,""),a=`stories_${s}`,[c,l]=ao(i),u=(0,gr.useContext)(vr),[d,p]=(0,gr.useState)(!1);(0,gr.useEffect)((()=>{const t=r.current;if(t)return ro({rootElm:t,adTargeting:{necessary:[["isDevelopmentTest",(!u.isProductionEnv).toString()],["pageType","articlePage"],["publisherPlan",u.userPlan]]},network:o,sizes:i,tracking:{pingbackHost:u.pingbackHost,trackingKey:`StoriesPage__${n}__${s}`},onFilled:()=>{p(!0)}})}),[u,n,o,i,s]);const h={aspectRatio:d?void 0:`${c} / ${l}`,backgroundColor:d?void 0:Ir};return(0,_r.jsxs)("div",{className:"AdPlacement",style:h,children:[(0,_r.jsx)("div",{id:a,ref:r}),(0,_r.jsx)(Br,{className:"AdPlacement__title",visualSize:"xs",children:"Advertisement"})]})}function lo(t){let{className:e,...n}=t;return(0,_r.jsx)("div",{...n,className:jr()(e,"StoryContent")})}function uo(t){let{isTeamsAccount:e,onPublicationClicked:n,onPublisherClicked:r,publicationTitle:o,publicationUrl:i,publisherAvatarFallbackUrl:s,publisherAvatarUrl:a,publisherDisplayName:c,publisherUrl:l,shareElement:u,...d}=t;const p=t=>{s?t.target.src=s:t.target.style.display="none"};return(0,_r.jsxs)("div",{...d,className:"PublisherLine",itemProp:"author",children:[(0,_r.jsxs)(lo,{className:"PublisherLine__Content",itemProp:"publisher",itemScope:!0,itemType:"http://schema.org/Organization",children:[(0,_r.jsxs)("div",{className:"PublisherLine__Avatar",itemScope:!0,itemType:"https://schema.org/ImageObject",children:[e&&!l?(0,_r.jsx)("img",{alt:`Publisher avatar for ${c}`,height:"50",itemProp:"contentUrl",onError:p,src:a,width:"50"}):(0,_r.jsx)("a",{"aria-hidden":"true",href:l,itemProp:"url",tabIndex:-1,children:(0,_r.jsx)("img",{alt:"",height:"50",itemProp:"contentUrl",onError:p,src:a,width:"50"})}),(0,_r.jsx)("meta",{content:"160px",itemProp:"width"}),(0,_r.jsx)("meta",{content:"160px",itemProp:"height"})]}),(0,_r.jsxs)(Br,{visualSize:"sm",children:["from"," ",(0,_r.jsx)("a",{href:i,onClick:n,children:(0,_r.jsx)("strong",{children:o})})]}),(0,_r.jsxs)(Br,{visualSize:"sm",children:["by"," ",e&&!l?(0,_r.jsx)("strong",{itemProp:"name",children:c}):(0,_r.jsx)("a",{href:l,onClick:r,children:(0,_r.jsx)("strong",{itemProp:"name",children:c})})]})]}),(0,_r.jsx)("div",{className:"PublisherLine__Share",children:u})]})}function po(t){switch("string"==typeof t?parseInt(t,10):t){case 1:return"xl";case 2:return"lg";case 3:default:return"md";case 4:return"sm";case 5:return"xs";case 6:return"2xs"}}var ho={"product-heading":"ProductHeading__product-heading__wGhnq__0-0-3287","product-heading--2xs":"ProductHeading__product-heading--2xs__8w2vT__0-0-3287","product-heading--xs":"ProductHeading__product-heading--xs__8Y-ve__0-0-3287","product-heading--sm":"ProductHeading__product-heading--sm__eDejl__0-0-3287","product-heading--md":"ProductHeading__product-heading--md__NKYCy__0-0-3287","product-heading--lg":"ProductHeading__product-heading--lg__wmlNY__0-0-3287","product-heading--xl":"ProductHeading__product-heading--xl__MZTnw__0-0-3287","product-heading--medium":"ProductHeading__product-heading--medium__u7JU5__0-0-3287","product-heading--semi-bold":"ProductHeading__product-heading--semi-bold__DSeMn__0-0-3287"};const fo="product-heading",mo=t=>{let{children:e,className:n,level:r=1,visualSize:o=po(r),weight:i,...s}=t;const a=jr()(n,ho[fo],[ho[`${fo}--${o}`],{[ho[`${fo}--${i}`]]:i}]);return gr.createElement(`h${r}`,{...s,className:a},e)};function go(t){let{level:e=2,visualSize:n="sm",...r}=t;return(0,_r.jsx)(mo,{...r,className:"Heading",level:e,visualSize:n})}function yo(t){let{visualSize:e="lg",...n}=t;return(0,_r.jsx)(Br,{...n,className:"Paragraph",visualSize:e})}const _o=720;let bo=function(t){return t[t.mobileMax=767]="mobileMax",t[t.tabletMin=768]="tabletMin",t[t.tabletMax=1023]="tabletMax",t[t.desktopSmallMin=1024]="desktopSmallMin",t[t.desktopSmallMax=1439]="desktopSmallMax",t[t.desktopMediumMin=1440]="desktopMediumMin",t[t.desktopMediumMax=1727]="desktopMediumMax",t[t.desktopLargeMin=1728]="desktopLargeMin",t}({});function vo(t){if(void 0===t)return{};try{const e="string"==typeof t?new URL(t):t;if(!e.protocol.startsWith("http"))return{src:e.toString()};e.searchParams.set("width",_o.toString()),e.searchParams.set("quality","85,50");const n=e.toString();let r=e.toString();for(const t of["2x","3x"])e.searchParams.set("width",""+_o*parseInt(t)),r+=`, ${e.toString()} ${t}`;return{src:n,srcSet:r}}catch(t){return{}}}function wo(t){let{caption:e,credit:n,src:r,...o}=t;const[i,s]=(0,gr.useState)(!1);return(0,_r.jsxs)("figure",{className:"Photo",children:[(0,_r.jsx)("img",{...o,alt:"",className:jr()("Photo__Image",{"Photo__Image--Loaded":i}),loading:"lazy",onLoad:()=>s(!0),ref:t=>{t&&t.complete&&s(!0)},...vo(r)}),(e||n)&&(0,_r.jsxs)("figcaption",{className:"Photo__Caption",children:[e&&(0,_r.jsx)(Br,{visualSize:"xs",children:(0,_r.jsx)("strong",{children:e})}),n&&(0,_r.jsx)(Br,{visualSize:"xs",children:n})]})]})}function xo(t){let{children:e,hideClosingQuote:n,visualSize:r="xl",...o}=t;return(0,_r.jsx)("blockquote",{...o,className:jr()("Quote",{"Quote--hide-closing-quote":!n}),children:(0,_r.jsx)(Br,{className:"Quote__paragraph",visualSize:r,children:e})})}function ko(t){let{level:e=3,visualSize:n="xs",...r}=t;return(0,_r.jsx)(mo,{...r,className:"SubHeading",level:e,visualSize:n})}function So(t){return t.replace(/(\u{00A0}|\u{3000})/gu," ").replace(/\p{Mc}(?=\0)/gu,"$&")}function Eo(t){let{adElement:e,children:n}=t;if(!e)return(0,_r.jsx)(_r.Fragment,{children:n});const r=gr.Children.toArray(n);switch(r.length){case 0:return(0,_r.jsx)(_r.Fragment,{children:r});case 1:case 2:return(0,_r.jsx)(_r.Fragment,{children:[...r,e]});default:const t=[...r.slice(0,2),e,...r.slice(2)];return(0,_r.jsx)(_r.Fragment,{children:t})}}const Co=t=>{let{blocks:e,adElement:n,nextElement:r}=t;return(0,_r.jsxs)(lo,{children:[(0,_r.jsx)(Eo,{adElement:n,children:e.map(((t,e)=>{if("paragraph"in t)return(0,_r.jsx)(yo,{children:So(t.paragraph.text)},`paragraph-${e}`);if("pullQuote"in t)return(0,_r.jsx)(xo,{children:So(t.pullQuote.text)},`quote-${e}`);if("headline"in t)return(0,_r.jsx)(go,{children:So(t.headline.text)},`heading-${e}`);if("byline"in t)return(0,_r.jsx)(yo,{visualSize:"md",children:So(t.byline.text)},`byline-${e}`);if("subhead"in t)return(0,_r.jsx)(ko,{children:So(t.subhead.text)},`subheading-${e}`);if("photo"in t){if(!t.photo.dimensions)throw new Error("unexpected undefined photo.dimensions in block");return(0,gr.createElement)(wo,{...t.photo.dimensions,caption:t.photo.caption&&So(t.photo.caption.text),credit:t.photo.credit&&So(t.photo.credit.text),key:e,src:t.photo.imageUrl})}return null}))}),r]})};function To(t){this.content=t}To.prototype={constructor:To,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return-1==o?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new To(i)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new To(n)},addToStart:function(t,e){return new To([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new To(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(-1==i?o.length:i,0,e,n),new To(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=To.from(t)).size?new To(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=To.from(t)).size?new To(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=To.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},To.from=function(t){if(t instanceof To)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new To(e)};const Ao=To;function Oo(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let t=0;o.text[t]==i.text[t];t++)n++;return n}if(o.content.size||i.content.size){let t=Oo(o.content,i.content,n+1);if(null!=t)return t}n+=o.nodeSize}else n+=o.nodeSize}}function No(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let t=0,e=Math.min(s.text.length,a.text.length);for(;t<e&&s.text[s.text.length-t-1]==a.text[a.text.length-t-1];)t++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let t=No(s.content,a.content,n-1,r-1);if(t)return t}n-=c,r-=c}else n-=c,r-=c}}class Mo{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,n,r=0,o){for(let i=0,s=0;s<e;i++){let a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o||null,i)&&a.content.size){let o=s+1;a.nodesBetween(Math.max(0,t-o),Math.min(a.content.size,e-o),n,r+o)}s=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let o="",i=!0;return this.nodesBetween(t,e,((s,a)=>{let c=s.isText?s.text.slice(Math.max(t,a)-a,e-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&c||s.isTextblock)&&n&&(i?i=!1:o+=n),o+=c}),0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new Mo(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let o=0,i=0;i<e;o++){let s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new Mo(n,r)}cutByIndex(t,e){return t==e?Mo.empty:0==t&&e==this.content.length?this:new Mo(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new Mo(r,o)}addToStart(t){return new Mo([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new Mo(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return Oo(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return No(this,t,e,n)}findIndex(t,e=-1){if(0==t)return Ro(0,t);if(t==this.size)return Ro(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?Ro(n+1,o):Ro(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return Mo.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Mo(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return Mo.empty;let e,n=0;for(let r=0;r<t.length;r++){let o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new Mo(e||t,n)}static from(t){if(!t)return Mo.empty;if(t instanceof Mo)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Mo([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Mo.empty=new Mo([],0);const Do={index:0,offset:0};function Ro(t,e){return Do.index=t,Do.offset=e,Do}function Io(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!Io(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!Io(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class $o{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Io(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);let r=n.create(e.attrs);return n.checkAttrs(r.attrs),r}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return $o.none;if(t instanceof $o)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}$o.none=[];class jo extends Error{}class Lo{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=Bo(this.content,t+this.openStart,e);return n&&new Lo(n,this.openStart,this.openEnd)}removeBetween(t,e){return new Lo(Po(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return Lo.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Lo(Mo.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let r=t.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=t.lastChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.lastChild)r++;return new Lo(t,n,r)}}function Po(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(Po(i.content,e-o-1,n-o-1)))}function Bo(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Bo(s.content,e-i-1,n);return a&&t.replaceChild(o,s.copy(a))}function zo(t,e,n){if(n.openStart>t.depth)throw new jo("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new jo("Inconsistent open depths");return Fo(t,e,n,0)}function Fo(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=Fo(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:o,end:s}=function(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let t=n-1;t>=0;t--)r=e.node(t).copy(Mo.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return Wo(i,Jo(t,o,s,e,r))}{let r=t.parent,o=r.content;return Wo(r,o.cut(0,t.parentOffset).append(n.content).append(o.cut(e.parentOffset)))}}return Wo(i,Ko(t,e,r))}function Ho(t,e){if(!e.type.compatibleContent(t.type))throw new jo("Cannot join "+e.type.name+" onto "+t.type.name)}function Uo(t,e,n){let r=t.node(n);return Ho(r,e.node(n)),r}function qo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Vo(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(qo(t.nodeAfter,r),i++));for(let t=i;t<s;t++)qo(o.child(t),r);e&&e.depth==n&&e.textOffset&&qo(e.nodeBefore,r)}function Wo(t,e){return t.type.checkContent(e),t.copy(e)}function Jo(t,e,n,r,o){let i=t.depth>o&&Uo(t,e,o+1),s=r.depth>o&&Uo(n,r,o+1),a=[];return Vo(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(Ho(i,s),qo(Wo(i,Jo(t,e,n,r,o+1)),a)):(i&&qo(Wo(i,Ko(t,e,o+1)),a),Vo(e,n,o,a),s&&qo(Wo(s,Ko(n,r,o+1)),a)),Vo(r,null,o,a),new Mo(a)}function Ko(t,e,n){let r=[];return Vo(null,t,n,r),t.depth>n&&qo(Wo(Uo(t,e,n+1),Ko(t,e,n+1)),r),Vo(e,null,n,r),new Mo(r)}Lo.empty=new Lo(Mo.empty,0,0);class Go{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)r+=n.child(e).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return $o.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let o=n.marks;for(var i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Zo(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,o=e;for(let e=t;;){let{index:t,offset:i}=e.content.findIndex(o),s=o-i;if(n.push(e,t,r+i),!s)break;if(e=e.child(t),e.isText)break;o=s-1,r+=i+1}return new Go(e,n,o)}static resolveCached(t,e){let n=Qo.get(t);if(n)for(let t=0;t<n.elts.length;t++){let r=n.elts[t];if(r.pos==e)return r}else Qo.set(t,n=new Yo);let r=n.elts[n.i]=Go.resolve(t,e);return n.i=(n.i+1)%Xo,r}}class Yo{constructor(){this.elts=[],this.i=0}}const Xo=12,Qo=new WeakMap;class Zo{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const ti=Object.create(null);class ei{constructor(t,e,n,r=$o.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||Mo.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&Io(this.attrs,e||t.defaultAttrs||ti)&&$o.sameSet(this.marks,n||$o.none)}copy(t=null){return t==this.content?this:new ei(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new ei(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return Lo.empty;let r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new Lo(a,r.depth-i,o.depth-i)}replace(t,e,n){return zo(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return Go.resolveCached(this,t)}resolveNoCache(t){return Go.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),ri(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=Mo.empty,r=0,o=n.childCount){let i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let t=r;t<o;t++)if(!this.type.allowsMarks(n.child(t).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=$o.none;for(let e=0;e<this.marks.length;e++){let n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!$o.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=Mo.fromJSON(t,e.content),o=t.nodeType(e.type).create(e.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}ei.prototype.text=void 0;class ni extends ei{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ri(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new ni(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new ni(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function ri(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class oi{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new ii(t,e);if(null==n.next)return oi.empty;let r=si(n);n.next&&n.err("Unexpected trailing text");let o=function(t){let e=Object.create(null);return function n(r){let o=[];r.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<o.length;t++)o[t][0]==e&&(r=o[t][1]);pi(t,n).forEach((t=>{r||o.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let i=e[r.join(",")]=new oi(r.indexOf(t.length-1)>-1);for(let t=0;t<o.length;t++){let r=o[t][1].sort(di);i.next.push({type:o[t][0],next:e[r.join(",")]||n(r)})}return i}(pi(t,0))}(function(t){let e=[[]];return o(function t(e,i){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(t(n,i))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(i,s),o(t(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return o(t(e.expr,i),s),o(t(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(i)].concat(t(e.expr,i));if("range"==e.type){let s=i;for(let r=0;r<e.min;r++){let r=n();o(t(e.expr,s),r),s=r}if(-1==e.max)o(t(e.expr,s),s);else for(let i=e.min;i<e.max;i++){let i=n();r(s,i),o(t(e.expr,s),i),s=i}return[r(s)]}if("name"==e.type)return[r(i,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=t(e.exprs[r],i);if(r==e.exprs.length-1)return s;o(s,i=n())}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((t=>t.to=e))}}(r));return function(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],o=!t.validEnd,i=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];i.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(s)&&r.push(s)}o&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];return function o(i,s){let a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return Mo.from(s.map((t=>t.createAndFill())));for(let t=0;t<i.next.length;t++){let{type:e,next:n}=i.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=o(n,s.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<o.next.length;t++){let{type:i,next:s}=o.next[t];i.isLeaf||i.hasRequiredAttrs()||i.name in e||r.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),e[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}(this),t.map(((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let n=0;n<e.next.length;n++)r+=(n?", ":"")+e.next[n].type.name+"->"+t.indexOf(e.next[n].next);return r})).join("\n")}}oi.empty=new oi(!0);class ii{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function si(t){let e=[];do{e.push(ai(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function ai(t){let e=[];do{e.push(ci(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function ci(t){let e=function(t){if(t.eat("(")){let e=si(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let t in n){let r=n[t];r.groups.indexOf(e)>-1&&o.push(r)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=ui(t,e)}return e}function li(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function ui(t,e){let n=li(t),r=n;return t.eat(",")&&(r="}"!=t.next?li(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function di(t,e){return e-t}function pi(t,e){let n=[];return function e(r){let o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(let t=0;t<o.length;t++){let{term:r,to:i}=o[t];r||-1!=n.indexOf(i)||e(i)}}(e),n.sort(di)}function hi(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function fi(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(void 0===o){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=e.default}n[r]=o}return n}function mi(t,e,n,r){for(let r in e)if(!(r in t))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let n in t){let r=t[n];r.validate&&r.validate(e[n])}}function gi(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new _i(t,r,e[r]);return n}class yi{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=gi(t,n.attrs),this.defaultAttrs=hi(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==oi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:fi(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ei(this,this.computeAttrs(t),Mo.from(e),$o.setFrom(n))}createChecked(t=null,e,n){return e=Mo.from(e),this.checkContent(e),new ei(this,this.computeAttrs(t),e,$o.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),(e=Mo.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),o=r&&r.fillBefore(Mo.empty,!0);return o?new ei(this,t,e.append(o),$o.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){mi(this.attrs,t,"node",this.name)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:$o.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,r)=>n[t]=new yi(t,e,r)));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let t in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class _i{constructor(t,e,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(t,e,n){let r=n.split("|");return n=>{let o=null===n?"null":typeof n;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}(t,e,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class bi{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=gi(t,r.attrs),this.excluded=null;let o=hi(this.attrs);this.instance=o?new $o(this,o):null}create(t=null){return!t&&this.instance?this.instance:new $o(this,fi(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach(((t,o)=>n[t]=new bi(t,r++,e,o))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){mi(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class vi{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let n in t)e[n]=t[n];e.nodes=Ao.from(t.nodes),e.marks=Ao.from(t.marks||{}),this.nodes=yi.compile(this.spec.nodes,this),this.marks=bi.compile(this.spec.marks,this);let n=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let e=this.nodes[t],r=e.spec.content||"",o=e.spec.marks;if(e.contentMatch=n[r]||(n[r]=oi.parse(r,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==o?null:o?wi(this,o.split(" ")):""!=o&&e.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],n=e.spec.excludes;e.excluded=null==n?[e]:""==n?[]:wi(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof yi))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new ni(n,n.defaultAttrs,t,$o.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return ei.fromJSON(this,t)}markFromJSON(t){return $o.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function wi(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let e in t.marks){let r=t.marks[e];("_"==o||r.spec.group&&r.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class xi{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let n=this.matchedStyles=[];e.forEach((t=>{if(function(t){return null!=t.tag}(t))this.tags.push(t);else if(function(t){return null!=t.style}(t)){let e=/[^=]*/.exec(t.style)[0];n.indexOf(e)<0&&n.push(e),this.styles.push(t)}})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new Ai(this,e,!1);return n.addAll(t,$o.none,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new Ai(this,e,!0);return n.addAll(t,$o.none,e.from,e.to),Lo.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Oi(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],i=r.style;if(!(0!=i.indexOf(t)||r.context&&!n.matchesContext(r.context)||i.length>t.length&&(61!=i.charCodeAt(t.length)||i.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r];if((null==t.priority?50:t.priority)<n)break}e.splice(r,0,t)}for(let e in t.marks){let r=t.marks[e].spec.parseDOM;r&&r.forEach((t=>{n(t=Ni(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))}for(let e in t.nodes){let r=t.nodes[e].spec.parseDOM;r&&r.forEach((t=>{n(t=Ni(t)),t.node||t.ignore||t.mark||(t.node=e)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new xi(t,xi.schemaRules(t)))}}const ki={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Si={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ei={ol:!0,ul:!0};function Ci(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}class Ti{constructor(t,e,n,r,o,i){this.type=t,this.attrs=e,this.marks=n,this.solid=r,this.options=i,this.content=[],this.activeMarks=$o.none,this.match=o||(4&i?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(Mo.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=Mo.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(Mo.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ki.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Ai{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,o=e.topNode,i=Ci(null,e.preserveWhitespace,0)|(n?4:0);r=o?new Ti(o.type,o.attrs,$o.none,!0,e.topMatch||o.type.contentMatch,i):new Ti(n?null:t.schema.topNodeType,null,$o.none,!0,null,i),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){3==t.nodeType?this.addTextNode(t,e):1==t.nodeType&&this.addElement(t,e)}addTextNode(t,e){let n=t.nodeValue,r=this.top;if(2&r.options||r.inlineContext(t)||/[^ \t\r\n\u000c]/.test(n)){if(1&r.options)n=2&r.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let e=r.content[r.content.length-1],o=t.previousSibling;(!e||o&&"BR"==o.nodeName||e.isText&&/[ \t\r\n\u000c]$/.test(e.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),e),this.findInText(t)}else this.findInside(t)}addElement(t,e,n){let r,o=t.nodeName.toLowerCase();Ei.hasOwnProperty(o)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&Ei.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(r=this.parser.matchTag(t,this,n));if(i?i.ignore:Si.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let n,r=this.top,s=this.needsBlock;if(ki.hasOwnProperty(o))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t,e);let a=i&&i.skip?e:this.readStyles(t,e);a&&this.addAll(t,a),n&&this.sync(r),this.needsBlock=s}else{let n=this.readStyles(t,e);n&&this.addElementByRule(t,i,n,!1===i.consuming?r:void 0)}}leafFallback(t,e){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"),e)}ignoreFallback(t,e){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),e)}readStyles(t,e){let n=t.style;if(n&&n.length)for(let t=0;t<this.parser.matchedStyles.length;t++){let r=this.parser.matchedStyles[t],o=n.getPropertyValue(r);if(o)for(let t;;){let n=this.parser.matchStyle(r,o,this,t);if(!n)break;if(n.ignore)return null;if(e=n.clearMark?e.filter((t=>!n.clearMark(t))):e.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1!==n.consuming)break;t=n}}return e}addElementByRule(t,e,n,r){let o,i;if(e.node)if(i=this.parser.schema.nodes[e.node],i.isLeaf)this.insertNode(i.create(e.attrs),n)||this.leafFallback(t,n);else{let t=this.enter(i,e.attrs||null,n,e.preserveWhitespace);t&&(o=!0,n=t)}else{let t=this.parser.schema.marks[e.mark];n=n.concat(t.create(e.attrs))}let s=this.top;if(i&&i.isLeaf)this.findInside(t);else if(r)this.addElement(t,n,r);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t,n)));else{let r=t;"string"==typeof e.contentElement?r=t.querySelector(e.contentElement):"function"==typeof e.contentElement?r=e.contentElement(t):e.contentElement&&(r=e.contentElement),this.findAround(t,r,!0),this.addAll(r,n)}o&&this.sync(s)&&this.open--}addAll(t,e,n,r){let o=n||0;for(let i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i,e);this.findAtPoint(t,o)}findPlace(t,e){let n,r;for(let e=this.open;e>=0;e--){let o=this.nodes[e],i=o.findWrapping(t);if(i&&(!n||n.length>i.length)&&(n=i,r=o,!i.length))break;if(o.solid)break}if(!n)return null;this.sync(r);for(let t=0;t<n.length;t++)e=this.enterInner(n[t],null,e,!1);return e}insertNode(t,e){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&(e=this.enterInner(t,null,e))}let n=this.findPlace(t,e);if(n){this.closeExtra();let e=this.top;e.match&&(e.match=e.match.matchType(t.type));let r=$o.none;for(let o of n.concat(t.marks))(e.type?e.type.allowsMarkType(o.type):Mi(o.type,t.type))&&(r=o.addToSet(r));return e.content.push(t.mark(r)),!0}return!1}enter(t,e,n,r){let o=this.findPlace(t.create(e),n);return o&&(o=this.enterInner(t,e,n,!0,r)),o}enterInner(t,e,n,r=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(t);let s=Ci(t,o,i.options);4&i.options&&0==i.content.length&&(s|=4);let a=$o.none;return n=n.filter((e=>!(i.type?i.type.allowsMarkType(e.type):Mi(e.type,t))||(a=e.addToSet(a),!1))),this.nodes.push(new Ti(t,e,a,r,null,s)),this.open++,n}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=o;s--)if(i(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return i(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function Oi(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ni(t){let e={};for(let n in t)e[n]=t[n];return e}function Mi(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=t=>{i.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:o}=t.edge(n);if(r==e)return!0;if(i.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}class Di{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=Ii(e).createDocumentFragment());let r=n,o=[];return t.forEach((t=>{if(o.length||t.marks.length){let n=0,i=0;for(;n<o.length&&i<t.marks.length;){let e=t.marks[i];if(this.marks[e.type.name]){if(!e.eq(o[n][0])||!1===e.type.spec.spanning)break;n++,i++}else i++}for(;n<o.length;)r=o.pop()[1];for(;i<t.marks.length;){let n=t.marks[i++],s=this.serializeMark(n,t.isInline,e);s&&(o.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=ji(Ii(e),this.nodes[t.type.name](t),null,t.attrs);if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&ji(Ii(n),r(t,e),null,t.attrs)}static renderSpec(t,e,n=null,r){return ji(t,e,n,r)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Di(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=Ri(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return Ri(t.marks)}}function Ri(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ii(t){return t.document||window.document}const $i=new WeakMap;function ji(t,e,n,r){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let o,i=e[0];if("string"!=typeof i)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=function(t){let e=$i.get(t);return void 0===e&&$i.set(t,e=function(t){let e=null;return function t(n){if(n&&"object"==typeof n)if(Array.isArray(n))if("string"==typeof n[0])e||(e=[]),e.push(n);else for(let e=0;e<n.length;e++)t(n[e]);else for(let e in n)t(n[e])}(t),e}(t)),e}(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=i.indexOf(" ");a>0&&(n=i.slice(0,a),i=i.slice(a+1));let c=n?t.createElementNS(n,i):t.createElement(i),l=e[1],u=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){u=2;for(let t in l)if(null!=l[t]){let e=t.indexOf(" ");e>0?c.setAttributeNS(t.slice(0,e),t.slice(e+1),l[t]):c.setAttribute(t,l[t])}}for(let o=u;o<e.length;o++){let i=e[o];if(0===i){if(o<e.length-1||o>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}{let{dom:e,contentDOM:o}=ji(t,i,n,r);if(c.appendChild(e),o){if(s)throw new RangeError("Multiple content holes");s=o}}}return{dom:c,contentDOM:s}}const Li=Math.pow(2,16);function Pi(t){return 65535&t}class Bi{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class zi{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&zi.empty)return zi.empty}recover(t){let e=0,n=Pi(t);if(!this.inverted)for(let t=0;t<n;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/Li}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;let c=this.ranges[s+o],l=this.ranges[s+i],u=a+c;if(t<=u){let o=a+r+((c?t==a?-1:t==u?1:e:e)<0?0:l);if(n)return o;let i=t==(e<0?a:u)?null:s/3+(t-a)*Li,d=t==a?2:t==u?1:4;return(e<0?t!=a:t!=u)&&(d|=8),new Bi(o,d,i)}r+=l-c}return n?t+r:new Bi(t+r,0,null)}touches(t,e){let n=0,r=Pi(e),o=this.inverted?2:1,i=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?n:0);if(s>t)break;let a=this.ranges[e+o];if(t<=s+a&&e==3*r)return!0;n+=this.ranges[e+i]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}}invert(){return new zi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?zi.empty:new zi(t<0?[0,-t,0]:[0,0,t])}}zi.empty=new zi([]);class Fi{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new Fi(this.maps,this.mirror,t,e)}copy(){return new Fi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new Fi;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let n=this.from;n<this.to;n++){let o=this.maps[n].mapResult(t,e);if(null!=o.recover){let e=this.getMirror(n);if(null!=e&&e>n&&e<this.to){n=e,t=this.maps[e].recover(o.recover);continue}}r|=o.delInfo,t=o.pos}return n?t:new Bi(t,r,null)}}const Hi=Object.create(null);class Ui{getMap(){return zi.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Hi[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in Hi)throw new RangeError("Duplicate use of step JSON ID "+t);return Hi[t]=e,e.prototype.jsonID=t,e}}class qi{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new qi(t,null)}static fail(t){return new qi(null,t)}static fromReplace(t,e,n,r){try{return qi.ok(t.replace(e,n,r))}catch(t){if(t instanceof jo)return qi.fail(t.message);throw t}}}function Vi(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(Vi(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return Mo.fromArray(r)}class Wi extends Ui{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new Lo(Vi(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),r),e.openStart,e.openEnd);return qi.fromReplace(t,this.from,this.to,o)}invert(){return new Ji(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Wi(e.pos,n.pos,this.mark)}merge(t){return t instanceof Wi&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Wi(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Wi(e.from,e.to,t.markFromJSON(e.mark))}}Ui.jsonID("addMark",Wi);class Ji extends Ui{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new Lo(Vi(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return qi.fromReplace(t,this.from,this.to,n)}invert(){return new Wi(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Ji(e.pos,n.pos,this.mark)}merge(t){return t instanceof Ji&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ji(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ji(e.from,e.to,t.markFromJSON(e.mark))}}Ui.jsonID("removeMark",Ji);class Ki extends Ui{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return qi.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return qi.fromReplace(t,this.pos,this.pos+1,new Lo(Mo.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new Ki(this.pos,e.marks[n]);return new Ki(this.pos,this.mark)}}return new Gi(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Ki(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ki(e.pos,t.markFromJSON(e.mark))}}Ui.jsonID("addNodeMark",Ki);class Gi extends Ui{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return qi.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return qi.fromReplace(t,this.pos,this.pos+1,new Lo(Mo.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Ki(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Gi(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Gi(e.pos,t.markFromJSON(e.mark))}}Ui.jsonID("removeNodeMark",Gi);class Yi extends Ui{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&Qi(t,this.from,this.to)?qi.fail("Structure replace would overwrite content"):qi.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new zi([this.from,this.to-this.from,this.slice.size])}invert(t){return new Yi(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new Yi(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof Yi)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?Lo.empty:new Lo(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Yi(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?Lo.empty:new Lo(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Yi(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Yi(e.from,e.to,Lo.fromJSON(t,e.slice),!!e.structure)}}Ui.jsonID("replace",Yi);class Xi extends Ui{constructor(t,e,n,r,o,i,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=s}apply(t){if(this.structure&&(Qi(t,this.from,this.gapFrom)||Qi(t,this.gapTo,this.to)))return qi.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return qi.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?qi.fromReplace(t,this.from,this.to,n):qi.fail("Content does not fit in gap")}getMap(){return new zi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new Xi(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||o>n.pos?null:new Xi(e.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Xi(e.from,e.to,e.gapFrom,e.gapTo,Lo.fromJSON(t,e.slice),e.insert,!!e.structure)}}function Qi(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let t=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,o--}}return!1}function Zi(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let e=0;e<i.childCount;e++){let c=i.child(e),l=a+c.nodeSize,u=r.matchType(c.type);if(u){r=u;for(let e=0;e<c.marks.length;e++)n.allowsMarkType(c.marks[e].type)||t.step(new Ji(a,l,c.marks[e]));if(o&&c.isText&&"pre"!=n.whitespace){let t,e,r=/\r?\n|\r/g;for(;t=r.exec(c.text);)e||(e=new Lo(Mo.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Yi(a+t.index,a+t.index+t[0].length,e))}}else s.push(new Yi(a,l,Lo.empty));a=l}if(!r.validEnd){let e=r.fillBefore(Mo.empty,!0);t.replace(a,a,new Lo(e,0,0))}for(let e=s.length-1;e>=0;e--)t.step(s[e])}function ts(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function es(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!ts(r,o,i))break}return null}function ns(t,e,n=null,r=t){let o=function(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let t=r;a&&t<o;t++)a=a.matchType(n.child(t).type);return a&&a.validEnd?s:null}(r,e);return i?o.map(rs).concat({type:e,attrs:n}).concat(i.map(rs)):null}function rs(t){return{type:t,attrs:null}}function is(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let t=o.depth-1,e=n-2;t>i;t--,e--){let n=o.node(t),i=o.index(t);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(i,n.childCount),a=r&&r[e+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let c=r&&r[e]||n;if(!n.canReplace(i+1,n.childCount)||!c.type.validContent(s))return!1}let a=o.indexAfter(i),c=r&&r[0];return o.node(i).canReplaceWith(a,a,c?c.type:o.node(i+1).type)}function ss(t,e){let n=t.resolve(e),r=n.index();return as(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function as(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function cs(t,e,n=-1){let r=t.resolve(e);for(let t=r.depth;;t--){let o,i,s=r.index(t);if(t==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(t+1),s++,i=r.node(t).maybeChild(s)):(o=r.node(t).maybeChild(s-1),i=r.node(t+1)),o&&!o.isTextblock&&as(o,i)&&r.node(t).canReplace(s,s+1))return e;if(0==t)break;e=n<0?r.before(t):r.after(t)}}function ls(t,e,n=e,r=Lo.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return us(o,i,r)?new Yi(e,n,r):new ds(o,i,r).fit()}function us(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Ui.jsonID("replaceAround",Xi);class ds{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=Mo.empty;for(let e=0;e<=t.depth;e++){let n=t.node(e);this.frontier.push({type:n.type,match:n.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=Mo.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(t<0?this.$to:n.doc.resolve(t));if(!r)return null;let o=this.placed,i=n.depth,s=r.depth;for(;i&&s&&1==o.childCount;)o=o.firstChild.content,i--,s--;let a=new Lo(o,i,s);return t>-1?new Xi(n.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||n.pos!=this.$to.pos?new Yi(n.pos,r.pos,a):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let o=e.firstChild;if(e.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){t=n;break}e=o.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,r=null;n?(r=fs(this.unplaced.content,n-1).firstChild,t=r.content):t=this.unplaced.content;let o=t.firstChild;for(let t=this.depth;t>=0;t--){let i,{type:s,match:a}=this.frontier[t],c=null;if(1==e&&(o?a.matchType(o.type)||(c=a.fillBefore(Mo.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:t,parent:r,inject:c};if(2==e&&o&&(i=a.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:t,parent:r,wrap:i};if(r&&a.matchType(r.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,r=fs(t,e);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new Lo(t,e+1,Math.max(n,r.size+e>=t.size-n?e+1:0)),0))}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,r=fs(t,e);if(r.childCount<=1&&e>0){let o=t.size-e<=e+r.size;this.unplaced=new Lo(ps(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new Lo(ps(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:r,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let t=0;t<o.length;t++)this.openFrontierNode(o[t]);let i=this.unplaced,s=n?n.content:i.content,a=i.openStart-t,c=0,l=[],{match:u,type:d}=this.frontier[e];if(r){for(let t=0;t<r.childCount;t++)l.push(r.child(t));u=u.matchFragment(r)}let p=s.size+t-(i.content.size-i.openEnd);for(;c<s.childCount;){let t=s.child(c),e=u.matchType(t.type);if(!e)break;c++,(c>1||0==a||t.content.size)&&(u=e,l.push(ms(t.mark(d.allowedMarks(t.marks)),1==c?a:0,c==s.childCount?p:-1)))}let h=c==s.childCount;h||(p=-1),this.placed=hs(this.placed,e,Mo.from(l)),this.frontier[e].match=u,h&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=s;t<p;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=h?0==t?Lo.empty:new Lo(ps(i.content,t-1,1),t-1,p<0?i.openEnd:t-1):new Lo(ps(i.content,t,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!gs(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),i=gs(t,e,r,n,o);if(i){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],o=gs(t,n,r,e,!0);if(!o||o.childCount)continue t}return{depth:e,fit:i,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=hs(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=hs(this.placed,this.depth,Mo.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Mo.empty,!0);t.childCount&&(this.placed=hs(this.placed,this.frontier.length,t))}}function ps(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ps(t.firstChild.content,e-1,n)))}function hs(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(hs(t.lastChild.content,e-1,n)))}function fs(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function ms(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,ms(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Mo.empty,!0)))),t.copy(r)}function gs(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function ys(t,e,n,r,o){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(ys(o.content,e+1,n,r,o)))}if(e>r){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(Mo.empty,!0))}return t}function _s(t,e){let n=[];for(let r=Math.min(t.depth,e.depth);r>=0;r--){let o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}class bs extends Ui{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return qi.fail("No node at attribute step's position");let n=Object.create(null);for(let t in e.attrs)n[t]=e.attrs[t];n[this.attr]=this.value;let r=e.type.create(n,null,e.marks);return qi.fromReplace(t,this.pos,this.pos+1,new Lo(Mo.from(r),0,e.isLeaf?0:1))}getMap(){return zi.empty}invert(t){return new bs(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new bs(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new bs(e.pos,e.attr,e.value)}}Ui.jsonID("attr",bs);class vs extends Ui{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let n in t.attrs)e[n]=t.attrs[n];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return qi.ok(n)}getMap(){return zi.empty}invert(t){return new vs(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new vs(e.attr,e.value)}}Ui.jsonID("docAttr",vs);let ws=class extends Error{};ws=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},(ws.prototype=Object.create(Error.prototype)).constructor=ws,ws.prototype.name="TransformError";class xs{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Fi}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new ws(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=Lo.empty){let r=ls(this.doc,t,e,n);return r&&this.step(r),this}replaceWith(t,e,n){return this.replace(t,e,new Lo(Mo.from(n),0,0))}delete(t,e){return this.replace(t,e,Lo.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return function(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(us(o,i,r))return t.step(new Yi(e,n,r));let s=_s(o,t.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let t=o.depth,e=o.pos-1;t>0;t--,e--){let n=o.node(t).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(t)>-1?a=t:o.before(t)==e&&s.splice(1,0,-t)}let c=s.indexOf(a),l=[],u=r.openStart;for(let t=r.content,e=0;;e++){let n=t.firstChild;if(l.push(n),e==r.openStart)break;t=n.content}for(let t=u-1;t>=0;t--){let e=l[t],n=(d=e.type).spec.defining||d.spec.definingForContent;if(n&&!e.sameMarkup(o.node(Math.abs(a)-1)))u=t;else if(n||!e.type.isTextblock)break}var d;for(let e=r.openStart;e>=0;e--){let a=(e+u+1)%(r.openStart+1),d=l[a];if(d)for(let e=0;e<s.length;e++){let l=s[(e+c)%s.length],u=!0;l<0&&(u=!1,l=-l);let p=o.node(l-1),h=o.index(l-1);if(p.canReplaceWith(h,h,d.type,d.marks))return t.replace(o.before(l),u?i.after(l):n,new Lo(ys(r.content,0,r.openStart,a),a,r.openEnd))}}let p=t.steps.length;for(let a=s.length-1;a>=0&&(t.replace(e,n,r),!(t.steps.length>p));a--){let t=s[a];t<0||(e=o.before(t),n=i.after(t))}}(this,t,e,n),this}replaceRangeWith(t,e,n){return function(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=function(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let t=r.depth-1;t>=0;t--){let e=r.index(t);if(r.node(t).canReplaceWith(e,e,n))return r.before(t+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let t=r.depth-1;t>=0;t--){let e=r.indexAfter(t);if(r.node(t).canReplaceWith(e,e,n))return r.after(t+1);if(e<r.node(t).childCount)return null}return null}(t.doc,e,r.type);null!=o&&(e=n=o)}t.replaceRange(e,n,new Lo(Mo.from(r),0,0))}(this,t,e,n),this}deleteRange(t,e){return function(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=_s(r,o);for(let e=0;e<i.length;e++){let n=i[e],s=e==i.length-1;if(s&&0==n||r.node(n).type.contentMatch.validEnd)return t.delete(r.start(n),o.end(n));if(n>0&&(s||r.node(n-1).canReplace(r.index(n-1),o.indexAfter(n-1))))return t.delete(r.before(n),o.after(n))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i)return t.delete(r.before(i),n);t.delete(e,n)}(this,t,e),this}lift(t,e){return function(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),c=s,l=a,u=Mo.empty,d=0;for(let t=i,e=!1;t>n;t--)e||r.index(t)>0?(e=!0,u=Mo.from(r.node(t).copy(u)),d++):c--;let p=Mo.empty,h=0;for(let t=i,e=!1;t>n;t--)e||o.after(t+1)<o.end(t)?(e=!0,p=Mo.from(o.node(t).copy(p)),h++):l++;t.step(new Xi(c,l,s,a,new Lo(u.append(p),d,h),u.size-d,!0))}(this,t,e),this}join(t,e=1){return function(t,e,n){let r=new Yi(e-n,e+n,Lo.empty,!0);t.step(r)}(this,t,e),this}wrap(t,e){return function(t,e,n){let r=Mo.empty;for(let t=n.length-1;t>=0;t--){if(r.size){let e=n[t].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Mo.from(n[t].type.create(n[t].attrs,r))}let o=e.start,i=e.end;t.step(new Xi(o,i,o,i,new Lo(r,0,0),n.length,!0))}(this,t,e),this}setBlockType(t,e=t,n,r=null){return function(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{let s="function"==typeof o?o(e):o;if(e.isTextblock&&!e.hasMarkup(r,s)&&function(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(t.doc,t.mapping.slice(i).map(n),r)){let o=null;if(r.schema.linebreakReplacement){let t="pre"==r.whitespace,e=!!r.contentMatch.matchType(r.schema.linebreakReplacement);t&&!e?o=!1:!t&&e&&(o=!0)}!1===o&&function(t,e,n,r){e.forEach(((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text("\n"))}}))}(t,e,n,i),Zi(t,t.mapping.slice(i).map(n,1),r,void 0,null===o);let a=t.mapping.slice(i),c=a.map(n,1),l=a.map(n+e.nodeSize,1);return t.step(new Xi(c,l,c+1,l-1,new Lo(Mo.from(r.create(s,null,e.marks)),0,0),1,!0)),!0===o&&function(t,e,n,r){e.forEach(((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let o=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(o,o+1,e.type.schema.linebreakReplacement.create())}}}))}(t,e,n,i),!1}}))}(this,t,e,n,r),this}setNodeMarkup(t,e,n=null,r){return function(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Xi(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Lo(Mo.from(s),0,0),1,!0))}(this,t,e,n,r),this}setNodeAttribute(t,e,n){return this.step(new bs(t,e,n)),this}setDocAttribute(t,e){return this.step(new vs(t,e)),this}addNodeMark(t,e){return this.step(new Ki(t,e)),this}removeNodeMark(t,e){if(!(e instanceof $o)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new Gi(t,e)),this}split(t,e=1,n){return function(t,e,n=1,r){let o=t.doc.resolve(e),i=Mo.empty,s=Mo.empty;for(let t=o.depth,e=o.depth-n,a=n-1;t>e;t--,a--){i=Mo.from(o.node(t).copy(i));let e=r&&r[a];s=Mo.from(e?e.type.create(e.attrs,s):o.node(t).copy(s))}t.step(new Yi(e,e,new Lo(i.append(s),n,n),!0))}(this,t,e,n),this}addMark(t,e,n){return function(t,e,n,r){let o,i,s=[],a=[];t.doc.nodesBetween(e,n,((t,c,l)=>{if(!t.isInline)return;let u=t.marks;if(!r.isInSet(u)&&l.type.allowsMarkType(r.type)){let l=Math.max(c,e),d=Math.min(c+t.nodeSize,n),p=r.addToSet(u);for(let t=0;t<u.length;t++)u[t].isInSet(p)||(o&&o.to==l&&o.mark.eq(u[t])?o.to=d:s.push(o=new Ji(l,d,u[t])));i&&i.to==l?i.to=d:a.push(i=new Wi(l,d,r))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}(this,t,e,n),this}removeMark(t,e,n){return function(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,((t,s)=>{if(!t.isInline)return;i++;let a=null;if(r instanceof bi){let e,n=t.marks;for(;e=r.isInSet(n);)(a||(a=[])).push(e),n=e.removeFromSet(n)}else r?r.isInSet(t.marks)&&(a=[r]):a=t.marks;if(a&&a.length){let r=Math.min(s+t.nodeSize,n);for(let t=0;t<a.length;t++){let n,c=a[t];for(let t=0;t<o.length;t++){let e=o[t];e.step==i-1&&c.eq(o[t].style)&&(n=e)}n?(n.to=r,n.step=i):o.push({style:c,from:Math.max(s,e),to:r,step:i})}}})),o.forEach((e=>t.step(new Ji(e.from,e.to,e.style))))}(this,t,e,n),this}clearIncompatible(t,e,n){return Zi(this,t,e,n),this}}const ks=Object.create(null);class Ss{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new Es(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=Lo.empty){let n=e.content.lastChild,r=null;for(let t=0;t<e.openEnd;t++)r=n,n=n.lastChild;let o=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:c}=i[s],l=t.mapping.slice(o);t.replaceRange(l.map(a.pos),l.map(c.pos),s?Lo.empty:e),0==s&&$s(t,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],a=t.mapping.slice(n),c=a.map(i.pos),l=a.map(s.pos);o?t.deleteRange(c,l):(t.replaceRangeWith(c,l,e),$s(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new As(t):Is(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let r=t.depth-1;r>=0;r--){let o=e<0?Is(t.node(0),t.node(r),t.before(r+1),t.index(r),e,n):Is(t.node(0),t.node(r),t.after(r+1),t.index(r)+1,e,n);if(o)return o}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new Ds(t.node(0))}static atStart(t){return Is(t,t,0,0,1)||new Ds(t)}static atEnd(t){return Is(t,t,t.content.size,t.childCount,-1)||new Ds(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=ks[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in ks)throw new RangeError("Duplicate use of selection JSON ID "+t);return ks[t]=e,e.prototype.jsonID=t,e}getBookmark(){return As.between(this.$anchor,this.$head).getBookmark()}}Ss.prototype.visible=!0;class Es{constructor(t,e){this.$from=t,this.$to=e}}let Cs=!1;function Ts(t){Cs||t.parent.inlineContent||(Cs=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class As extends Ss{constructor(t,e=t){Ts(t),Ts(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return Ss.near(n);let r=t.resolve(e.map(this.anchor));return new As(r.parent.inlineContent?r:n,n)}replace(t,e=Lo.empty){if(super.replace(t,e),e==Lo.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof As&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Os(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new As(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=Ss.findFrom(e,n,!0)||Ss.findFrom(e,-n,!0);if(!t)return Ss.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r||(t=(Ss.findFrom(t,-n,!0)||Ss.findFrom(t,n,!0)).$anchor).pos<e.pos!=r<0)&&(t=e),new As(t,e)}}Ss.jsonID("text",As);class Os{constructor(t,e){this.anchor=t,this.head=e}map(t){return new Os(t.map(this.anchor),t.map(this.head))}resolve(t){return As.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ns extends Ss{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),o=t.resolve(r);return n?Ss.near(o):new Ns(o)}content(){return new Lo(Mo.from(this.node),0,0)}eq(t){return t instanceof Ns&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ms(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ns(t.resolve(e.anchor))}static create(t,e){return new Ns(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}Ns.prototype.visible=!1,Ss.jsonID("node",Ns);class Ms{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new Os(n,n):new Ms(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Ns.isSelectable(n)?new Ns(e):Ss.near(e)}}class Ds extends Ss{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=Lo.empty){if(e==Lo.empty){t.delete(0,t.doc.content.size);let e=Ss.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new Ds(t)}map(t){return new Ds(t)}eq(t){return t instanceof Ds}getBookmark(){return Rs}}Ss.jsonID("all",Ds);const Rs={map(){return this},resolve:t=>new Ds(t)};function Is(t,e,n,r,o,i=!1){if(e.inlineContent)return As.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let r=e.child(s);if(r.isAtom){if(!i&&Ns.isSelectable(r))return Ns.create(t,n-(o<0?r.nodeSize:0))}else{let e=Is(t,r,n+o,o<0?r.childCount:0,o,i);if(e)return e}n+=r.nodeSize*o}return null}function $s(t,e,n){let r=t.steps.length-1;if(r<e)return;let o,i=t.steps[r];(i instanceof Yi||i instanceof Xi)&&(t.mapping.maps[r].forEach(((t,e,n,r)=>{null==o&&(o=r)})),t.setSelection(Ss.near(t.doc.resolve(o),n)))}function js(t,e){return e&&t?t.bind(e):t}class Ls{constructor(t,e,n){this.name=t,this.init=js(e.init,n),this.apply=js(e.apply,n)}}function Ps(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=Ps(o,e,{})),n[r]=o}return n}new Ls("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new Ls("selection",{init:(t,e)=>t.selection||Ss.atStart(e.doc),apply:t=>t.selection}),new Ls("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,n,r)=>r.selection.$cursor?t.storedMarks:null}),new Ls("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e});class Bs{constructor(t){this.spec=t,this.props={},t.props&&Ps(t.props,this,this.props),this.key=t.key?t.key.key:Fs("plugin")}getState(t){return t[this.key]}}const zs=Object.create(null);function Fs(t){return t in zs?t+"$"+ ++zs[t]:(zs[t]=0,t+"$")}class Hs{constructor(t="key"){this.key=Fs(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Us=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},qs=function(t,e,n,r){return n&&(Ws(t,e,n,r,-1)||Ws(t,e,n,r,1))},Vs=/^(img|br|input|textarea|hr)$/i;function Ws(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Js(t))){let n=t.parentNode;if(!n||1!=n.nodeType||Ks(t)||Vs.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Us(t)+(o<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?Js(t):0}}}function Js(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Ks(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Gs=function(t){return t.focusNode&&qs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ys(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}const Xs="undefined"!=typeof navigator?navigator:null,Qs="undefined"!=typeof document?document:null,Zs=Xs&&Xs.userAgent||"",ta=/Edge\/(\d+)/.exec(Zs),ea=/MSIE \d/.exec(Zs),na=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zs),ra=!!(ea||na||ta),oa=ea?document.documentMode:na?+na[1]:ta?+ta[1]:0,ia=!ra&&/gecko\/(\d+)/i.test(Zs);ia&&(/Firefox\/(\d+)/.exec(Zs)||[0,0])[1];const sa=!ra&&/Chrome\/(\d+)/.exec(Zs),aa=!!sa,ca=sa?+sa[1]:0,la=!ra&&!!Xs&&/Apple Computer/.test(Xs.vendor),ua=la&&(/Mobile\/\w+/.test(Zs)||!!Xs&&Xs.maxTouchPoints>2),da=ua||!!Xs&&/Mac/.test(Xs.platform),pa=!!Xs&&/Win/.test(Xs.platform),ha=/Android \d/.test(Zs),fa=!!Qs&&"webkitFontSmoothing"in Qs.documentElement.style,ma=fa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,ga=function(t){t&&(this.nodeName=t)};function ya(t){return t.editable?t.hasFocus():function(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _a(t,e=!1){let n=t.state.selection;if(function(t,e){if(e instanceof Ns){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ka(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ka(t)}(t,n),ya(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&aa){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&qs(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,Us(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&ra&&oa<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{let r,o,{anchor:i,head:s}=n;!ba||n instanceof As||(n.$from.parent.inlineContent||(r=va(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=va(t,n.to))),t.docView.setSelection(i,s,t.root,e),ba&&(r&&xa(r),o&&xa(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{ya(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}ga.prototype=Object.create(null),new ga;const ba=la||aa&&ca<63;function va(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(la&&o&&"false"==o.contentEditable)return wa(o);if(!(o&&"false"!=o.contentEditable||i&&"false"!=i.contentEditable)){if(o)return wa(o);if(i)return wa(i)}}function wa(t){return t.contentEditable="true",la&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function xa(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ka(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Sa(t,e,n,r){return t.someProp("createSelectionBetween",(r=>r(t,e,n)))||As.between(e,n,r)}function Ea(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Ss.findFrom(i,e)}function Ca(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ta(t,e,n){let r=t.state.selection;if(!(r instanceof As)){if(r instanceof Ns&&r.node.isInline)return Ca(t,new As(e>0?r.$to:r.$from));{let n=Ea(t.state,e);return!!n&&Ca(t,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,o=n.textOffset?null:e<0?n.nodeBefore:n.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=t.state.doc.resolve(n.pos+o.nodeSize*(e<0?-1:1));return Ca(t,new As(r.$anchor,i))}if(!r.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let n=Ea(t.state,e);return!!(n&&n instanceof Ns)&&Ca(t,n)}if(!(da&&n.indexOf("m")>-1)){let n,o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;let s=e<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(n=t.docView.descAt(s))&&!n.contentDOM)&&(Ns.isSelectable(i)?Ca(t,new Ns(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):!!fa&&Ca(t,new As(t.state.doc.resolve(e<0?s:s+i.nodeSize))))}}function Aa(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Oa(t,e){let n=t.pmViewDesc;return n&&0==n.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function Na(t,e){return e<0?function(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(ia&&1==n.nodeType&&r<Aa(n)&&Oa(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;{let t=n.childNodes[r-1];if(Oa(t,-1))o=n,i=--r;else{if(3!=t.nodeType)break;n=t,r=n.nodeValue.length}}}else{if(Ma(n))break;{let e=n.previousSibling;for(;e&&Oa(e,-1);)o=n.parentNode,i=Us(e),e=e.previousSibling;if(e)n=e,r=Aa(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Da(t,n,r):o&&Da(t,o,i)}(t):function(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=Aa(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!Oa(n.childNodes[r],1))break;o=n,i=++r}else{if(Ma(n))break;{let e=n.nextSibling;for(;e&&Oa(e,1);)o=e.parentNode,i=Us(e)+1,e=e.nextSibling;if(e)n=e,r=0,s=Aa(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}o&&Da(t,o,i)}(t)}function Ma(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Da(t,e,n){if(3!=e.nodeType){let t,r;(r=function(t,e){for(;t&&e==t.childNodes.length&&!Ks(t);)e=Us(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=0}}(e,n))?(e=r,n=0):(t=function(t,e){for(;t&&!e&&!Ks(t);)e=Us(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=(t=n).childNodes.length}}(e,n))&&(e=t,n=t.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Gs(r)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),r.removeAllRanges(),r.addRange(t)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout((()=>{t.state==o&&_a(t)}),50)}function Ra(t,e){let n=t.state.doc.resolve(e);if(!aa&&!pa&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let n=t.coordsAtPos(e-1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(e<n.end()){let n=t.coordsAtPos(e+1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(t.dom).direction?"rtl":"ltr"}function Ia(t,e,n){let r=t.state.selection;if(r instanceof As&&!r.empty||n.indexOf("s")>-1)return!1;if(da&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=Ea(t.state,e);if(n&&n instanceof Ns)return Ca(t,n)}if(!o.parent.inlineContent){let n=e<0?o:i,s=r instanceof Ds?Ss.near(n,e):Ss.findFrom(n,e);return!!s&&Ca(t,s)}return!1}function $a(t,e){if(!(t.state.selection instanceof As))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=t.state.tr;return e<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),t.dispatch(r),!0}return!1}function ja(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function La(t,e){t.someProp("transformCopied",(n=>{e=n(e,t)}));let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;let t=r.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),r=t.content}let s=t.someProp("clipboardSerializer")||Di.fromSchema(t.state.schema),a=Ja(),c=a.createElement("div");c.appendChild(s.serializeFragment(r,{document:a}));let l,u=c.firstChild,d=0;for(;u&&1==u.nodeType&&(l=Va[u.nodeName.toLowerCase()]);){for(let t=l.length-1;t>=0;t--){let e=a.createElement(l[t]);for(;c.firstChild;)e.appendChild(c.firstChild);c.appendChild(e),d++}u=c.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:c,text:t.someProp("clipboardTextSerializer",(n=>n(e,t)))||e.content.textBetween(0,e.content.size,"\n\n"),slice:e}}function Pa(t,e,n,r,o){let i,s,a=o.parent.type.spec.code;if(!n&&!e)return null;let c=e&&(r||a||!n);if(c){if(t.someProp("transformPastedText",(n=>{e=n(e,a||r,t)})),a)return e?new Lo(Mo.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):Lo.empty;let n=t.someProp("clipboardTextParser",(n=>n(e,o,r,t)));if(n)s=n;else{let n=o.marks(),{schema:r}=t.state,s=Di.fromSchema(r);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=i.appendChild(document.createElement("p"));t&&e.appendChild(s.serializeNode(r.text(t,n)))}))}}else t.someProp("transformPastedHTML",(e=>{n=e(n,t)})),i=function(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,r=Ja().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(t);if((n=o&&Va[o[1].toLowerCase()])&&(t=n.map((t=>"<"+t+">")).join("")+t+n.map((t=>"</"+t+">")).reverse().join("")),r.innerHTML=t,n)for(let t=0;t<n.length;t++)r=r.querySelector(n[t])||r;return r}(n),fa&&function(t){let e=t.querySelectorAll(aa?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}(i);let l=i&&i.querySelector("[data-pm-slice]"),u=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let t=+u[3];t>0;t--){let t=i.firstChild;for(;t&&1!=t.nodeType;)t=t.nextSibling;if(!t)break;i=t}if(!s){let e=t.someProp("clipboardParser")||t.someProp("domParser")||xi.fromSchema(t.state.schema);s=e.parseSlice(i,{preserveWhitespace:!(!c&&!u),context:o,ruleFromNode:t=>"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Ba.test(t.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(t,e){if(!t.size)return t;let n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}let{content:o,openStart:i,openEnd:s}=t;for(let t=n.length-2;t>=0;t-=2){let e=r.nodes[n[t]];if(!e||e.hasRequiredAttrs())break;o=Mo.from(e.create(n[t+1],o)),i++,s++}return new Lo(o,i,s)}(qa(s,+u[1],+u[2]),u[4]);else if(s=Lo.maxOpen(function(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r,o=e.node(n).contentMatchAt(e.index(n)),i=[];if(t.forEach((t=>{if(!i)return;let e,n=o.findWrapping(t.type);if(!n)return i=null;if(e=i.length&&r.length&&Fa(n,r,t,i[i.length-1],0))i[i.length-1]=e;else{i.length&&(i[i.length-1]=Ha(i[i.length-1],r.length));let e=za(t,n);i.push(e),o=o.matchType(e.type),r=n}})),i)return Mo.from(i)}return t}(s.content,o),!0),s.openStart||s.openEnd){let t=0,e=0;for(let e=s.content.firstChild;t<s.openStart&&!e.type.spec.isolating;t++,e=e.firstChild);for(let t=s.content.lastChild;e<s.openEnd&&!t.type.spec.isolating;e++,t=t.lastChild);s=qa(s,t,e)}return t.someProp("transformPasted",(e=>{s=e(s,t)})),s}const Ba=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function za(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Mo.from(t));return t}function Fa(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=Fa(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(Mo.from(za(n,t,o+1))))}}function Ha(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Ha(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Mo.empty,!0);return t.copy(n.append(r))}function Ua(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=Ua(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Mo.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function qa(t,e,n){return e<t.openStart&&(t=new Lo(Ua(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Lo(Ua(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Va={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Wa=null;function Ja(){return Wa||(Wa=document.implementation.createHTMLDocument("title"))}const Ka={},Ga={};function Ya(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Xa(t){return{left:t.clientX,top:t.clientY}}function Qa(t,e,n,r,o){if(-1==r)return!1;let i=t.state.doc.resolve(r);for(let r=i.depth+1;r>0;r--)if(t.someProp(e,(e=>r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1))))return!0;return!1}function Za(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function tc(t,e,n,r){return Qa(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(n=>n(t,e,r)))}function ec(t,e,n,r){return Qa(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(n=>n(t,e,r)))||function(t,e,n){if(0!=n.button)return!1;let r=t.state.doc;if(-1==e)return!!r.inlineContent&&(Za(t,As.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(e);for(let e=o.depth+1;e>0;e--){let n=e>o.depth?o.nodeAfter:o.node(e),i=o.before(e);if(n.inlineContent)Za(t,As.create(r,i+1,i+1+n.content.size),"pointer");else{if(!Ns.isSelectable(n))continue;Za(t,Ns.create(r,i),"pointer")}return!0}}(t,n,r)}function nc(t){return cc(t)}Ga.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!ic(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!ha||!aa||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!ua||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(e=>e(t,n)))||function(t,e){let n=e.keyCode,r=function(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);if(8==n||da&&72==n&&"c"==r)return $a(t,-1)||Na(t,-1);if(46==n&&!e.shiftKey||da&&68==n&&"c"==r)return $a(t,1)||Na(t,1);if(13==n||27==n)return!0;if(37==n||da&&66==n&&"c"==r){let e=37==n?"ltr"==Ra(t,t.state.selection.from)?-1:1:-1;return Ta(t,e,r)||Na(t,e)}if(39==n||da&&70==n&&"c"==r){let e=39==n?"ltr"==Ra(t,t.state.selection.from)?1:-1:1;return Ta(t,e,r)||Na(t,e)}return 38==n||da&&80==n&&"c"==r?Ia(t,-1,r)||Na(t,-1):40==n||da&&78==n&&"c"==r?function(t){if(!la||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;ja(t,n,"true"),setTimeout((()=>ja(t,n,"false")),20)}return!1}(t)||Ia(t,1,r)||Na(t,1):r==(da?"m":"c")&&(66==n||73==n||89==n||90==n)}(t,n)?n.preventDefault():Ya(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,Ys(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},Ga.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Ga.keypress=(t,e)=>{let n=e;if(ic(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||da&&n.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,n))))return void n.preventDefault();let r=t.state.selection;if(!(r instanceof As&&r.$from.sameParent(r.$to))){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",(n=>n(t,r.$from.pos,r.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const rc=da?"metaKey":"ctrlKey";Ka.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=nc(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&function(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(n,t.input.lastClick)&&!n[rc]&&("singleClick"==t.input.lastClick.type?i="doubleClick":"doubleClick"==t.input.lastClick.type&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=t.posAtCoords(Xa(n));s&&("singleClick"==i?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new oc(t,s,n,!!r)):("doubleClick"==i?tc:ec)(t,s.pos,s.inside,n)?n.preventDefault():Ya(t,"pointer"))};class oc{constructor(t,e,n,r){let o,i;if(this.view=t,this.pos=e,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[rc],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),i=e.inside;else{let n=t.state.doc.resolve(e.pos);o=n.parent,i=n.depth?n.before():0}const s=r?null:n.target,a=s?t.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:c}=t.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof Ns&&c.from<=i&&c.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!ia||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ya(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>_a(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Xa(t))),this.updateAllowDefault(t),this.allowDefault||!e?Ya(this.view,"pointer"):function(t,e,n,r,o){return Qa(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(n=>n(t,e,r)))||(o?function(t,e){if(-1==e)return!1;let n,r,o=t.state.selection;o instanceof Ns&&(n=o.node);let i=t.state.doc.resolve(e);for(let t=i.depth+1;t>0;t--){let e=t>i.depth?i.nodeAfter:i.node(t);if(Ns.isSelectable(e)){r=n&&o.$from.depth>0&&t>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(t);break}}return null!=r&&(Za(t,Ns.create(t.state.doc,r),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&Ns.isSelectable(r))&&(Za(t,new Ns(n),"pointer"),!0)}(t,n))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||la&&this.mightDrag&&!this.mightDrag.node.isAtom||aa&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Za(this.view,Ss.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Ya(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ya(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function ic(t,e){return!!t.composing||!!(la&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Ka.touchstart=t=>{t.input.lastTouch=Date.now(),nc(t),Ya(t,"pointer")},Ka.touchmove=t=>{t.input.lastTouch=Date.now(),Ya(t,"pointer")},Ka.contextmenu=t=>nc(t);const sc=ha?5e3:-1;function ac(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>cc(t)),e))}function cc(t,e=!1){if(!(ha&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),function(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}(t),e||t.docView&&t.docView.dirty){let n=function(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,c,l=r.resolve(s);if(Gs(n)){for(a=l;o&&!o.node;)o=o.parent;let t=o.node;if(o&&t.isAtom&&Ns.isSelectable(t)&&o.parent&&(!t.isInline||!function(t,e,n){for(let r=0==e,o=e==Js(t);r||o;){if(t==n)return!0;let e=Us(t);if(!(t=t.parentNode))return!1;r=r&&0==e,o=o&&e==Js(t)}}(n.focusNode,n.focusOffset,o.dom))){let t=o.posBefore;c=new Ns(s==t?l:r.resolve(t))}}else{let e=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(e<0)return null;a=r.resolve(e)}return c||(c=Sa(t,a,l,"pointer"==e||t.state.selection.head<l.pos&&!i?1:-1)),c}(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):!t.markCursor&&!e||t.state.selection.empty?t.updateState(t.state):t.dispatch(t.state.tr.deleteSelection()),!0}return!1}}Ga.compositionstart=Ga.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof As&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||n.marks(),cc(t,!0),t.markCursor=null;else if(cc(t,!e.selection.empty),ia&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,r=e.focusOffset;n&&1==n.nodeType&&0!=r;){let e=r<0?n.lastChild:n.childNodes[r-1];if(!e)break;if(3==e.nodeType){let n=t.domSelection();n&&n.collapse(e,e.nodeValue.length);break}n=e,r=-1}}t.input.composing=!0}ac(t,sc)},Ga.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then((()=>t.domObserver.flush())),t.input.compositionID++,ac(t,20))};const lc=ra&&oa<15||ua&&ma<604;function uc(t,e,n,r,o){let i=Pa(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,o,i||Lo.empty))))return!0;if(!i)return!1;let s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function dc(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ka.copy=Ga.cut=(t,e)=>{let n=e,r=t.state.selection,o="cut"==n.type;if(r.empty)return;let i=lc?null:n.clipboardData,s=r.content(),{dom:a,text:c}=La(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",c)):function(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Ga.paste=(t,e)=>{let n=e;if(t.composing&&!ha)return;let r=lc?null:n.clipboardData,o=t.input.shiftKey&&45!=t.input.lastKeyCode;r&&uc(t,dc(r),r.getData("text/html"),o,n)?n.preventDefault():function(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout((()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?uc(t,r.value,null,o,e):uc(t,r.textContent,r.innerHTML,o,e)}),50)}(t,n)};class pc{constructor(t,e,n){this.slice=t,this.move=e,this.node=n}}const hc=da?"altKey":"ctrlKey";Ka.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o,i=t.state.selection,s=i.empty?null:t.posAtCoords(Xa(n));if(s&&s.pos>=i.from&&s.pos<=(i instanceof Ns?i.to-1:i.to));else if(r&&r.mightDrag)o=Ns.create(t.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&(o=Ns.create(t.state.doc,e.posBefore))}let a=(o||t.state.selection).content(),{dom:c,text:l,slice:u}=La(t,a);(!n.dataTransfer.files.length||!aa||ca>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(lc?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",lc||n.dataTransfer.setData("text/plain",l),t.dragging=new pc(u,!n[hc],o)},Ka.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},Ga.dragover=Ga.dragenter=(t,e)=>e.preventDefault(),Ga.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Xa(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",(e=>{s=e(s,t)})):s=Pa(t,dc(n.dataTransfer),lc?null:n.dataTransfer.getData("text/html"),!1,i);let a=!(!r||n[hc]);if(t.someProp("handleDrop",(e=>e(t,n,s||Lo.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let c=s?function(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let t=0;t<n.openStart;t++)o=o.firstChild.content;for(let t=1;t<=(0==n.openStart&&n.size?2:1);t++)for(let e=r.depth;e>=0;e--){let n=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,i=r.index(e)+(n>0?1:0),s=r.node(e),a=!1;if(1==t)a=s.canReplace(i,i,o);else{let t=s.contentMatchAt(i).findWrapping(o.firstChild.type);a=t&&s.canReplaceWith(i,i,t[0])}if(a)return 0==n?r.pos:n<0?r.before(e+1):r.after(e+1)}return null}(t.state.doc,i.pos,s):i.pos;null==c&&(c=i.pos);let l=t.state.tr;if(a){let{node:t}=r;t?t.replace(l):l.deleteSelection()}let u=l.mapping.map(c),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=l.doc;if(d?l.replaceRangeWith(u,u,s.content.firstChild):l.replaceRange(u,u,s),l.doc.eq(p))return;let h=l.doc.resolve(u);if(d&&Ns.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))l.setSelection(new Ns(h));else{let e=l.mapping.map(c);l.mapping.maps[l.mapping.maps.length-1].forEach(((t,n,r,o)=>e=o)),l.setSelection(Sa(t,h,l.doc.resolve(e)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))},Ka.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_a(t)}),20))},Ka.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Ka.beforeinput=(t,e)=>{if(aa&&ha&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,Ys(8,"Backspace")))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let t in Ga)Ka[t]=Ga[t];function fc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class mc{constructor(t,e){this.toDOM=t,this.spec=e||vc,this.side=this.spec.side||0}map(t,e,n,r){let{pos:o,deleted:i}=t.mapResult(e.from+r,this.side<0?-1:1);return i?null:new _c(o-n,o-n,this)}valid(){return!0}eq(t){return this==t||t instanceof mc&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&fc(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class gc{constructor(t,e){this.attrs=t,this.spec=e||vc}map(t,e,n,r){let o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new _c(o,i,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof gc&&fc(this.attrs,t.attrs)&&fc(this.spec,t.spec)}static is(t){return t.type instanceof gc}destroy(){}}class yc{constructor(t,e){this.attrs=t,this.spec=e||vc}map(t,e,n,r){let o=t.mapResult(e.from+r,1);if(o.deleted)return null;let i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new _c(o.pos-n,i.pos-n,this)}valid(t,e){let n,{index:r,offset:o}=t.content.findIndex(e.from);return o==e.from&&!(n=t.child(r)).isText&&o+n.nodeSize==e.to}eq(t){return this==t||t instanceof yc&&fc(this.attrs,t.attrs)&&fc(this.spec,t.spec)}destroy(){}}class _c{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new _c(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new _c(t,t,new mc(e,n))}static inline(t,e,n,r){return new _c(t,e,new gc(n,r))}static node(t,e,n,r){return new _c(t,e,new yc(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof gc}get widget(){return this.type instanceof mc}}const bc=[],vc={};class wc{constructor(t,e){this.local=t.length?t:bc,this.children=e.length?e:bc}static create(t,e){return e.length?Tc(e,t,0,vc):xc}find(t,e,n){let r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}findInner(t,e,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<e&&this.children[i+1]>t){let s=this.children[i]+1;this.children[i+2].findInner(t-s,e-s,n,r+s,o)}}map(t,e,n){return this==xc||0==t.maps.length?this:this.mapInner(t,e,0,0,n||vc)}mapInner(t,e,n,r,o){let i;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){let a=t.slice();for(let t=0,e=i;t<n.maps.length;t++){let r=0;n.maps[t].forEach(((t,n,o,i)=>{let s=i-o-(n-t);for(let o=0;o<a.length;o+=3){let i=a[o+1];if(i<0||t>i+e-r)continue;let c=a[o]+e-r;n>=c?a[o+1]=t<=c?-2:-1:t>=e&&s&&(a[o]+=s,a[o+1]+=s)}r+=s})),e=n.maps[t].map(e,-1)}let c=!1;for(let e=0;e<a.length;e+=3)if(a[e+1]<0){if(-2==a[e+1]){c=!0,a[e+1]=-1;continue}let l=n.map(t[e]+i),u=l-o;if(u<0||u>=r.content.size){c=!0;continue}let d=n.map(t[e+1]+i,-1)-o,{index:p,offset:h}=r.content.findIndex(u),f=r.maybeChild(p);if(f&&h==u&&h+f.nodeSize==d){let r=a[e+2].mapInner(n,f,l+1,t[e]+i+1,s);r!=xc?(a[e]=u,a[e+1]=d,a[e+2]=r):(a[e+1]=-2,c=!0)}else c=!0}if(c){let c=function(t,e,n,r,o,i,s){function a(t,e){for(let i=0;i<t.local.length;i++){let a=t.local[i].map(r,o,e);a?n.push(a):s.onRemove&&s.onRemove(t.local[i].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let n=0;n<t.length;n+=3)-1==t[n+1]&&a(t[n+2],e[n]+i+1);return n}(a,t,e,n,o,i,s),l=Tc(c,r,0,s);e=l.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<l.children.length;t+=3){let n=l.children[t];for(;e<a.length&&a[e]<n;)e+=3;a.splice(e,0,l.children[t],l.children[t+1],l.children[t+2])}}return new wc(e.sort(Ac),a)}(this.children,i||[],t,e,n,r,o):i?new wc(i.sort(Ac),bc):xc}add(t,e){return e.length?this==xc?wc.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let r,o=0;t.forEach(((t,i)=>{let s,a=i+n;if(s=Ec(e,t,a)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(t,s,a+1):r.splice(o,0,i,i+t.nodeSize,Tc(s,t,a+1,vc)),o+=3}}));let i=Sc(o?Cc(e):e,-n);for(let e=0;e<i.length;e++)i[e].type.valid(t,i[e])||i.splice(e--,1);return new wc(i.length?this.local.concat(i).sort(Ac):this.local,r||this.children)}remove(t){return 0==t.length||this==xc?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let o,i=n[r]+e,s=n[r+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>i&&e.to<s&&(t[n]=null,(o||(o=[])).push(e));if(!o)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(o,i+1);a!=xc?n[r+2]=a:(n.splice(r,3),r-=3)}if(r.length)for(let n,o=0;o<t.length;o++)if(n=t[o])for(let t=0;t<r.length;t++)r[t].eq(n,e)&&(r==this.local&&(r=this.local.slice()),r.splice(t--,1));return n==this.children&&r==this.local?this:r.length||n.length?new wc(r,n):xc}forChild(t,e){if(this==xc)return this;if(e.isLeaf)return wc.empty;let n,r;for(let e=0;e<this.children.length;e+=3)if(this.children[e]>=t){this.children[e]==t&&(n=this.children[e+2]);break}let o=t+1,i=o+e.content.size;for(let t=0;t<this.local.length;t++){let e=this.local[t];if(e.from<i&&e.to>o&&e.type instanceof gc){let t=Math.max(o,e.from)-o,n=Math.min(i,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let t=new wc(r.sort(Ac),bc);return n?new kc([t,n]):t}return n||xc}eq(t){if(this==t)return!0;if(!(t instanceof wc)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Oc(this.localsInner(t))}localsInner(t){if(this==xc)return bc;if(t.inlineContent||!this.local.some(gc.is))return this.local;let e=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof gc||e.push(this.local[t]);return e}}wc.empty=new wc([],[]),wc.removeOverlap=Oc;const xc=wc.empty;class kc{constructor(t){this.members=t}map(t,e){const n=this.members.map((n=>n.map(t,e,vc)));return kc.from(n)}forChild(t,e){if(e.isLeaf)return wc.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(t,e);o!=xc&&(o instanceof kc?n=n.concat(o.members):n.push(o))}return kc.from(n)}eq(t){if(!(t instanceof kc)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<o.length;t++)e.push(o[t])}else e=o}return e?Oc(n?e:e.sort(Ac)):bc}static from(t){switch(t.length){case 0:return xc;case 1:return t[0];default:return new kc(t.every((t=>t instanceof wc))?t:t.reduce(((t,e)=>t.concat(e instanceof wc?e:e.members)),[]))}}}function Sc(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new _c(o.from+e,o.to+e,o.type))}return n}function Ec(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let e,i=0;i<t.length;i++)(e=t[i])&&e.from>n&&e.to<r&&((o||(o=[])).push(e),t[i]=null);return o}function Cc(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Tc(t,e,n,r){let o=[],i=!1;e.forEach(((e,s)=>{let a=Ec(t,e,s+n);if(a){i=!0;let t=Tc(a,e,n+s+1,r);t!=xc&&o.push(s,s+e.nodeSize,t)}}));let s=Sc(i?Cc(t):t,-n).sort(Ac);for(let t=0;t<s.length;t++)s[t].type.valid(e,s[t])||(r.onRemove&&r.onRemove(s[t].spec),s.splice(t--,1));return s.length||o.length?new wc(s,o):xc}function Ac(t,e){return t.from-e.from||t.to-e.to}function Oc(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Nc(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Nc(e,o+1,i.copy(r.to,i.to)))}}return e}function Nc(t,e,n){for(;e<t.length&&Ac(n,t[e])>0;)e++;t.splice(e,0,n)}new WeakMap;for(var Mc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Dc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Rc="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ic="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),$c=0;$c<10;$c++)Mc[48+$c]=Mc[96+$c]=String($c);for($c=1;$c<=24;$c++)Mc[$c+111]="F"+$c;for($c=65;$c<=90;$c++)Mc[$c]=String.fromCharCode($c+32),Dc[$c]=String.fromCharCode($c);for(var jc in Mc)Dc.hasOwnProperty(jc)||(Dc[jc]=Mc[jc]);const Lc="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Pc(t){let e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let t=0;t<i.length-1;t++){let s=i[t];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);Lc?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Bc(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zc(t){let e=function(t){let e=Object.create(null);for(let n in t)e[Pc(n)]=t[n];return e}(t);return function(t,n){let r,o=function(t){var e=!(Rc&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ic&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?Dc:Mc)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),i=e[Bc(o,n)];if(i&&i(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=e[Bc(o,n,!1)];if(r&&r(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=Mc[n.keyCode])&&r!=o){let o=e[Bc(r,n)];if(o&&o(t.state,t.dispatch,t))return!0}}return!1}}const Fc=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Hc(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Uc=(t,e,n)=>{let r=Hc(t,n);if(!r)return!1;let o=Jc(r);if(!o){let n=r.blockRange(),o=n&&es(n);return null!=o&&(e&&e(t.tr.lift(n,o).scrollIntoView()),!0)}let i=o.nodeBefore;if(ol(t,o,e,-1))return!0;if(0==r.parent.content.size&&(Vc(i,"end")||Ns.isSelectable(i)))for(let n=r.depth;;n--){let s=ls(t.doc,r.before(n),r.after(n),Lo.empty);if(s&&s.slice.size<s.to-s.from){if(e){let n=t.tr.step(s);n.setSelection(Vc(i,"end")?Ss.findFrom(n.doc.resolve(n.mapping.map(o.pos,-1)),-1):Ns.create(n.doc,o.pos-i.nodeSize)),e(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!(!i.isAtom||o.depth!=r.depth-1||(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),0))};function qc(t,e,n){let r=e.nodeBefore,o=e.pos-1;for(;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;let t=r.lastChild;if(!t)return!1;r=t}let i=e.nodeAfter,s=e.pos+1;for(;!i.isTextblock;s++){if(i.type.spec.isolating)return!1;let t=i.firstChild;if(!t)return!1;i=t}let a=ls(t.doc,o,s,Lo.empty);if(!a||a.from!=o||a instanceof Yi&&a.slice.size>=s-o)return!1;if(n){let e=t.tr.step(a);e.setSelection(As.create(e.doc,o)),n(e.scrollIntoView())}return!0}function Vc(t,e,n=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const Wc=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=Jc(r)}let s=i&&i.nodeBefore;return!(!s||!Ns.isSelectable(s)||(e&&e(t.tr.setSelection(Ns.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),0))};function Jc(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Kc(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Gc=(t,e,n)=>{let r=Kc(t,n);if(!r)return!1;let o=Xc(r);if(!o)return!1;let i=o.nodeAfter;if(ol(t,o,e,1))return!0;if(0==r.parent.content.size&&(Vc(i,"start")||Ns.isSelectable(i))){let n=ls(t.doc,r.before(),r.after(),Lo.empty);if(n&&n.slice.size<n.to-n.from){if(e){let r=t.tr.step(n);r.setSelection(Vc(i,"start")?Ss.findFrom(r.doc.resolve(r.mapping.map(o.pos)),1):Ns.create(r.doc,r.mapping.map(o.pos))),e(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1||(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),0))},Yc=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=Xc(r)}let s=i&&i.nodeAfter;return!(!s||!Ns.isSelectable(s)||(e&&e(t.tr.setSelection(Ns.create(t.doc,i.pos)).scrollIntoView()),0))};function Xc(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Qc=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(r)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))};function Zc(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const tl=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=Zc(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let r=n.after(),o=t.tr.replaceWith(r,r,s.createAndFill());o.setSelection(Ss.near(o.doc.resolve(r),1)),e(o.scrollIntoView())}return!0},el=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Ds||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=Zc(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=t.tr.insert(n,i.createAndFill());s.setSelection(As.create(s.doc,n+1)),e(s.scrollIntoView())}return!0},nl=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(is(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),o=r&&es(r);return null!=o&&(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};var rl;function ol(t,e,n,r){let o,i,s=e.nodeBefore,a=e.nodeAfter,c=s.type.spec.isolating||a.type.spec.isolating;if(!c&&function(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!(!(r&&o&&r.type.compatibleContent(o.type))||(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(i,i+1)||!o.isTextblock&&!ss(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;let l=!c&&e.parent.canReplace(e.index(),e.index()+1);if(l&&(o=(i=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&i.matchType(o[0]||a.type).validEnd){if(n){let r=e.pos+a.nodeSize,i=Mo.empty;for(let t=o.length-1;t>=0;t--)i=Mo.from(o[t].create(null,i));i=Mo.from(s.copy(i));let c=t.tr.step(new Xi(e.pos-1,r,e.pos,r,new Lo(i,1,0),o.length,!0)),l=r+2*o.length;ss(c.doc,l)&&c.join(l),n(c.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&c?null:Ss.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),p=d&&es(d);if(null!=p&&p>=e.depth)return n&&n(t.tr.lift(d,p).scrollIntoView()),!0;if(l&&Vc(a,"start",!0)&&Vc(s,"end")){let r=s,o=[];for(;o.push(r),!r.isTextblock;)r=r.lastChild;let i=a,c=1;for(;!i.isTextblock;i=i.firstChild)c++;if(r.canReplace(r.childCount,r.childCount,i.content)){if(n){let r=Mo.empty;for(let t=o.length-1;t>=0;t--)r=Mo.from(o[t].copy(r));n(t.tr.step(new Xi(e.pos-o.length,e.pos+a.nodeSize,e.pos+c,e.pos+a.nodeSize-c,new Lo(r,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function il(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(e.tr.setSelection(As.create(e.doc,t<0?o.start(i):o.end(i)))),!0)}}const sl=il(-1),al=il(1);function cl(t,e=null){return function(n,r){let o=!1;for(let r=0;r<n.selection.ranges.length&&!o;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];n.doc.nodesBetween(i,s,((r,i)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)o=!0;else{let e=n.doc.resolve(i),r=e.index();o=e.parent.canReplaceWith(r,r+1,t)}}))}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];o.setBlockType(i,s,t,e)}r(o.scrollIntoView())}return!0}}function ll(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}let ul=ll(Fc,Uc,Wc),dl=ll(Fc,Gc,Yc);const pl={Enter:ll(Qc,el,nl,((t,e)=>{let{$from:n,$to:r}=t.selection;if(t.selection instanceof Ns&&t.selection.node.isBlock)return!(!n.parentOffset||!is(t.doc,n.pos)||(e&&e(t.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(e){let o=r.parentOffset==r.parent.content.size,i=t.tr;(t.selection instanceof As||t.selection instanceof Ds)&&i.deleteSelection();let s=0==n.depth?null:Zc(n.node(-1).contentMatchAt(n.indexAfter(-1))),a=rl?[rl]:o&&s?[{type:s}]:void 0,c=is(i.doc,i.mapping.map(n.pos),1,a);if(a||c||!is(i.doc,i.mapping.map(n.pos),1,s?[{type:s}]:void 0)||(s&&(a=[{type:s}]),c=!0),c&&(i.split(i.mapping.map(n.pos),1,a),!o&&!n.parentOffset&&n.parent.type!=s)){let t=i.mapping.map(n.before()),e=i.doc.resolve(t);s&&n.node(-1).canReplaceWith(e.index(),e.index()+1,s)&&i.setNodeMarkup(i.mapping.map(n.before()),s)}e(i.scrollIntoView())}return!0})),"Mod-Enter":tl,Backspace:ul,"Mod-Backspace":ul,"Shift-Backspace":ul,Delete:dl,"Mod-Delete":dl,"Mod-a":(t,e)=>(e&&e(t.tr.setSelection(new Ds(t.doc))),!0)},hl={"Ctrl-h":pl.Backspace,"Alt-Backspace":pl["Mod-Backspace"],"Ctrl-d":pl.Delete,"Ctrl-Alt-Backspace":pl["Mod-Delete"],"Alt-Delete":pl["Mod-Delete"],"Alt-d":pl["Mod-Delete"],"Ctrl-a":sl,"Ctrl-e":al};for(let t in pl)hl[t]=pl[t];function fl(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();class ml{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map((([t,e])=>[t,(...t)=>{const n=e(...t)(i);return o.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(o),n}])))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s=[],a=!!t,c=t||o.tr,l={...Object.fromEntries(Object.entries(n).map((([t,n])=>[t,(...t)=>{const r=this.buildProps(c,e),o=n(...t)(r);return s.push(o),l}]))),run:()=>(a||!e||c.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(c),s.every((t=>!0===t)))};return l}createCan(t){const{rawCommands:e,state:n}=this,r=!1,o=t||n.tr,i=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(e).map((([t,e])=>[t,(...t)=>e(...t)({...i,dispatch:void 0})]))),chain:()=>this.createChain(o,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:i}=r,s={tr:t,editor:r,view:i,state:fl({state:o,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map((([t,e])=>[t,(...t)=>e(...t)(s)])))}};return s}}function gl(t,e,n){return void 0===t.config[e]&&t.parent?gl(t.parent,e,n):"function"==typeof t.config[e]?t.config[e].bind({...n,parent:t.parent?gl(t.parent,e,n):null}):t.config[e]}function yl(t){return{baseExtensions:t.filter((t=>"extension"===t.type)),nodeExtensions:t.filter((t=>"node"===t.type)),markExtensions:t.filter((t=>"mark"===t.type))}}function _l(t){const e=[],{nodeExtensions:n,markExtensions:r}=yl(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((t=>{const n=gl(t,"addGlobalAttributes",{name:t.name,options:t.options,storage:t.storage,extensions:o});n&&n().forEach((t=>{t.types.forEach((n=>{Object.entries(t.attributes).forEach((([t,r])=>{e.push({type:n,name:t,attribute:{...i,...r}})}))}))}))})),o.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=gl(t,"addAttributes",n);if(!r)return;const o=r();Object.entries(o).forEach((([n,r])=>{const o={...i,...r};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&void 0===(null==o?void 0:o.default)&&delete o.default,e.push({type:t.name,name:n,attribute:o})}))})),e}function bl(t,e){if("string"==typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function vl(...t){return t.filter((t=>!!t)).reduce(((t,e)=>{const n={...t};return Object.entries(e).forEach((([t,e])=>{if(n[t])if("class"===t){const r=e?e.split(" "):[],o=n[t]?n[t].split(" "):[],i=r.filter((t=>!o.includes(t)));n[t]=[...o,...i].join(" ")}else n[t]="style"===t?[n[t],e].join("; "):e;else n[t]=e})),n}),{})}function wl(t,e){return e.filter((t=>t.attribute.rendered)).map((e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]})).reduce(((t,e)=>vl(t,e)),{})}function xl(t,e=void 0,...n){return function(t){return"function"==typeof t}(t)?e?t.bind(e)(...n):t(...n):t}function kl(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;const o=e.reduce(((t,e)=>{const r=e.attribute.parseHTML?e.attribute.parseHTML(n):function(t){return"string"!=typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}(n.getAttribute(e.name));return null==r?t:{...t,[e.name]:r}}),{});return{...r,...o}}}}function Sl(t){return Object.fromEntries(Object.entries(t).filter((([t,e])=>("attrs"!==t||!function(t={}){return 0===Object.keys(t).length&&t.constructor===Object}(e))&&null!=e)))}function El(t,e){var n;const r=_l(t),{nodeExtensions:o,markExtensions:i}=yl(t),s=null===(n=o.find((t=>gl(t,"topNode"))))||void 0===n?void 0:n.name,a=Object.fromEntries(o.map((n=>{const o=r.filter((t=>t.type===n.name)),i={name:n.name,options:n.options,storage:n.storage,editor:e},s=Sl({...t.reduce(((t,e)=>{const r=gl(e,"extendNodeSchema",i);return{...t,...r?r(n):{}}}),{}),content:xl(gl(n,"content",i)),marks:xl(gl(n,"marks",i)),group:xl(gl(n,"group",i)),inline:xl(gl(n,"inline",i)),atom:xl(gl(n,"atom",i)),selectable:xl(gl(n,"selectable",i)),draggable:xl(gl(n,"draggable",i)),code:xl(gl(n,"code",i)),whitespace:xl(gl(n,"whitespace",i)),defining:xl(gl(n,"defining",i)),isolating:xl(gl(n,"isolating",i)),attrs:Object.fromEntries(o.map((t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),a=xl(gl(n,"parseHTML",i));a&&(s.parseDOM=a.map((t=>kl(t,o))));const c=gl(n,"renderHTML",i);c&&(s.toDOM=t=>c({node:t,HTMLAttributes:wl(t,o)}));const l=gl(n,"renderText",i);return l&&(s.toText=l),[n.name,s]}))),c=Object.fromEntries(i.map((n=>{const o=r.filter((t=>t.type===n.name)),i={name:n.name,options:n.options,storage:n.storage,editor:e},s=Sl({...t.reduce(((t,e)=>{const r=gl(e,"extendMarkSchema",i);return{...t,...r?r(n):{}}}),{}),inclusive:xl(gl(n,"inclusive",i)),excludes:xl(gl(n,"excludes",i)),group:xl(gl(n,"group",i)),spanning:xl(gl(n,"spanning",i)),code:xl(gl(n,"code",i)),attrs:Object.fromEntries(o.map((t=>{var e;return[t.name,{default:null===(e=null==t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),a=xl(gl(n,"parseHTML",i));a&&(s.parseDOM=a.map((t=>kl(t,o))));const c=gl(n,"renderHTML",i);return c&&(s.toDOM=t=>c({mark:t,HTMLAttributes:wl(t,o)})),[n.name,s]})));return new vi({topNode:s,nodes:a,marks:c})}function Cl(t,e){return e.nodes[t]||e.marks[t]||null}function Tl(t,e){return Array.isArray(e)?e.some((e=>("string"==typeof e?e:e.name)===t.name)):e}const Al=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,((t,e,o,i)=>{var s,a;const c=(null===(a=(s=t.type.spec).toText)||void 0===a?void 0:a.call(s,{node:t,pos:e,parent:o,index:i}))||t.textContent||"%leaf%";n+=t.isAtom&&!t.isText?c:c.slice(0,Math.max(0,r-e))})),n};function Ol(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class Nl{constructor(t){this.find=t.find,this.handler=t.handler}}const Ml=(t,e)=>{if(Ol(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Dl(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:c}=n;if(c.composing)return!1;const l=c.state.doc.resolve(r);if(l.parent.type.spec.code||(null===(e=l.nodeBefore||l.nodeAfter)||void 0===e?void 0:e.marks.find((t=>t.type.spec.code))))return!1;let u=!1;const d=Al(l)+i;return s.forEach((t=>{if(u)return;const e=Ml(d,t.find);if(!e)return;const s=c.state.tr,l=fl({state:c.state,transaction:s}),p={from:r-(e[0].length-i.length),to:o},{commands:h,chain:f,can:m}=new ml({editor:n,state:l});null!==t.handler({state:l,range:p,match:e,commands:h,chain:f,can:m})&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:o,text:i}),c.dispatch(s),u=!0)})),u}function Rl(t){const{editor:e,rules:n}=t,r=new Bs({state:{init:()=>null,apply(t,o){const i=t.getMeta(r);if(i)return i;const s=t.getMeta("applyInputRules");return!!s&&setTimeout((()=>{const{from:t,text:o}=s,i=t+o.length;Dl({editor:e,from:t,to:i,text:o,rules:n,plugin:r})})),t.selectionSet||t.docChanged?null:o}},props:{handleTextInput:(t,o,i,s)=>Dl({editor:e,from:o,to:i,text:s,rules:n,plugin:r}),handleDOMEvents:{compositionend:t=>(setTimeout((()=>{const{$cursor:o}=t.state.selection;o&&Dl({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})})),!1)},handleKeyDown(t,o){if("Enter"!==o.key)return!1;const{$cursor:i}=t.state.selection;return!!i&&Dl({editor:e,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}class Il{constructor(t){this.find=t.find,this.handler=t.handler}}function $l(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,a="undefined"!=typeof DragEvent?new DragEvent("drop"):null;const c=({state:t,from:n,to:r,rule:o,pasteEvt:i})=>{const c=t.tr,l=fl({state:t,transaction:c}),u=function(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:c,chain:l,can:u}=new ml({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,((t,e)=>{if(!t.isTextblock||t.type.spec.code)return;const p=Math.max(r,e),h=Math.min(o,e+t.content.size);((t,e,n)=>{if(Ol(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map((e=>{const n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]})(t.textBetween(p-e,h-e,void 0,""),i.find,s).forEach((t=>{if(void 0===t.index)return;const e=p+t.index+1,r=e+t[0].length,o={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},h=i.handler({state:n,range:o,match:t,commands:c,chain:l,can:u,pasteEvent:s,dropEvent:a});d.push(h)}))})),d.every((t=>null!==t))}({editor:e,state:l,from:Math.max(n-1,0),to:r.b-1,rule:o,pasteEvent:i,dropEvent:a});if(u&&c.steps.length)return a="undefined"!=typeof DragEvent?new DragEvent("drop"):null,s="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,c},l=n.map((t=>new Bs({view(t){const e=e=>{var n;r=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:(t,e)=>(i=r===t.dom.parentElement,a=e,!1),paste:(t,e)=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=e,o=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(e,n,r)=>{const a=e[0],l="paste"===a.getMeta("uiEvent")&&!o,u="drop"===a.getMeta("uiEvent")&&!i,d=a.getMeta("applyPasteRules"),p=!!d;if(!l&&!u&&!p)return;if(p){const{from:e,text:n}=d,o=e+n.length,i=(t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(e=n.clipboardData)||void 0===e||e.setData("text/html",t),n})(n);return c({rule:t,state:r,from:e,to:{b:o},pasteEvt:i})}const h=n.doc.content.findDiffStart(r.doc.content),f=n.doc.content.findDiffEnd(r.doc.content);return"number"==typeof h&&f&&h!==f.b?c({rule:t,state:r,from:h,to:f,pasteEvt:s}):void 0}})));return l}class jl{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=jl.resolve(t),this.schema=El(this.extensions,e),this.setupExtensions()}static resolve(t){const e=jl.sort(jl.flatten(t)),n=function(t){const e=t.filter(((e,n)=>t.indexOf(e)!==n));return Array.from(new Set(e))}(e.map((t=>t.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((t=>`'${t}'`)).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map((t=>{const e=gl(t,"addExtensions",{name:t.name,options:t.options,storage:t.storage});return e?[t,...this.flatten(e())]:t})).flat(10)}static sort(t){return t.sort(((t,e)=>{const n=gl(t,"priority")||100,r=gl(e,"priority")||100;return n>r?-1:n<r?1:0}))}get commands(){return this.extensions.reduce(((t,e)=>{const n=gl(e,"addCommands",{name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Cl(e.name,this.schema)});return n?{...t,...n()}:t}),{})}get plugins(){const{editor:t}=this,e=jl.sort([...this.extensions].reverse()),n=[],r=[],o=e.map((e=>{const o={name:e.name,options:e.options,storage:e.storage,editor:t,type:Cl(e.name,this.schema)},i=[],s=gl(e,"addKeyboardShortcuts",o);let a={};if("mark"===e.type&&gl(e,"exitable",o)&&(a.ArrowRight=()=>fu.handleExit({editor:t,mark:e})),s){const e=Object.fromEntries(Object.entries(s()).map((([e,n])=>[e,()=>n({editor:t})])));a={...a,...e}}const c=new Bs({props:{handleKeyDown:zc(a)}});i.push(c);const l=gl(e,"addInputRules",o);Tl(e,t.options.enableInputRules)&&l&&n.push(...l());const u=gl(e,"addPasteRules",o);Tl(e,t.options.enablePasteRules)&&u&&r.push(...u());const d=gl(e,"addProseMirrorPlugins",o);if(d){const t=d();i.push(...t)}return i})).flat();return[Rl({editor:t,rules:n}),...$l({editor:t,rules:r}),...o]}get attributes(){return _l(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=yl(this.extensions);return Object.fromEntries(e.filter((t=>!!gl(t,"addNodeView"))).map((e=>{const n=this.attributes.filter((t=>t.type===e.name)),r={name:e.name,options:e.options,storage:e.storage,editor:t,type:bl(e.name,this.schema)},o=gl(e,"addNodeView",r);return o?[e.name,(r,i,s,a)=>{const c=wl(r,n);return o()({editor:t,node:r,getPos:s,decorations:a,HTMLAttributes:c,extension:e})}]:[]})))}setupExtensions(){this.extensions.forEach((t=>{var e;this.editor.extensionStorage[t.name]=t.storage;const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Cl(t.name,this.schema)};"mark"===t.type&&(null===(e=xl(gl(t,"keepOnSplit",n)))||void 0===e||e)&&this.splittableMarks.push(t.name);const r=gl(t,"onBeforeCreate",n),o=gl(t,"onCreate",n),i=gl(t,"onUpdate",n),s=gl(t,"onSelectionUpdate",n),a=gl(t,"onTransaction",n),c=gl(t,"onFocus",n),l=gl(t,"onBlur",n),u=gl(t,"onDestroy",n);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),i&&this.editor.on("update",i),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),l&&this.editor.on("blur",l),u&&this.editor.on("destroy",u)}))}}function Ll(t){return"Object"===function(t){return Object.prototype.toString.call(t).slice(8,-1)}(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Pl(t,e){const n={...t};return Ll(t)&&Ll(e)&&Object.keys(e).forEach((r=>{Ll(e[r])&&Ll(t[r])?n[r]=Pl(t[r],e[r]):n[r]=e[r]})),n}class Bl{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=xl(gl(this,"addOptions",{name:this.name}))),this.storage=xl(gl(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Bl(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Pl(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new Bl({...this.config,...t});return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=xl(gl(e,"addOptions",{name:e.name})),e.storage=xl(gl(e,"addStorage",{name:e.name,options:e.options})),e}}function zl(t,e,n={strict:!0}){const r=Object.keys(e);return!r.length||r.every((r=>n.strict?e[r]===t[r]:Ol(e[r])?e[r].test(t[r]):e[r]===t[r]))}function Fl(t,e,n={}){return t.find((t=>t.type===e&&zl(t.attrs,n)))}function Hl(t,e,n={}){return!!Fl(t,e,n)}function Ul(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const o=Fl([...r.node.marks],e,n);if(!o)return;let i=r.index,s=t.start()+r.offset,a=i+1,c=s+r.node.nodeSize;for(Fl([...r.node.marks],e,n);i>0&&o.isInSet(t.parent.child(i-1).marks);)i-=1,s-=t.parent.child(i).nodeSize;for(;a<t.parent.childCount&&Hl([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:c}}function ql(t,e){if("string"==typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function Vl(t){return t instanceof As}function Wl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Jl(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Bl.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new Bs({key:new Hs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map((t=>t.$from.pos))),a=Math.max(...i.map((t=>t.$to.pos))),c=function(t){return Object.fromEntries(Object.entries(t.nodes).filter((([,t])=>t.spec.toText)).map((([t,e])=>[t,e.spec.toText])))}(n);return function(t,e,n){const{from:r,to:o}=e,{blockSeparator:i="\n\n",textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,((t,n,c,l)=>{var u;t.isBlock&&n>r&&(a+=i);const d=null==s?void 0:s[t.type.name];if(d)return c&&(a+=d({node:t,pos:n,parent:c,index:l,range:e})),!1;t.isText&&(a+=null===(u=null==t?void 0:t.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,o-n))})),a}(r,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}});const Kl=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):1===r.nodeType&&Kl(r)}return t};function Gl(t){const e=`<body>${t}</body>`,n=(new window.DOMParser).parseFromString(e,"text/html").body;return Kl(n)}function Yl(t,e,n){n={slice:!0,parseOptions:{},...n};const r="string"==typeof t;if("object"==typeof t&&null!==t)try{return Array.isArray(t)&&t.length>0?Mo.fromArray(t.map((t=>e.nodeFromJSON(t)))):e.nodeFromJSON(t)}catch(r){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),Yl("",e,n)}if(r){if(n.errorOnInvalidContent){let r=!1,o="";const i=new vi({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:t=>(r=!0,o="string"==typeof t?t:t.outerHTML,null)}]}})});if(n.slice?xi.fromSchema(i).parseSlice(Gl(t),n.parseOptions):xi.fromSchema(i).parse(Gl(t),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}const r=xi.fromSchema(e);return n.slice?r.parseSlice(Gl(t),n.parseOptions).content:r.parse(Gl(t),n.parseOptions)}return Yl("",e,n)}function Xl(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function Ql(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?bl(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,((t,e)=>{if(t.isText)return;const n=Math.max(r,e),i=Math.min(o,e+t.nodeSize);a.push({node:t,from:n,to:i})}));const c=o-r,l=a.filter((t=>!s||s.name===t.node.type.name)).filter((t=>zl(t.node.attrs,n,{strict:!1})));return i?!!l.length:l.reduce(((t,e)=>t+e.to-e.from),0)>=c}function Zl(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function tu(t,e){const n="string"==typeof e?[e]:e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}function eu(t,e){const n=ql(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,(t=>{s.push(...t.marks)}));const a=s.find((t=>t.type.name===n.name));return a?{...a.attrs}:{}}function nu(t){return e=>function(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}(e.$from,t)}function ru(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach((e=>{const o=Ul(n.resolve(t),e.type);o&&r.push({mark:e,...o})})):n.nodesBetween(t,e,((t,e)=>{t&&void 0!==(null==t?void 0:t.nodeSize)&&r.push(...t.marks.map((n=>({from:e,to:e+t.nodeSize,mark:n}))))})),r}function ou(t,e,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=t.find((t=>t.type===e&&t.name===n));return!!r&&r.attribute.keepOnSplit})))}function iu(t,e){const{nodeExtensions:n}=yl(e),r=n.find((e=>e.name===t));if(!r)return!1;const o=xl(gl(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}function su(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter((t=>null==e?void 0:e.includes(t.type.name)));t.tr.ensureMarks(r)}}const au=(t,e)=>{const n=nu((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const o=t.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!ss(t.doc,n.pos)||(t.join(n.pos),!0)},cu=(t,e)=>{const n=nu((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const o=t.doc.nodeAt(r);return n.node.type!==(null==o?void 0:o.type)||!ss(t.doc,r)||(t.join(r),!0)};var lu,uu,du=Object.freeze({__proto__:null,blur:()=>({editor:t,view:e})=>(requestAnimationFrame((()=>{var n;t.isDestroyed||(e.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),clearContent:(t=!1)=>({commands:e})=>e.setContent("",t),clearNodes:()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return!n||(o.forEach((({$from:n,$to:r})=>{t.doc.nodesBetween(n.pos,r.pos,((t,n)=>{if(t.type.isText)return;const{doc:r,mapping:o}=e,i=r.resolve(o.map(n)),s=r.resolve(o.map(n+t.nodeSize)),a=i.blockRange(s);if(!a)return;const c=es(a);if(t.type.isTextblock){const{defaultType:t}=i.parent.contentMatchAt(i.index());e.setNodeMarkup(a.start,t)}(c||0===c)&&e.lift(a,c)}))})),!0)},command:t=>e=>t(e),createParagraphNear:()=>({state:t,dispatch:e})=>el(t,e),cut:(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new As(r.doc.resolve(s-1))),!0},deleteCurrentNode:()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let n=o.depth;n>0;n-=1)if(o.node(n).type===r.type){if(e){const e=o.before(n),r=o.after(n);t.delete(e,r).scrollIntoView()}return!0}return!1},deleteNode:t=>({tr:e,state:n,dispatch:r})=>{const o=bl(t,n.schema),i=e.selection.$anchor;for(let t=i.depth;t>0;t-=1)if(i.node(t).type===o){if(r){const n=i.before(t),r=i.after(t);e.delete(n,r).scrollIntoView()}return!0}return!1},deleteRange:t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},deleteSelection:()=>({state:t,dispatch:e})=>Fc(t,e),enter:()=>({commands:t})=>t.keyboardShortcut("Enter"),exitCode:()=>({state:t,dispatch:e})=>tl(t,e),extendMarkRange:(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=ql(t,r.schema),{doc:s,selection:a}=n,{$from:c,from:l,to:u}=a;if(o){const t=Ul(c,i,e);if(t&&t.from<=l&&t.to>=u){const e=As.create(s,t.from,t.to);n.setSelection(e)}}return!0},first:t=>e=>{const n="function"==typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1},focus:(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{Jl()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null==e?void 0:e.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===t||!1===t)return!0;if(i&&null===t&&!Vl(n.state.selection))return s(),!0;const a=function(t,e=null){if(!e)return null;const n=Ss.atStart(t),r=Ss.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return r;const o=n.from,i=r.to;return"all"===e?As.create(t,Wl(0,o,i),Wl(t.content.size,o,i)):As.create(t,Wl(e,o,i),Wl(e,o,i))}(o.doc,t)||n.state.selection,c=n.state.selection.eq(a);return i&&(c||o.setSelection(a),c&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},forEach:(t,e)=>n=>t.every(((t,r)=>e(t,{...n,index:r}))),insertContent:(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),insertContentAt:(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){let o;n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{o=Yl(e,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!==(s=n.errorOnInvalidContent)&&void 0!==s?s:i.options.enableContentCheck})}catch(t){return i.emit("contentError",{editor:i,error:t,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let a,{from:c,to:l}="number"==typeof t?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if(("type"in o?[o]:o).forEach((t=>{t.check(),u=!!u&&t.isText&&0===t.marks.length,d=!!d&&t.isBlock})),c===l&&d){const{parent:t}=r.doc.resolve(c);t.isTextblock&&!t.type.spec.code&&!t.childCount&&(c-=1,l+=1)}u?(a=Array.isArray(e)?e.map((t=>t.text||"")).join(""):"object"==typeof e&&e&&e.text?e.text:e,r.insertText(a,c,l)):(a=o,r.replaceWith(c,l,a)),n.updateSelection&&function(t,e){const n=t.steps.length-1;if(n<e)return;const r=t.steps[n];if(!(r instanceof Yi||r instanceof Xi))return;const o=t.mapping.maps[n];let i=0;o.forEach(((t,e,n,r)=>{0===i&&(i=r)})),t.setSelection(Ss.near(t.doc.resolve(i),-1))}(r,r.steps.length-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:a}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:a})}return!0},joinBackward:()=>({state:t,dispatch:e})=>Uc(t,e),joinDown:()=>({state:t,dispatch:e})=>((t,e)=>{let n,r=t.selection;if(r instanceof Ns){if(r.node.isTextblock||!ss(t.doc,r.to))return!1;n=r.to}else if(n=cs(t.doc,r.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0})(t,e),joinForward:()=>({state:t,dispatch:e})=>Gc(t,e),joinItemBackward:()=>({state:t,dispatch:e,tr:n})=>{try{const r=cs(t.doc,t.selection.$from.pos,-1);return null!=r&&(n.join(r,2),e&&e(n),!0)}catch(t){return!1}},joinItemForward:()=>({state:t,dispatch:e,tr:n})=>{try{const r=cs(t.doc,t.selection.$from.pos,1);return null!=r&&(n.join(r,2),e&&e(n),!0)}catch(t){return!1}},joinTextblockBackward:()=>({state:t,dispatch:e})=>((t,e)=>{let n=Hc(t,void 0);if(!n)return!1;let r=Jc(n);return!!r&&qc(t,r,e)})(t,e),joinTextblockForward:()=>({state:t,dispatch:e})=>((t,e)=>{let n=Kc(t,void 0);if(!n)return!1;let r=Xc(n);return!!r&&qc(t,r,e)})(t,e),joinUp:()=>({state:t,dispatch:e})=>((t,e)=>{let n,r=t.selection,o=r instanceof Ns;if(o){if(r.node.isTextblock||!ss(t.doc,r.from))return!1;n=r.from}else if(n=cs(t.doc,r.from,-1),null==n)return!1;if(e){let r=t.tr.join(n);o&&r.setSelection(Ns.create(r.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(r.scrollIntoView())}return!0})(t,e),keyboardShortcut:t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=function(t){const e=t.split(/-(?!$)/);let n,r,o,i,s=e[e.length-1];"Space"===s&&(s=" ");for(let t=0;t<e.length-1;t+=1){const s=e[t];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else if(/^s(hift)?$/i.test(s))o=!0;else{if(!/^mod$/i.test(s))throw new Error(`Unrecognized modifier name: ${s}`);Jl()||Xl()?i=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),i&&(s=`Meta-${s}`),o&&(s=`Shift-${s}`),s}(t).split(/-(?!$)/),s=i.find((t=>!["Alt","Ctrl","Meta","Shift"].includes(t))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction((()=>{n.someProp("handleKeyDown",(t=>t(n,a)))}));return null==c||c.steps.forEach((t=>{const e=t.map(r.mapping);e&&o&&r.maybeStep(e)})),!0},lift:(t,e={})=>({state:n,dispatch:r})=>!!Ql(n,bl(t,n.schema),e)&&((t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&es(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)})(n,r),liftEmptyBlock:()=>({state:t,dispatch:e})=>nl(t,e),liftListItem:t=>({state:e,dispatch:n})=>{return(r=bl(t,e.schema),function(t,e){let{$from:n,$to:o}=t.selection,i=n.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==r));return!!i&&(!e||(n.node(i.depth-1).type==r?function(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Xi(i-1,s,i,s,new Lo(Mo.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Zo(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=es(r);if(null==a)return!1;o.lift(r,a);let c=o.mapping.map(i,-1)-1;return ss(o.doc,c)&&o.join(c),e(o.scrollIntoView()),!0}(t,e,r,i):function(t,e,n){let r=t.tr,o=n.parent;for(let t=n.end,e=n.endIndex-1,i=n.startIndex;e>i;e--)t-=o.child(e).nodeSize,r.delete(t-1,t+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,c=n.endIndex==o.childCount,l=i.node(-1),u=i.index(-1);if(!l.canReplace(u+(a?0:1),u+1,s.content.append(c?Mo.empty:Mo.from(o))))return!1;let d=i.pos,p=d+s.nodeSize;return r.step(new Xi(d-(a?1:0),p+(c?1:0),d+1,p-1,new Lo((a?Mo.empty:Mo.from(o.copy(Mo.empty))).append(c?Mo.empty:Mo.from(o.copy(Mo.empty))),a?0:1,c?0:1),a?0:1)),e(r.scrollIntoView()),!0}(t,e,i)))})(e,n);var r},newlineInCode:()=>({state:t,dispatch:e})=>Qc(t,e),resetAttributes:(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Zl("string"==typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(i=bl(t,r.schema)),"mark"===a&&(s=ql(t,r.schema)),o&&n.selection.ranges.forEach((t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,((t,r)=>{i&&i===t.type&&n.setNodeMarkup(r,void 0,tu(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((o=>{s===o.type&&n.addMark(r,r+t.nodeSize,s.create(tu(o.attrs,e)))}))}))})),!0)},scrollIntoView:()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),selectAll:()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),selectNodeBackward:()=>({state:t,dispatch:e})=>Wc(t,e),selectNodeForward:()=>({state:t,dispatch:e})=>Yc(t,e),selectParentNode:()=>({state:t,dispatch:e})=>((t,e)=>{let n,{$from:r,to:o}=t.selection,i=r.sharedDepth(o);return 0!=i&&(n=r.before(i),e&&e(t.tr.setSelection(Ns.create(t.doc,n))),!0)})(t,e),selectTextblockEnd:()=>({state:t,dispatch:e})=>al(t,e),selectTextblockStart:()=>({state:t,dispatch:e})=>sl(t,e),setContent:(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var c,l;const{doc:u}=i;if("full"!==n.preserveWhitespace){const a=function(t,e,n={},r={}){return Yl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}(t,o.schema,n,{errorOnInvalidContent:null!==(c=r.errorOnInvalidContent)&&void 0!==c?c:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,a).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:null!==(l=r.errorOnInvalidContent)&&void 0!==l?l:o.options.enableContentCheck})},setMark:(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,c=ql(t,r.schema);if(o)if(s){const t=eu(r,c);n.addStoredMark(c.create({...t,...e}))}else a.forEach((t=>{const o=t.$from.pos,i=t.$to.pos;r.doc.nodesBetween(o,i,((t,r)=>{const s=Math.max(r,o),a=Math.min(r+t.nodeSize,i);t.marks.find((t=>t.type===c))?t.marks.forEach((t=>{c===t.type&&n.addMark(s,a,c.create({...t.attrs,...e}))})):n.addMark(s,a,c.create(e))}))}));return function(t,e,n){var r;const{selection:o}=e;let i=null;if(Vl(o)&&(i=o.$cursor),i){const e=null!==(r=t.storedMarks)&&void 0!==r?r:i.marks();return!!n.isInSet(e)||!e.some((t=>t.type.excludes(n)))}const{ranges:s}=o;return s.some((({$from:e,$to:r})=>{let o=0===e.depth&&t.doc.inlineContent&&t.doc.type.allowsMarkType(n);return t.doc.nodesBetween(e.pos,r.pos,((t,e,r)=>{if(o)return!1;if(t.isInline){const e=!r||r.type.allowsMarkType(n),i=!!n.isInSet(t.marks)||!t.marks.some((t=>t.type.excludes(n)));o=e&&i}return!o})),o}))}(r,n,c)},setMeta:(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),setNode:(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=bl(t,n.schema);return i.isTextblock?o().command((({commands:t})=>!!cl(i,e)(n)||t.clearNodes())).command((({state:t})=>cl(i,e)(t,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,r=Wl(t,0,n.content.size),o=Ns.create(n,r);e.setSelection(o)}return!0},setTextSelection:t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:r,to:o}="number"==typeof t?{from:t,to:t}:t,i=As.atStart(n).from,s=As.atEnd(n).to,a=Wl(r,i,s),c=Wl(o,i,s),l=As.create(n,a,c);e.setSelection(l)}return!0},sinkListItem:t=>({state:e,dispatch:n})=>{const r=bl(t,e.schema);return(o=r,function(t,e){let{$from:n,$to:r}=t.selection,i=n.blockRange(r,(t=>t.childCount>0&&t.firstChild.type==o));if(!i)return!1;let s=i.startIndex;if(0==s)return!1;let a=i.parent,c=a.child(s-1);if(c.type!=o)return!1;if(e){let n=c.lastChild&&c.lastChild.type==a.type,r=Mo.from(n?o.create():null),s=new Lo(Mo.from(o.create(null,Mo.from(a.type.create(null,r)))),n?3:1,0),l=i.start,u=i.end;e(t.tr.step(new Xi(l-(n?3:1),u,l,u,s,1,!0)).scrollIntoView())}return!0})(e,n);var o},splitBlock:({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:c}=i,l=ou(o.extensionManager.attributes,a.node().type.name,a.node().attrs);if(i instanceof Ns&&i.node.isBlock)return!(!a.parentOffset||!is(s,a.pos)||(r&&(t&&su(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),0));if(!a.parent.isBlock)return!1;const u=c.parentOffset===c.parent.content.size,d=0===a.depth?void 0:function(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=u&&d?[{type:d,attrs:l}]:void 0,h=is(e.doc,e.mapping.map(a.pos),1,p);if(p||h||!is(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)||(h=!0,p=d?[{type:d,attrs:l}]:void 0),r){if(h&&(i instanceof As&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),d&&!u&&!a.parentOffset&&a.parent.type!==d)){const t=e.mapping.map(a.before()),n=e.doc.resolve(t);a.node(-1).canReplaceWith(n.index(),n.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&su(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return h},splitListItem:(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=bl(t,r.schema),{$from:c,$to:l}=r.selection,u=r.selection.node;if(u&&u.isBlock||c.depth<2||!c.sameParent(l))return!1;const d=c.node(-1);if(d.type!==a)return!1;const p=i.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(o){let t=Mo.empty;const r=c.index(-1)?1:c.index(-2)?2:3;for(let e=c.depth-r;e>=c.depth-3;e-=1)t=Mo.from(c.node(e).copy(t));const o=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,i={...ou(p,c.node().type.name,c.node().attrs),...e},l=(null===(s=a.contentMatch.defaultType)||void 0===s?void 0:s.createAndFill(i))||void 0;t=t.append(Mo.from(a.createAndFill(null,l)||void 0));const u=c.before(c.depth-(r-1));n.replace(u,c.after(-o),new Lo(t,4-r,0));let d=-1;n.doc.nodesBetween(u,n.doc.content.size,((t,e)=>{if(d>-1)return!1;t.isTextblock&&0===t.content.size&&(d=e+1)})),d>-1&&n.setSelection(As.near(n.doc.resolve(d))),n.scrollIntoView()}return!0}const h=l.pos===c.end()?d.contentMatchAt(0).defaultType:null,f={...ou(p,d.type.name,d.attrs),...e},m={...ou(p,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,l.pos);const g=h?[{type:a,attrs:f},{type:h,attrs:m}]:[{type:a,attrs:f}];if(!is(n.doc,c.pos,2))return!1;if(o){const{selection:t,storedMarks:e}=r,{splittableMarks:s}=i.extensionManager,a=e||t.$to.parentOffset&&t.$from.marks();if(n.split(c.pos,2,g).scrollIntoView(),!a||!o)return!0;const l=a.filter((t=>s.includes(t.type.name)));n.ensureMarks(l)}return!0},toggleList:(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:c,commands:l,can:u})=>{const{extensions:d,splittableMarks:p}=o.extensionManager,h=bl(t,s.schema),f=bl(e,s.schema),{selection:m,storedMarks:g}=s,{$from:y,$to:_}=m,b=y.blockRange(_),v=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const w=nu((t=>iu(t.type.name,d)))(m);if(b.depth>=1&&w&&b.depth-w.depth<=1){if(w.node.type===h)return l.liftListItem(f);if(iu(w.node.type.name,d)&&h.validContent(w.node.content)&&a)return c().command((()=>(i.setNodeMarkup(w.pos,h),!0))).command((()=>au(i,h))).command((()=>cu(i,h))).run()}return n&&v&&a?c().command((()=>{const t=u().wrapInList(h,r),e=v.filter((t=>p.includes(t.type.name)));return i.ensureMarks(e),!!t||l.clearNodes()})).wrapInList(h,r).command((()=>au(i,h))).command((()=>cu(i,h))).run():c().command((()=>!!u().wrapInList(h,r)||l.clearNodes())).wrapInList(h,r).command((()=>au(i,h))).command((()=>cu(i,h))).run()},toggleMark:(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=ql(t,r.schema);return function(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?ql(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter((t=>!i||i.name===t.type.name)).find((t=>zl(t.attrs,n,{strict:!1})));let s=0;const a=[];if(o.forEach((({$from:e,$to:n})=>{const r=e.pos,o=n.pos;t.doc.nodesBetween(r,o,((t,e)=>{if(!t.isText&&!t.marks.length)return;const n=Math.max(r,e),i=Math.min(o,e+t.nodeSize);s+=i-n,a.push(...t.marks.map((t=>({mark:t,from:n,to:i}))))}))})),0===s)return!1;const c=a.filter((t=>!i||i.name===t.mark.type.name)).filter((t=>zl(t.mark.attrs,n,{strict:!1}))).reduce(((t,e)=>t+e.to-e.from),0),l=a.filter((t=>!i||t.mark.type!==i&&t.mark.type.excludes(i))).reduce(((t,e)=>t+e.to-e.from),0);return(c>0?c+l:c)>=s}(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},toggleNode:(t,e,n={})=>({state:r,commands:o})=>{const i=bl(t,r.schema),s=bl(e,r.schema);return Ql(r,i,n)?o.setNode(s):o.setNode(i,n)},toggleWrap:(t,e={})=>({state:n,commands:r})=>{const o=bl(t,n.schema);return Ql(n,o,e)?r.lift(o):r.wrapIn(o,e)},undoInputRule:()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){const n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},unsetMark:(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,c=ql(t,r.schema),{$from:l,empty:u,ranges:d}=a;if(!o)return!0;if(u&&s){let{from:t,to:e}=a;const r=null===(i=l.marks().find((t=>t.type===c)))||void 0===i?void 0:i.attrs,o=Ul(l,c,r);o&&(t=o.from,e=o.to),n.removeMark(t,e,c)}else d.forEach((t=>{n.removeMark(t.$from.pos,t.$to.pos,c)}));return n.removeStoredMark(c),!0},updateAttributes:(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=Zl("string"==typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(i=bl(t,r.schema)),"mark"===a&&(s=ql(t,r.schema)),o&&n.selection.ranges.forEach((t=>{const o=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(o,a,((t,r)=>{i&&i===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach((i=>{if(s===i.type){const c=Math.max(r,o),l=Math.min(r+t.nodeSize,a);n.addMark(c,l,s.create({...i.attrs,...e}))}}))}))})),!0)},wrapIn:(t,e={})=>({state:n,dispatch:r})=>function(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&ns(s,t,e);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}(bl(t,n.schema),e)(n,r),wrapInList:(t,e={})=>({state:n,dispatch:r})=>function(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=!1,c=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(t)&&0==s.startIndex){if(0==o.index(s.depth-1))return!1;let t=n.doc.resolve(s.start-2);c=new Zo(t,t,s.depth),s.endIndex<s.parent.childCount&&(s=new Zo(o,n.doc.resolve(i.end(s.depth)),s.depth)),a=!0}let l=ns(c,t,e,s);return!!l&&(r&&r(function(t,e,n,r,o){let i=Mo.empty;for(let t=n.length-1;t>=0;t--)i=Mo.from(n[t].type.create(n[t].attrs,i));t.step(new Xi(e.start-(r?2:0),e.end,e.start,e.end,new Lo(i,0,0),n.length,!0));let s=0;for(let t=0;t<n.length;t++)n[t].type==o&&(s=t+1);let a=n.length-s,c=e.start+n.length-(r?2:0),l=e.parent;for(let n=e.startIndex,r=e.endIndex,o=!0;n<r;n++,o=!1)!o&&is(t.doc,c,a)&&(t.split(c,a),c+=2*a),c+=l.child(n).nodeSize;return t}(n.tr,s,l,a,t).scrollIntoView()),!0)}}(bl(t,n.schema),e)(n,r)});function pu(t){return new Nl({find:t.find,handler:({state:e,range:n,match:r})=>{const o=xl(t.getAttributes,void 0,r);if(!1===o||null===o)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const r=a.search(/\S/),c=n.from+a.indexOf(s),l=c+s.length;if(ru(n.from,n.to,e.doc).filter((e=>e.mark.type.excluded.find((n=>n===t.type&&n!==e.mark.type)))).filter((t=>t.to>c)).length)return null;l<n.to&&i.delete(l,n.to),c>n.from&&i.delete(n.from+r,c);const u=n.from+r+s.length;i.addMark(n.from+r,u,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function hu(t){return new Nl({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const i=xl(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),c=a&&ns(a,t.type,i);if(!c)return null;if(s.wrap(a,c),t.keepMarks&&t.editor){const{selection:n,storedMarks:r}=e,{splittableMarks:o}=t.editor.extensionManager,i=r||n.$to.parentOffset&&n.$from.marks();if(i){const t=i.filter((t=>o.includes(t.type.name)));s.ensureMarks(t)}}if(t.keepAttributes){const e="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";o().updateAttributes(e,i).run()}const l=s.doc.resolve(n.from-1).nodeBefore;l&&l.type===t.type&&ss(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,l))&&s.join(n.from-1)}})}Bl.create({name:"commands",addCommands:()=>({...du})}),Bl.create({name:"editable",addProseMirrorPlugins(){return[new Bs({key:new Hs("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bl.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Bs({key:new Hs("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Bl.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first((({commands:t})=>[()=>t.undoInputRule(),()=>t.command((({tr:e})=>{const{selection:n,doc:r}=e,{empty:o,$anchor:i}=n,{pos:s,parent:a}=i,c=i.parent.isTextblock&&s>0?e.doc.resolve(s-1):i,l=c.parent.type.spec.isolating,u=i.pos-i.parentOffset,d=l&&1===c.parent.childCount?u===i.pos:Ss.atStart(r).from===s;return!(!o||!a.type.isTextblock||a.textContent.length||!d||d&&"paragraph"===i.parent.type.name)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()])),e=()=>this.editor.commands.first((({commands:t})=>[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()])),n={Enter:()=>this.editor.commands.first((({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Jl()||Xl()?o:r},addProseMirrorPlugins(){return[new Bs({key:new Hs("clearDocument"),appendTransaction:(t,e,n)=>{if(!t.some((t=>t.docChanged))||e.doc.eq(n.doc))return;const{empty:r,from:o,to:i}=e.selection,s=Ss.atStart(e.doc).from,a=Ss.atEnd(e.doc).to;if(r||o!==s||i!==a)return;if(0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;const c=n.tr,l=fl({state:n,transaction:c}),{commands:u}=new ml({editor:this.editor,state:l});return u.clearNodes(),c.steps.length?c:void 0}})]}}),Bl.create({name:"tabindex",addProseMirrorPlugins(){return[new Bs({key:new Hs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class fu{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=xl(gl(this,"addOptions",{name:this.name}))),this.storage=xl(gl(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new fu(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Pl(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new fu(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=xl(gl(e,"addOptions",{name:e.name})),e.storage=xl(gl(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:n}=t.state,r=t.state.selection.$from;if(r.pos===r.end()){const o=r.marks();if(!o.find((t=>(null==t?void 0:t.type.name)===e.name)))return!1;const i=o.find((t=>(null==t?void 0:t.type.name)===e.name));return i&&n.removeStoredMark(i),n.insertText(" ",r.pos),t.view.dispatch(n),!0}return!1}}class mu{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=xl(gl(this,"addOptions",{name:this.name}))),this.storage=xl(gl(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new mu(t)}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Pl(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new mu(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=xl(gl(e,"addOptions",{name:e.name})),e.storage=xl(gl(e,"addStorage",{name:e.name,options:e.options})),e}}class gu{constructor(t,e,n){this.isDragging=!1,this.component=t,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(t){var e,n,r,o,i,s,a;const{view:c}=this.editor,l=t.target,u=3===l.nodeType?null===(e=l.parentElement)||void 0===e?void 0:e.closest("[data-drag-handle]"):l.closest("[data-drag-handle]");if(!this.dom||(null===(n=this.contentDOM)||void 0===n?void 0:n.contains(l))||!u)return;let d=0,p=0;if(this.dom!==u){const e=this.dom.getBoundingClientRect(),n=u.getBoundingClientRect(),a=null!==(r=t.offsetX)&&void 0!==r?r:null===(o=t.nativeEvent)||void 0===o?void 0:o.offsetX,c=null!==(i=t.offsetY)&&void 0!==i?i:null===(s=t.nativeEvent)||void 0===s?void 0:s.offsetY;d=n.x-e.x+a,p=n.y-e.y+c}null===(a=t.dataTransfer)||void 0===a||a.setDragImage(this.dom,d,p);const h=Ns.create(c.state.doc,this.getPos()),f=c.state.tr.setSelection(h);c.dispatch(f)}stopEvent(t){var e;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:t});const n=t.target;if(!this.dom.contains(n)||(null===(e=this.contentDOM)||void 0===e?void 0:e.contains(n)))return!1;const r=t.type.startsWith("drag"),o="drop"===t.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!o&&!r)return!0;const{isEditable:i}=this.editor,{isDragging:s}=this,a=!!this.node.type.spec.draggable,c=Ns.isSelectable(this.node),l="copy"===t.type,u="paste"===t.type,d="cut"===t.type,p="mousedown"===t.type;if(!a&&c&&r&&t.preventDefault(),a&&r&&!s)return t.preventDefault(),!1;if(a&&i&&!s&&p){const t=n.closest("[data-drag-handle]");t&&(this.dom===t||this.dom.contains(t))&&(this.isDragging=!0,document.addEventListener("dragend",(()=>{this.isDragging=!1}),{once:!0}),document.addEventListener("drop",(()=>{this.isDragging=!1}),{once:!0}),document.addEventListener("mouseup",(()=>{this.isDragging=!1}),{once:!0}))}return!(s||o||l||u||d||p&&c)}ignoreMutation(t){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:t}):!(!this.node.isLeaf&&!this.node.isAtom)||"selection"!==t.type&&(!(this.dom.contains(t.target)&&"childList"===t.type&&(Jl()||"Android"===navigator.platform||/android/i.test(navigator.userAgent))&&this.editor.isFocused&&[...Array.from(t.addedNodes),...Array.from(t.removedNodes)].every((t=>t.isContentEditable)))&&(this.contentDOM===t.target&&"attributes"===t.type||!this.contentDOM.contains(t.target))))}updateAttributes(t){this.editor.commands.command((({tr:e})=>{const n=this.getPos();return e.setNodeMarkup(n,void 0,{...this.node.attrs,...t}),!0}))}deleteNode(){const t=this.getPos(),e=t+this.node.nodeSize;this.editor.commands.deleteRange({from:t,to:e})}}function yu(t){return new Il({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=xl(t.getAttributes,void 0,r,o);if(!1===i||null===i)return null;const{tr:s}=e,a=r[r.length-1],c=r[0];let l=n.to;if(a){const r=c.search(/\S/),o=n.from+c.indexOf(a),u=o+a.length;if(ru(n.from,n.to,e.doc).filter((e=>e.mark.type.excluded.find((n=>n===t.type&&n!==e.mark.type)))).filter((t=>t.to>o)).length)return null;u<n.to&&s.delete(u,n.to),o>n.from&&s.delete(n.from+r,o),l=n.from+r+a.length,s.addMark(n.from+r,l,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}!function(t){t.Attribute="attribute",t.Pseudo="pseudo",t.PseudoElement="pseudo-element",t.Tag="tag",t.Universal="universal",t.Adjacent="adjacent",t.Child="child",t.Descendant="descendant",t.Parent="parent",t.Sibling="sibling",t.ColumnCombinator="column-combinator"}(lu||(lu={})),function(t){t.Any="any",t.Element="element",t.End="end",t.Equals="equals",t.Exists="exists",t.Hyphen="hyphen",t.Not="not",t.Start="start"}(uu||(uu={}));const _u=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,bu=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,vu=new Map([[126,uu.Element],[94,uu.Start],[36,uu.End],[42,uu.Any],[33,uu.Not],[124,uu.Hyphen]]),wu=new Set(["has","not","matches","is","where","host","host-context"]),xu=new Set(["contains","icontains"]);function ku(t,e,n){const r=parseInt(e,16)-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)}function Su(t){return t.replace(bu,ku)}function Eu(t){return 39===t||34===t}function Cu(t){return 32===t||9===t||10===t||12===t||13===t}function Tu(t){const e=[],n=Au(e,`${t}`,0);if(n<t.length)throw new Error(`Unmatched selector: ${t.slice(n)}`);return e}function Au(t,e,n){let r=[];function o(t){const r=e.slice(n+t).match(_u);if(!r)throw new Error(`Expected name, found ${e.slice(n)}`);const[o]=r;return n+=t+o.length,Su(o)}function i(t){for(n+=t;n<e.length&&Cu(e.charCodeAt(n));)n++}function s(){const t=n+=1;let r=1;for(;r>0&&n<e.length;n++)40!==e.charCodeAt(n)||a(n)?41!==e.charCodeAt(n)||a(n)||r--:r++;if(r)throw new Error("Parenthesis not matched");return Su(e.slice(t,n-1))}function a(t){let n=0;for(;92===e.charCodeAt(--t);)n++;return!(1&~n)}function c(){if(r.length>0&&function(t){switch(t.type){case lu.Adjacent:case lu.Child:case lu.Descendant:case lu.Parent:case lu.Sibling:case lu.ColumnCombinator:return!0;default:return!1}}(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function l(t){r.length>0&&r[r.length-1].type===lu.Descendant?r[r.length-1].type=t:(c(),r.push({type:t}))}function u(t,e){r.push({type:lu.Attribute,name:t,action:e,value:o(1),namespace:null,ignoreCase:"quirks"})}function d(){if(r.length&&r[r.length-1].type===lu.Descendant&&r.pop(),0===r.length)throw new Error("Empty sub-selector");t.push(r)}if(i(0),e.length===n)return n;t:for(;n<e.length;){const t=e.charCodeAt(n);switch(t){case 32:case 9:case 10:case 12:case 13:0!==r.length&&r[0].type===lu.Descendant||(c(),r.push({type:lu.Descendant})),i(1);break;case 62:l(lu.Child),i(1);break;case 60:l(lu.Parent),i(1);break;case 126:l(lu.Sibling),i(1);break;case 43:l(lu.Adjacent),i(1);break;case 46:u("class",uu.Element);break;case 35:u("id",uu.Equals);break;case 91:{let t;i(1);let s=null;124===e.charCodeAt(n)?t=o(1):e.startsWith("*|",n)?(s="*",t=o(2)):(t=o(0),124===e.charCodeAt(n)&&61!==e.charCodeAt(n+1)&&(s=t,t=o(1))),i(0);let c=uu.Exists;const l=vu.get(e.charCodeAt(n));if(l){if(c=l,61!==e.charCodeAt(n+1))throw new Error("Expected `=`");i(2)}else 61===e.charCodeAt(n)&&(c=uu.Equals,i(1));let u="",d=null;if("exists"!==c){if(Eu(e.charCodeAt(n))){const t=e.charCodeAt(n);let r=n+1;for(;r<e.length&&(e.charCodeAt(r)!==t||a(r));)r+=1;if(e.charCodeAt(r)!==t)throw new Error("Attribute value didn't end");u=Su(e.slice(n+1,r)),n=r+1}else{const t=n;for(;n<e.length&&(!Cu(e.charCodeAt(n))&&93!==e.charCodeAt(n)||a(n));)n+=1;u=Su(e.slice(t,n))}i(0);const t=32|e.charCodeAt(n);115===t?(d=!1,i(1)):105===t&&(d=!0,i(1))}if(93!==e.charCodeAt(n))throw new Error("Attribute selector didn't terminate");n+=1;const p={type:lu.Attribute,name:t,action:c,value:u,namespace:s,ignoreCase:d};r.push(p);break}case 58:{if(58===e.charCodeAt(n+1)){r.push({type:lu.PseudoElement,name:o(2).toLowerCase(),data:40===e.charCodeAt(n)?s():null});continue}const t=o(1).toLowerCase();let i=null;if(40===e.charCodeAt(n))if(wu.has(t)){if(Eu(e.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${t} cannot be quoted`);if(i=[],n=Au(i,e,n+1),41!==e.charCodeAt(n))throw new Error(`Missing closing parenthesis in :${t} (${e})`);n+=1}else{if(i=s(),xu.has(t)){const t=i.charCodeAt(0);t===i.charCodeAt(i.length-1)&&Eu(t)&&(i=i.slice(1,-1))}i=Su(i)}r.push({type:lu.Pseudo,name:t,data:i});break}case 44:d(),r=[],i(1);break;default:{if(e.startsWith("/*",n)){const t=e.indexOf("*/",n+2);if(t<0)throw new Error("Comment was not terminated");n=t+2,0===r.length&&i(0);break}let s,a=null;if(42===t)n+=1,s="*";else if(124===t){if(s="",124===e.charCodeAt(n+1)){l(lu.ColumnCombinator),i(2);break}}else{if(!_u.test(e.slice(n)))break t;s=o(0)}124===e.charCodeAt(n)&&124!==e.charCodeAt(n+1)&&(a=s,42===e.charCodeAt(n+1)?(s="*",n+=2):s=o(1)),r.push("*"===s?{type:lu.Universal,namespace:a}:{type:lu.Tag,name:s,namespace:a})}}}return d(),n}var Ou=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nu=/[\x01-\x7F]/g,Mu=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Du=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,Ru={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","\t":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon",:"circ",:"caron","":"deg","":"copy","":"reg","":"copysr",:"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78",:"ascr",:"aopf",:"afr",:"Aopf",:"Afr",:"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig",:"bscr",:"bopf",:"bfr",:"Bopf",:"Bscr",:"Bfr",:"cfr",:"cscr",:"copf",:"Cfr",:"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare",:"dfr",:"dd",:"dopf",:"dscr",:"Dscr",:"Dfr",:"DD",:"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH",:"ee",:"escr",:"efr",:"eopf",:"Escr",:"Efr",:"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr",:"ffr",:"fopf",:"fscr",:"Ffr",:"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr",:"gopf",:"gfr",:"Gscr",:"Gopf",:"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil",:"hfr",:"planckh",:"hscr",:"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok",:"iopf",:"ifr",:"iscr",:"ii",:"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath",:"jscr",:"jopf",:"jfr",:"Jscr",:"Jfr",:"Jopf",:"jcirc",:"Jcirc",:"jmath",:"kopf",:"kscr",:"kfr",:"Kscr",:"Kopf",:"Kfr",:"kcedil",:"Kcedil",:"lfr",:"lscr",:"ell",:"lopf",:"Lscr",:"Lfr",:"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot",:"mfr",:"mopf",:"mscr",:"Mfr",:"Mopf",:"Mscr",:"nfr",:"nopf",:"nscr",:"Nopf",:"Nscr",:"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG",:"oopf",:"ofr",:"oscr",:"Oscr",:"Ofr",:"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig",:"pfr",:"pscr",:"popf",:"Popf",:"Pfr",:"Pscr",:"qopf",:"qfr",:"qscr",:"Qscr",:"Qfr",:"Qopf",:"kgreen",:"rfr",:"ropf",:"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil",:"sopf",:"sscr",:"sfr",:"Sopf",:"Sfr",:"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig",:"tfr",:"tscr",:"topf",:"Tscr",:"Tfr",:"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok",:"uscr",:"uopf",:"ufr",:"Uopf",:"Ufr",:"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr",:"vfr",:"vopf",:"vscr",:"Vfr",:"Vopf",:"Vscr",:"wopf",:"wscr",:"wfr",:"Wscr",:"Wopf",:"Wfr",:"wcirc",:"Wcirc",:"xfr",:"xscr",:"xopf",:"Xopf",:"Xfr",:"Xscr",:"yfr",:"yscr",:"yopf",:"Yscr",:"Yfr",:"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml",:"zscr",:"zfr",:"zopf",:"Zfr",:"Zopf",:"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi",:"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},Iu=/["&'<>`]/g,$u=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;String.fromCharCode;function ju(t,e){if(!t)return e;const n={};let r;for(r in e)n[r]=hd(t,r)?t[r]:e[r];return n}var Lu=function(t){return`&#x${t.toString(16).toUpperCase()};`},Pu=function(t){return`&#${t};`};function Bu(t){throw new Error(`Parse error: ${t}`)}var zu=function(t,e){(e=ju(e,zu.options)).strict&&$u.test(t)&&Bu("forbidden code point");const n=e.encodeEverything,r=e.useNamedReferences,o=e.allowUnsafeSymbols,i=e.decimal?Pu:Lu,s=function(t){return i(t.charCodeAt(0))};return n?(t=t.replace(Nu,(t=>r&&hd(Ru,t)?`&${Ru[t]};`:s(t))),r&&(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),r&&(t=t.replace(Du,(t=>`&${Ru[t]};`)))):r?(o||(t=t.replace(Iu,(t=>`&${Ru[t]};`))),t=(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(Du,(t=>`&${Ru[t]};`))):o||(t=t.replace(Iu,s)),t.replace(Ou,(t=>{const e=t.charCodeAt(0),n=t.charCodeAt(1);return i(1024*(e-55296)+n-56320+65536)})).replace(Mu,s)};function Fu(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function Hu(t,e,...n){return"object"==typeof t&&(n=(t="fragment").children,e=t.attrs),Array.isArray(e)?(n=[e],e={}):e?e.attrs&&delete(e={...e.attrs,...e}).attrs:e={},{tag:t,attrs:e,children:"string"==typeof n[0]?n:n.flat(Number.POSITIVE_INFINITY)}}zu.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var Uu=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","command"];function qu(t,e,n={},r){const o=!("string"==typeof r&&""===r||Array.isArray(r)&&(0===r.length||1===r.length&&""===r[0])||null==r),i=[];if("noop"!==(e=e.replace(/__/g,":"))&&""!==e){"cdata"!==e?i.push(`<${e}`):i.push("<![CDATA[");for(let t in n)if(t&&hd(n,t)){const e=n[t];if("html"===t)continue;"classname"===t.toLowerCase()&&(t="class"),t=t.replace(/__/g,":"),!0===e?i.push(` ${t}`):"style"===t&&"object"==typeof e?i.push(` ${t}="${Object.keys(e).filter((t=>null!=e[t])).map((t=>{let n=e[t];return n="number"==typeof n?`${n}px`:n,`${t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${n}`})).join(";")}"`):!1!==e&&null!=e&&i.push(` ${t}="${Fu(e.toString())}"`)}if("cdata"!==e){if(t&&!o)return i.push(" />"),i.join("");i.push(">")}if(!t&&Uu.includes(e))return i.join("")}if(o)if("string"==typeof r)i.push(r);else if(r&&r.length>0)for(let t of r)if(null!=t&&!1!==t){Array.isArray(t)||(t=[t]);for(const n of t)n.startsWith("<")&&n.endsWith(">")||"script"===e||"style"===e?i.push(n):i.push(Fu(n.toString()))}return n.html&&i.push(n.html),"noop"!==e&&""!==e&&("cdata"!==e?i.push(`</${e}>`):i.push("]]>")),i.join("")}function Vu(t,e,...n){const{tag:r,attrs:o,children:i}=Hu(t,e,n);return qu(!1,r,o,i)}var Wu=qu.bind(null,!1);Vu.firstLine="<!DOCTYPE html>",Vu.html=!0;var Ju={};var Ku=Symbol.for("nodejs.util.inspect.custom"),Gu={fontWeight:"bold"},Yu={fontStyle:"italic"},Xu={backgroundColor:"rgb(255, 250, 165)"},Qu={textDecorations:"underline"},Zu={textDecorations:"line-through"},td={b:Gu,strong:Gu,em:Yu,i:Yu,mark:Xu,u:Qu,a:Qu,s:Zu,del:Zu,ins:Xu,strike:Zu},ed=class t{constructor(){this.append=this.appendChild,this._parentNode=null,this._childNodes=[]}get nodeType(){return console.error("Subclasses should define nodeType!"),0}get nodeName(){return console.error("Subclasses should define nodeName!"),""}get nodeValue(){return null}cloneNode(t=!1){const e=new this.constructor;return t&&(e._childNodes=this._childNodes.map((t=>t.cloneNode(!0))),e._fixChildNodesParent()),e}_fixChildNodesParent(){this._childNodes.forEach((t=>t._parentNode=this))}insertBefore(t,e){if(t!==e){let n=e?this._childNodes.indexOf(e):0;n<0&&(n=0),this._childNodes.splice(n,0,t),this._fixChildNodesParent()}}appendChild(e){if(null!=e)if(e!==this){if(e instanceof ld&&console.warn("No defined how to append a document to a node!",e),e instanceof cd)for(const t of[...e._childNodes])this.appendChild(t);else if(Array.isArray(e))for(const t of[...e])this.appendChild(t);else if(e instanceof t)e.remove(),this._childNodes.push(e);else try{const t="string"==typeof e?e:JSON.stringify(e,null,2);this._childNodes.push(new od(t))}catch(t){console.error(`The data ${e} to be added to ${this.render()} is problematic: ${t}`)}this._fixChildNodesParent()}else console.warn("Cannot appendChild to self")}removeChild(t){const e=this._childNodes.indexOf(t);e>=0&&(t._parentNode=null,this._childNodes.splice(e,1),this._fixChildNodesParent())}remove(){var t;return null==(t=null==this?void 0:this.parentNode)||t.removeChild(this),this}replaceChildren(...t){this._childNodes=t.map((t=>"string"==typeof t?new od(t):t.remove())),this._fixChildNodesParent()}replaceWith(...t){const e=this._parentNode;if(e){const n=this._indexInParent();n>=0&&(t=t.map((t=>"string"==typeof t?new od(t):t.remove())),e._childNodes.splice(n,1,...t),this._parentNode=null,e._fixChildNodesParent())}}_indexInParent(){return this._parentNode?this._parentNode.childNodes.indexOf(this):-1}get parentNode(){return this._parentNode}get childNodes(){return this._childNodes||[]}get children(){return this._childNodes||[]}get firstChild(){return this._childNodes[0]}get lastChild(){return this._childNodes[this._childNodes.length-1]}get nextSibling(){const t=this._indexInParent();return null!=t&&this.parentNode.childNodes[t+1]||null}get previousSibling(){const t=this._indexInParent();return t>0&&this.parentNode.childNodes[t-1]||null}flatten(){const t=[];this instanceof sd&&t.push(this);for(const e of this._childNodes)t.push(...e.flatten());return t}flattenNodes(){const t=[];t.push(this);for(const e of this._childNodes)t.push(...e.flattenNodes());return t}render(){return""}get textContent(){return this._childNodes.map((t=>t.textContent)).join("")}set textContent(t){this._childNodes=[],t&&this.appendChild(new od(t.toString()))}contains(t){return t===this||this._childNodes.some((e=>e.contains(t)))}get ownerDocument(){var e;return this.nodeType===t.DOCUMENT_NODE||this.nodeType===t.DOCUMENT_FRAGMENT_NODE?this:null==(e=null==this?void 0:this._parentNode)?void 0:e.ownerDocument}toString(){return`${this.nodeName}`}[Ku](){return`${this.constructor.name} "${this.render()}"`}};ed.ELEMENT_NODE=1,ed.TEXT_NODE=3,ed.CDATA_SECTION_NODE=4,ed.PROCESSING_INSTRUCTION_NODE=7,ed.COMMENT_NODE=8,ed.DOCUMENT_NODE=9,ed.DOCUMENT_TYPE_NODE=10,ed.DOCUMENT_FRAGMENT_NODE=11;var nd,rd=ed,od=class extends rd{constructor(t=""){super(),this._text=t}get nodeType(){return rd.TEXT_NODE}get nodeName(){return"#text"}get nodeValue(){return this._text||""}get textContent(){return this.nodeValue}render(){var t;const e=null==(t=this.parentNode)?void 0:t.tagName;return"SCRIPT"===e||"STYLE"===e?this._text:Fu(this._text)}cloneNode(t=!1){const e=super.cloneNode(t);return e._text=this._text,e}},id=class extends rd{getElementById(t){return this.flatten().find((e=>e._attributes.id===t))}getElementsByClassName(t){return this.flatten().filter((e=>e.classList.contains(t)))}matches(t){return function(t,e,{debug:n=!1}={}){for(const n of function(t){let e=Ju[t];return null==e&&(e=Tu(t),Ju[t]=e),e}(t)){const r=(e,n)=>{var o,i,s,a;let c=!1;for(const l of n){const{type:u,name:d,action:p,value:h,_ignoreCase:f=!0,data:m}=l;if("attribute"===u)"equals"===p?c=e.getAttribute(d)===h:"start"===p?c=!!(null==(o=e.getAttribute(d))?void 0:o.startsWith(h)):"end"===p?c=!!(null==(i=e.getAttribute(d))?void 0:i.endsWith(h)):"element"===p?c="class"===d?e.classList.contains(h):!!(null==(s=e.getAttribute(d))?void 0:s.includes(h)):"exists"===p?c=e.hasAttribute(d):"any"===p?c=!!(null==(a=e.getAttribute(d))?void 0:a.includes(h)):console.warn("Unknown CSS selector action",p);else if("tag"===u)c=e.tagName===d.toUpperCase();else if("universal"===u)c=!0;else if("pseudo"===u){if("not"===d){let t=!0;m.forEach((n=>{r(e,n)||(t=!1)})),c=!t}}else console.warn("Unknown CSS selector type",u,t,n);if(!c)break}return c};if(r(e,n))return!0}return!1}(t,this)}querySelectorAll(t){return this.flatten().filter((e=>e.matches(t)))}querySelector(t){return this.flatten().find((e=>e.matches(t)))}parent(t){var e;return this.matches(t)?this:null==this.parentNode?null:null==(e=this.parentNode)?void 0:e.parent(t)}handle(t,e){let n=0;for(const r of this.querySelectorAll(t))e(r,n++)}},sd=class extends id{constructor(t="div",e={}){super(),this._originalTagName=t,this._nodeName=(t||"").toUpperCase(),this._attributes=e||{},this._styles=null}get nodeType(){return rd.ELEMENT_NODE}get nodeName(){return this._nodeName}cloneNode(t=!1){const e=super.cloneNode(t);return e._originalTagName=this._originalTagName,e._nodeName=this._nodeName,e._attributes=Object.assign({},this._attributes),e}get attributes(){return Object.entries(this._attributes).map((([t,e])=>({name:t,value:e})))}get attributesObject(){return{...this._attributes}}_findAttributeName(t){const e=t.toLowerCase();return Object.keys(this._attributes).find((t=>e===t.toLowerCase()))||null}setAttribute(t,e){this.removeAttribute(t),this._attributes[t]=e,this._styles=null}getAttribute(t){const e=this._findAttributeName(t),n=e?this._attributes[e]:null;return null==n?null:"string"==typeof n?n:""}removeAttribute(t){this._findAttributeName(String(t))&&delete this._attributes[t]}hasAttribute(t){const e=this._findAttributeName(t);return!!e&&null!=this._attributes[e]}get style(){if(null==this._styles){const e=Object.assign({},td[this.tagName.toLowerCase()]||{}),n=this.getAttribute("style");if(n){let r;const o=/\s*([\w-]+)\s*:\s*([^;]+)/g;for(;r=o.exec(n);){const n=r[1],o=r[2].trim();e[n]=o,e[(t=n,t.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,((t,e)=>e.toUpperCase())))]=o}}this._styles=e}var t;return this._styles}get tagName(){return this._nodeName}setTagName(t){this._nodeName=t.toUpperCase()}get id(){return this._attributes.id||null}set id(t){null==t?delete this._attributes.id:this._attributes.id=t}get src(){return this._attributes.src}set src(t){null==t?delete this._attributes.src:this._attributes.src=t}getElementsByTagName(t){t=t.toUpperCase();const e=this.flatten();return"*"!==t?e.filter((e=>e.tagName===t)):e}setInnerHTML(t){}get innerHTML(){return this._childNodes.map((t=>t.render(Vu))).join("")}set innerHTML(t){this.setInnerHTML(t)}get outerHTML(){return this.render(Wu)}get className(){return this._attributes.class||""}set className(t){Array.isArray(t)?t=t.filter((t=>!!t)).join(" "):"object"==typeof t&&(t=Object.entries(t).filter((([t,e])=>!!e)).map((([t,e])=>t)).join(" ")),this._attributes.class=t}get classList(){var t;const e=this,n=String(null!=(t=this.className)?t:"").trim().split(/\s+/g)||[];return{contains:t=>n.includes(t),add(t){n.includes(t)||(n.push(t),e.className=n)},remove(t){const r=n.indexOf(t);r>=0&&(n.splice(r,1),e.className=n)}}}render(t=Wu){return t(this._originalTagName||this.tagName,this._attributes,this._childNodes.map((e=>e.render(t))).join(""))}},ad=class t extends rd{get nodeName(){return super.nodeName}get nodeValue(){return super.nodeValue}get nodeType(){return t.DOCUMENT_TYPE_NODE}render(){return"<!DOCTYPE html>"}},cd=class t extends id{get nodeType(){return rd.DOCUMENT_FRAGMENT_NODE}get nodeName(){return"#document-fragment"}render(t=Wu){return this._childNodes.map((e=>e.render(t)||[])).join("")}get innerHTML(){return this._childNodes.map((t=>t.render(Vu))).join("")}createElement(t,e={}){return new sd(t,e)}createDocumentFragment(){return new t}createTextNode(t){return new od(t)}},ld=class extends cd{get nodeType(){return rd.DOCUMENT_NODE}get nodeName(){return"#document"}get documentElement(){return this.firstChild}render(t=Wu){let e=super.render(t);return this.docType&&(e=this.docType.render()+e),e}},ud=class extends ld{constructor(t=!1){if(super(),this.docType=new ad,!t){const t=new sd("html"),e=new sd("body"),n=new sd("head"),r=new sd("title");t.appendChild(n),n.appendChild(r),t.appendChild(e),this.appendChild(t)}}get body(){let t=this.querySelector("body");if(!t){let e=this.querySelector("html");e||(e=new sd("html"),this.appendChild(e)),t=new sd("body"),e.appendChild(e)}return t}get title(){var t;return(null==(t=this.querySelector("title"))?void 0:t.textContent)||""}set title(t){const e=this.querySelector("title");e&&(e.textContent=t)}get head(){let t=this.querySelector("head");if(!t){let e=this.querySelector("html");e||(e=new sd("html"),this.appendChild(e)),t=new sd("head"),e.insertBefore(e)}return t}},dd=new ld;(nd={document:dd}).h=function(t,e,...n){const{tag:r,attrs:o,children:i}=Hu(t,e,n);return function(t,e,n,r){if("function"==typeof e)return e({props:{...n,children:r},attrs:n,children:r,h:t.h,context:t});{let o,i=!0;if(e?"fragment"===e.toLowerCase()?(o=t.document.createDocumentFragment(),i=!1):o=t.document.createElement(e):o=t.document.createElement("div"),n&&i){const t=o;for(let[e,r]of Object.entries(n)){e=e.toString();const n=e.toLowerCase();"classname"===n?t.className=r:"on"===n?Object.entries(r).forEach((([e,n])=>{t.setAttribute(`on${e}`,String(n))})):!1!==r&&null!=r&&(!0===r?t.setAttribute(e,e):t.setAttribute(e,r.toString()))}}if(r)for(const e of r){const n=Array.isArray(e)?[...e]:[e];for(const e of n)e&&!1!==e&&null!=e&&("object"!=typeof e?o.appendChild(t.document.createTextNode(e.toString())):o.appendChild(e))}return o}}(nd,r,o,i)},nd.h;var pd={}.hasOwnProperty;function hd(t,e){return pd.call(t,e)}function fd(t,e){const n=function(t,e){return El(jl.resolve(t),e)}(e);return function(t,e){return Di.fromSchema(e).serializeFragment(t.content,{document:new ud}).render()}(ei.fromJSON(n,t),n)}const md=/^\s*>\s$/,gd=mu.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:t}){return["blockquote",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[hu({find:md,type:this.type})]}}),yd=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_d=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,bd=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vd=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,wd=fu.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],renderHTML({HTMLAttributes:t}){return["strong",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[pu({find:yd,type:this.type}),pu({find:bd,type:this.type})]},addPasteRules(){return[yu({find:_d,type:this.type}),yu({find:vd,type:this.type})]}}),xd=mu.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",vl(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kd=fu.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:t}){return["span",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=eu(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),Sd=/^\s*([-+*])\s$/,Ed=mu.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:t}){return["ul",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xd.name,this.editor.getAttributes(kd.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=hu({find:Sd,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=hu({find:Sd,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kd.name),editor:this.editor})),[t]}}),Cd=mu.create({name:"doc",topNode:!0,content:"block+"}),Td=Bl.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new Bs({key:new Hs("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=e,i=[];if(!n||!r)return wc.create(t,[]);let s=0;"deepest"===this.options.mode&&t.descendants(((t,e)=>{if(!t.isText)return o>=e&&o<=e+t.nodeSize-1&&void(s+=1)}));let a=0;return t.descendants(((t,e)=>!t.isText&&(o>=e&&o<=e+t.nodeSize-1&&(a+=1,"deepest"===this.options.mode&&s-a>0||"shallowest"===this.options.mode&&a>1?"deepest"===this.options.mode:void i.push(_c.node(e,e+t.nodeSize,{class:this.options.className})))))),wc.create(t,i)}}})]}}),Ad=mu.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:t}){return["br",vl(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:o}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:s}=r.extensionManager,a=o||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&a&&i){const e=a.filter((t=>s.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Od=mu.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,vl(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>{return e={find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}},new Nl({find:e.find,handler:({state:t,range:n,match:r})=>{const o=t.doc.resolve(n.from),i=xl(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)}});var e}))}}),Nd=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Md=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Dd=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Rd=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Id=fu.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:t}){return["em",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[pu({find:Nd,type:this.type}),pu({find:Dd,type:this.type})]},addPasteRules(){return[yu({find:Md,type:this.type}),yu({find:Rd,type:this.type})]}}),$d="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",jd="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Ld=(t,e)=>{for(const n in e)t[n]=e[n];return t},Pd="numeric",Bd="ascii",zd="alpha",Fd="asciinumeric",Hd="alphanumeric",Ud="domain",qd="emoji",Vd="scheme",Wd="slashscheme",Jd="whitespace";function Kd(t,e){return t in e||(e[t]=[]),e[t]}function Gd(t,e,n){e[Pd]&&(e[Fd]=!0,e[Hd]=!0),e[Bd]&&(e[Fd]=!0,e[zd]=!0),e[Fd]&&(e[Hd]=!0),e[zd]&&(e[Hd]=!0),e[Hd]&&(e[Ud]=!0),e[qd]&&(e[Ud]=!0);for(const r in e){const e=Kd(r,n);e.indexOf(t)<0&&e.push(t)}}function Yd(t){void 0===t&&(t=null),this.j={},this.jr=[],this.jd=null,this.t=t}Yd.groups={},Yd.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let n=0;n<e.jr.length;n++){const r=e.jr[n][0],o=e.jr[n][1];if(o&&r.test(t))return o}return e.jd},has(t,e){return void 0===e&&(e=!1),e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){let o;return r=r||Yd.groups,e&&e.j?o=e:(o=new Yd(e),n&&r&&Gd(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const i=t.length;if(!i)return o;for(let e=0;e<i-1;e++)o=o.tt(t[e]);return o.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||Yd.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const i=e;let s,a=o.go(t);if(a?(s=new Yd,Ld(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Yd,i){if(r)if(s.t&&"string"==typeof s.t){const t=Ld(function(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}(s.t,r),n);Gd(i,t,r)}else n&&Gd(i,n,r);s.t=i}return o.j[t]=s,s}};const Xd=(t,e,n,r,o)=>t.ta(e,n,r,o),Qd=(t,e,n,r,o)=>t.tr(e,n,r,o),Zd=(t,e,n,r,o)=>t.ts(e,n,r,o),tp=(t,e,n,r,o)=>t.tt(e,n,r,o),ep="WORD",np="UWORD",rp="LOCALHOST",op="TLD",ip="UTLD",sp="SCHEME",ap="SLASH_SCHEME",cp="NUM",lp="WS",up="NL",dp="OPENBRACE",pp="CLOSEBRACE",hp="OPENBRACKET",fp="CLOSEBRACKET",mp="OPENPAREN",gp="CLOSEPAREN",yp="OPENANGLEBRACKET",_p="CLOSEANGLEBRACKET",bp="FULLWIDTHLEFTPAREN",vp="FULLWIDTHRIGHTPAREN",wp="LEFTCORNERBRACKET",xp="RIGHTCORNERBRACKET",kp="LEFTWHITECORNERBRACKET",Sp="RIGHTWHITECORNERBRACKET",Ep="FULLWIDTHLESSTHAN",Cp="FULLWIDTHGREATERTHAN",Tp="AMPERSAND",Ap="APOSTROPHE",Op="ASTERISK",Np="AT",Mp="BACKSLASH",Dp="BACKTICK",Rp="CARET",Ip="COLON",$p="COMMA",jp="DOLLAR",Lp="DOT",Pp="EQUALS",Bp="EXCLAMATION",zp="HYPHEN",Fp="PERCENT",Hp="PIPE",Up="PLUS",qp="POUND",Vp="QUERY",Wp="QUOTE",Jp="SEMI",Kp="SLASH",Gp="TILDE",Yp="UNDERSCORE",Xp="EMOJI",Qp="SYM";var Zp=Object.freeze({__proto__:null,WORD:ep,UWORD:np,LOCALHOST:rp,TLD:op,UTLD:ip,SCHEME:sp,SLASH_SCHEME:ap,NUM:cp,WS:lp,NL:up,OPENBRACE:dp,CLOSEBRACE:pp,OPENBRACKET:hp,CLOSEBRACKET:fp,OPENPAREN:mp,CLOSEPAREN:gp,OPENANGLEBRACKET:yp,CLOSEANGLEBRACKET:_p,FULLWIDTHLEFTPAREN:bp,FULLWIDTHRIGHTPAREN:vp,LEFTCORNERBRACKET:wp,RIGHTCORNERBRACKET:xp,LEFTWHITECORNERBRACKET:kp,RIGHTWHITECORNERBRACKET:Sp,FULLWIDTHLESSTHAN:Ep,FULLWIDTHGREATERTHAN:Cp,AMPERSAND:Tp,APOSTROPHE:Ap,ASTERISK:Op,AT:Np,BACKSLASH:Mp,BACKTICK:Dp,CARET:Rp,COLON:Ip,COMMA:$p,DOLLAR:jp,DOT:Lp,EQUALS:Pp,EXCLAMATION:Bp,HYPHEN:zp,PERCENT:Fp,PIPE:Hp,PLUS:Up,POUND:qp,QUERY:Vp,QUOTE:Wp,SEMI:Jp,SLASH:Kp,TILDE:Gp,UNDERSCORE:Yp,EMOJI:Xp,SYM:Qp});const th=/[a-z]/,eh=/\p{L}/u,nh=/\p{Emoji}/u,rh=/\d/,oh=/\s/,ih="\n",sh="",ah="";let ch=null,lh=null;function uh(t,e,n,r,o){let i;const s=e.length;for(let n=0;n<s-1;n++){const s=e[n];t.j[s]?i=t.j[s]:(i=new Yd(r),i.jr=o.slice(),t.j[s]=i),t=i}return i=new Yd(n),i.jr=o.slice(),t.j[e[s-1]]=i,i}function dh(t){const e=[],n=[];let r=0;for(;r<t.length;){let o=0;for(;"0123456789".indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let e=parseInt(t.substring(r,r+o),10);e>0;e--)n.pop();r+=o}else n.push(t[r]),r++}return e}const ph={defaultProtocol:"http",events:null,format:fh,formatHref:fh,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function hh(t,e){void 0===e&&(e=null);let n=Ld({},ph);t&&(n=Ld(n,t instanceof hh?t.o:t));const r=n.ignoreTags,o=[];for(let t=0;t<r.length;t++)o.push(r[t].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}function fh(t){return t}function mh(t,e){this.t="token",this.v=t,this.tk=e}function gh(t,e){class n extends mh{constructor(e,n){super(e,n),this.t=t}}for(const t in e)n.prototype[t]=e[t];return n.t=t,n}hh.prototype={o:ph,ignoreTags:[],defaultRender:t=>t,check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=null!=e;let o=this.o[t];return o?("object"==typeof o?(o=n.t in o?o[n.t]:ph[t],"function"==typeof o&&r&&(o=o(e,n))):"function"==typeof o&&r&&(o=o(e,n.t,n)),o):o},getObj(t,e,n){let r=this.o[t];return"function"==typeof r&&null!=e&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}},mh.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t){return void 0===t&&(t=ph.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),s={},a=t.get("className",n,e),c=t.get("target",n,e),l=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),c&&(s.target=c),l&&(s.rel=l),u&&Ld(s,u),{tagName:o,attributes:s,content:i,eventListeners:d}}};const yh=gh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),_h=gh("text"),bh=gh("nl"),vh=gh("url",{isLink:!0,toHref(t){return void 0===t&&(t=ph.defaultProtocol),this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==rp&&t[1].t===Ip}}),wh=t=>new Yd(t);function xh(t,e,n){const r=n[0].s,o=n[n.length-1].e;return new t(e.slice(r,o),n)}const kh="undefined"!=typeof console&&console&&console.warn||(()=>{}),Sh={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Eh(t,e){if(void 0===e&&(e=!1),Sh.initialized&&kh(`linkifyjs: already initialized - will not register custom scheme "${t}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');Sh.customSchemes.push([t,e])}function Ch(t){return Sh.initialized||function(){Sh.scanner=function(t){void 0===t&&(t=[]);const e={};Yd.groups=e;const n=new Yd;null==ch&&(ch=dh($d)),null==lh&&(lh=dh(jd)),tp(n,"'",Ap),tp(n,"{",dp),tp(n,"}",pp),tp(n,"[",hp),tp(n,"]",fp),tp(n,"(",mp),tp(n,")",gp),tp(n,"<",yp),tp(n,">",_p),tp(n,"",bp),tp(n,"",vp),tp(n,"",wp),tp(n,"",xp),tp(n,"",kp),tp(n,"",Sp),tp(n,"",Ep),tp(n,"",Cp),tp(n,"&",Tp),tp(n,"*",Op),tp(n,"@",Np),tp(n,"`",Dp),tp(n,"^",Rp),tp(n,":",Ip),tp(n,",",$p),tp(n,"$",jp),tp(n,".",Lp),tp(n,"=",Pp),tp(n,"!",Bp),tp(n,"-",zp),tp(n,"%",Fp),tp(n,"|",Hp),tp(n,"+",Up),tp(n,"#",qp),tp(n,"?",Vp),tp(n,'"',Wp),tp(n,"/",Kp),tp(n,";",Jp),tp(n,"~",Gp),tp(n,"_",Yp),tp(n,"\\",Mp);const r=Qd(n,rh,cp,{[Pd]:!0});Qd(r,rh,r);const o=Qd(n,th,ep,{[Bd]:!0});Qd(o,th,o);const i=Qd(n,eh,np,{[zd]:!0});Qd(i,th),Qd(i,eh,i);const s=Qd(n,oh,lp,{[Jd]:!0});tp(n,ih,up,{[Jd]:!0}),tp(s,ih),Qd(s,oh,s);const a=Qd(n,nh,Xp,{[qd]:!0});Qd(a,nh,a),tp(a,sh,a);const c=tp(a,ah);Qd(c,nh,a);const l=[[th,o]],u=[[th,null],[eh,i]];for(let t=0;t<ch.length;t++)uh(n,ch[t],op,ep,l);for(let t=0;t<lh.length;t++)uh(n,lh[t],ip,np,u);Gd(op,{tld:!0,ascii:!0},e),Gd(ip,{utld:!0,alpha:!0},e),uh(n,"file",sp,ep,l),uh(n,"mailto",sp,ep,l),uh(n,"http",ap,ep,l),uh(n,"https",ap,ep,l),uh(n,"ftp",ap,ep,l),uh(n,"ftps",ap,ep,l),Gd(sp,{scheme:!0,ascii:!0},e),Gd(ap,{slashscheme:!0,ascii:!0},e),t=t.sort(((t,e)=>t[0]>e[0]?1:-1));for(let e=0;e<t.length;e++){const r=t[e][0],o=t[e][1]?{[Vd]:!0}:{[Wd]:!0};r.indexOf("-")>=0?o[Ud]=!0:th.test(r)?rh.test(r)?o[Fd]=!0:o[Bd]=!0:o[Pd]=!0,Zd(n,r,r,o)}return Zd(n,"localhost",rp,{ascii:!0}),n.jd=new Yd(Qp),{start:n,tokens:Ld({groups:e},Zp)}}(Sh.customSchemes);for(let t=0;t<Sh.tokenQueue.length;t++)Sh.tokenQueue[t][1]({scanner:Sh.scanner});Sh.parser=function(t){let{groups:e}=t;const n=e.domain.concat([Tp,Op,Np,Mp,Dp,Rp,jp,Pp,zp,cp,Fp,Hp,Up,qp,Kp,Qp,Gp,Yp]),r=[Ap,Ip,$p,Lp,Bp,Vp,Wp,Jp,yp,_p,dp,pp,fp,hp,mp,gp,bp,vp,wp,xp,kp,Sp,Ep,Cp],o=[Tp,Ap,Op,Mp,Dp,Rp,jp,Pp,zp,dp,pp,Fp,Hp,Up,qp,Vp,Kp,Qp,Gp,Yp],i=wh(),s=tp(i,Gp);Xd(s,o,s),Xd(s,e.domain,s);const a=wh(),c=wh(),l=wh();Xd(i,e.domain,a),Xd(i,e.scheme,c),Xd(i,e.slashscheme,l),Xd(a,o,s),Xd(a,e.domain,a);const u=tp(a,Np);tp(s,Np,u),tp(c,Np,u),tp(l,Np,u);const d=tp(s,Lp);Xd(d,o,s),Xd(d,e.domain,s);const p=wh();Xd(u,e.domain,p),Xd(p,e.domain,p);const h=tp(p,Lp);Xd(h,e.domain,p);const f=wh(yh);Xd(h,e.tld,f),Xd(h,e.utld,f),tp(u,rp,f);const m=tp(p,zp);Xd(m,e.domain,p),Xd(f,e.domain,p),tp(f,Lp,h),tp(f,zp,m);const g=tp(f,Ip);Xd(g,e.numeric,yh);const y=tp(a,zp),_=tp(a,Lp);Xd(y,e.domain,a),Xd(_,o,s),Xd(_,e.domain,a);const b=wh(vh);Xd(_,e.tld,b),Xd(_,e.utld,b),Xd(b,e.domain,a),Xd(b,o,s),tp(b,Lp,_),tp(b,zp,y),tp(b,Np,u);const v=tp(b,Ip),w=wh(vh);Xd(v,e.numeric,w);const x=wh(vh),k=wh();Xd(x,n,x),Xd(x,r,k),Xd(k,n,x),Xd(k,r,k),tp(b,Kp,x),tp(w,Kp,x);const S=tp(c,Ip),E=tp(l,Ip),C=tp(E,Kp),T=tp(C,Kp);Xd(c,e.domain,a),tp(c,Lp,_),tp(c,zp,y),Xd(l,e.domain,a),tp(l,Lp,_),tp(l,zp,y),Xd(S,e.domain,x),tp(S,Kp,x),Xd(T,e.domain,x),Xd(T,n,x),tp(T,Kp,x);const A=[[dp,pp],[hp,fp],[mp,gp],[yp,_p],[bp,vp],[wp,xp],[kp,Sp],[Ep,Cp]];for(let t=0;t<A.length;t++){const[e,o]=A[t],i=tp(x,e);tp(k,e,i),tp(i,o,x);const s=wh(vh);Xd(i,n,s);const a=wh();Xd(i,r),Xd(s,n,s),Xd(s,r,a),Xd(a,n,s),Xd(a,r,a),tp(s,o,x),tp(a,o,x)}return tp(i,rp,b),tp(i,up,bh),{start:i,tokens:Zp}}(Sh.scanner.tokens);for(let t=0;t<Sh.pluginQueue.length;t++)Sh.pluginQueue[t][1]({scanner:Sh.scanner,parser:Sh.parser});Sh.initialized=!0}(),function(t,e,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=t,c=null,l=null,u=0,d=null,p=-1;for(;o<r&&!(c=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(l=c||a.go(n[o].t));)c=null,a=l,a.accepts()?(p=0,d=a):p>=0&&p++,o++,u++;if(p<0)o-=u,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(xh(_h,e,s)),s=[]),o-=p,u-=p;const t=d.t,r=n.slice(o-u,o);i.push(xh(t,e,r))}}return s.length>0&&i.push(xh(_h,e,s)),i}(Sh.parser.start,t,function(t,e){const n=function(t){const e=[],n=t.length;let r=0;for(;r<n;){let o,i=t.charCodeAt(r),s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}(e.replace(/[A-Z]/g,(t=>t.toLowerCase()))),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=t,c=null,l=0,u=null,d=-1,p=-1;for(;s<r&&(c=a.go(n[s]));)a=c,a.accepts()?(d=0,p=0,u=a):d>=0&&(d+=n[s].length,p++),l+=n[s].length,i+=n[s].length,s++;i-=d,s-=p,l-=d,o.push({t:u.t,v:e.slice(i-l,i),s:i-l,e:i})}return o}(Sh.scanner.start,t))}function Th(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),e&&"object"==typeof e){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new hh(n),o=Ch(t),i=[];for(let t=0;t<o.length;t++){const n=o[t];!n.isLink||e&&n.t!==e||!r.check(n)||i.push(n.toFormattedObject(r))}return i}function Ah(t){return new Bs({key:new Hs("autolink"),appendTransaction:(e,n,r)=>{const o=e.some((t=>t.docChanged))&&!n.doc.eq(r.doc),i=e.some((t=>t.getMeta("preventAutolink")));if(!o||i)return;const{tr:s}=r,a=function(t,e){const n=new xs(t);return e.forEach((t=>{t.steps.forEach((t=>{n.step(t)}))})),n}(n.doc,[...e]),c=function(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach(((t,o)=>{const i=[];if(t.ranges.length)t.forEach(((t,e)=>{i.push({from:t,to:e})}));else{const{from:t,to:e}=n[o];if(void 0===t||void 0===e)return;i.push({from:t,to:e})}i.forEach((({from:t,to:n})=>{const i=e.slice(o).map(t,-1),s=e.slice(o).map(n),a=e.invert().map(i,-1),c=e.invert().map(s);r.push({oldRange:{from:a,to:c},newRange:{from:i,to:s}})}))})),function(t){const e=function(t,e=JSON.stringify){const n={};return t.filter((t=>{const r=e(t);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)}))}(t);return 1===e.length?e:e.filter(((t,n)=>{const r=e.filter(((t,e)=>e!==n));return!r.some((e=>t.oldRange.from>=e.oldRange.from&&t.oldRange.to<=e.oldRange.to&&t.newRange.from>=e.newRange.from&&t.newRange.to<=e.newRange.to))}))}(r)}(a);return c.forEach((({newRange:e})=>{const n=function(t,e){const n=[];return t.nodesBetween(e.from,e.to,((t,e)=>{(t=>t.isTextblock)(t)&&n.push({node:t,pos:e})})),n}(r.doc,e);let o,i;if(n.length>1?(o=n[0],i=r.doc.textBetween(o.pos,o.pos+o.node.nodeSize,void 0," ")):n.length&&r.doc.textBetween(e.from,e.to," "," ").endsWith(" ")&&(o=n[0],i=r.doc.textBetween(o.pos,e.to,void 0," ")),o&&i){const e=i.split(" ").filter((t=>""!==t));if(e.length<=0)return!1;const n=e[e.length-1],c=o.pos+i.lastIndexOf(n);if(!n)return!1;const l=Ch(n).map((e=>e.toObject(t.defaultProtocol)));if(!(1===(a=l).length?a[0].isLink:3===a.length&&a[1].isLink&&["()","[]"].includes(a[0].value+a[2].value)))return!1;l.filter((t=>t.isLink)).map((t=>({...t,from:c+t.start+1,to:c+t.end+1}))).filter((t=>!r.schema.marks.code||!r.doc.rangeHasMark(t.from,t.to,r.schema.marks.code))).filter((e=>t.validate(e.value))).forEach((e=>{ru(e.from,e.to,r.doc).some((e=>e.mark.type===t.type))||s.addMark(e.from,e.to,t.type.create({href:e.href}))}))}var a})),s.steps.length?s:void 0}})}const Oh=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Nh(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach((t=>{const e="string"==typeof t?t:t.scheme;e&&n.push(e)})),!t||t.replace(Oh,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Mh=fu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach((t=>{"string"!=typeof t?Eh(t.scheme,t.optionalSlashes):Eh(t)}))},onDestroy(){Yd.groups={},Sh.scanner=null,Sh.parser=null,Sh.tokenQueue=[],Sh.pluginQueue=[],Sh.customSchemes=[],Sh.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:t=>!!t}),addAttributes(){return{href:{default:null,parseHTML:t=>t.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!(!e||!Nh(e,this.options.protocols))&&null}}]},renderHTML({HTMLAttributes:t}){return Nh(t.href,this.options.protocols)?["a",vl(this.options.HTMLAttributes,t),0]:["a",vl(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[yu({find:t=>{const e=[];if(t){const{validate:n}=this.options,r=Th(t).filter((t=>t.isLink&&n(t.value)));r.length&&r.forEach((t=>e.push({text:t.value,data:{href:t.href},index:t.start})))}return e},type:this.type,getAttributes:t=>{var e;return{href:null===(e=t.data)||void 0===e?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(Ah({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),!0===this.options.openOnClick&&t.push((e={type:this.type},new Bs({key:new Hs("handleClickLink"),props:{handleClick:(t,n,r)=>{var o,i;if(0!==r.button)return!1;if(!t.editable)return!1;let s=r.target;const a=[];for(;"DIV"!==s.nodeName;)a.push(s),s=s.parentNode;if(!a.find((t=>"A"===t.nodeName)))return!1;const c=function(t,e){const n=Zl("string"==typeof e?e:e.name,t.schema);return"node"===n?function(t,e){const n=bl(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,(t=>{i.push(t)}));const s=i.reverse().find((t=>t.type.name===n.name));return s?{...s.attrs}:{}}(t,e):"mark"===n?eu(t,e):{}}(t.state,e.type.name),l=r.target,u=null!==(o=null==l?void 0:l.href)&&void 0!==o?o:c.href,d=null!==(i=null==l?void 0:l.target)&&void 0!==i?i:c.target;return!(!l||!u||(window.open(u,d),0))}}}))),this.options.linkOnPaste&&t.push(function(t){return new Bs({key:new Hs("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach((t=>{a+=t.textContent}));const c=Th(a,{defaultProtocol:t.defaultProtocol}).find((t=>t.isLink&&t.value===a));return!(!a||!c||(t.editor.commands.setMark(t.type,{href:c.href}),0))}}})}({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t;var e}}),Dh=mu.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",vl(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Rh=mu.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:t}){return["li",vl(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ih=fu.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:t=>!!t.hasAttribute("style")&&{}}],renderHTML({HTMLAttributes:t}){return["span",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=eu(t,this.type);return!!Object.entries(n).some((([,t])=>!!t))||e.unsetMark(this.name)}}}}),$h=/^(\d+)\.\s$/,jh=mu.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",vl(this.options.HTMLAttributes,n),0]:["ol",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Rh.name,this.editor.getAttributes(Ih.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=hu({find:$h,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=hu({find:$h,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Ih.name)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[t]}}),Lh=mu.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:t}){return["p",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Ph=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Bh=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,zh=fu.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}],renderHTML({HTMLAttributes:t}){return["s",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[pu({find:Ph,type:this.type})]},addPasteRules(){return[yu({find:Bh,type:this.type})]}}),Fh=mu.create({name:"text",group:"inline"}),Hh=Bl.create({name:"textAlign",addOptions:()=>({types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}),addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${t.textAlign}`}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>!!this.options.alignments.includes(t)&&this.options.types.map((n=>e.updateAttributes(n,{textAlign:t}))).every((t=>t)),unsetTextAlign:()=>({commands:t})=>this.options.types.map((e=>t.resetAttributes(e,"textAlign"))).every((t=>t))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Uh=fu.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("underline")&&{}}],renderHTML({HTMLAttributes:t}){return["u",vl(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});var qh,Vh={exports:{}},Wh={};Vh.exports=function(){if(qh)return Wh;qh=1;var t=gr,e="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=t.useState,r=t.useEffect,o=t.useLayoutEffect,i=t.useDebugValue;function s(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!e(t,r)}catch(t){return!0}}var a="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var a=e(),c=n({inst:{value:a,getSnapshot:e}}),l=c[0].inst,u=c[1];return o((function(){l.value=a,l.getSnapshot=e,s(l)&&u({inst:l})}),[t,a,e]),r((function(){return s(l)&&u({inst:l}),t((function(){s(l)&&u({inst:l})}))}),[t]),i(a),a};return Wh.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:a,Wh}();var Jh=Vh.exports;const Kh=(...t)=>e=>{t.forEach((t=>{"function"==typeof t?t(e):t&&(t.current=e)}))},Gh=({contentComponent:t})=>{const e=Jh.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return gr.createElement(gr.Fragment,null,Object.values(e))};class Yh extends gr.Component{constructor(t){var e;super(t),this.editorContentRef=gr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(e=t.editor)||void 0===e?void 0:e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.options.element.childNodes),t.setOptions({element:e}),t.contentComponent=function(){const t=new Set;let e={};return{subscribe:e=>(t.add(e),()=>{t.delete(e)}),getSnapshot:()=>e,getServerSnapshot:()=>e,setRenderer(n,r){e={...e,[n]:fr.createPortal(r.reactElement,r.element,n)},t.forEach((t=>t()))},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach((t=>t()))}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe((()=>{this.setState((t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0})),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()}))),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const t=this.props.editor;if(!t)return;if(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild)return;const e=document.createElement("div");e.append(...t.options.element.childNodes),t.setOptions({element:e})}render(){const{editor:t,innerRef:e,...n}=this.props;return gr.createElement(gr.Fragment,null,gr.createElement("div",{ref:Kh(e,this.editorContentRef),...n}),(null==t?void 0:t.contentComponent)&&gr.createElement(Gh,{contentComponent:t.contentComponent}))}}const Xh=(0,gr.forwardRef)(((t,e)=>{const n=gr.useMemo((()=>Math.floor(4294967295*Math.random()).toString()),[t.editor]);return gr.createElement(Yh,{key:n,innerRef:e,...t})}));gr.memo(Xh);var Qh,Zh={exports:{}},tf={};Zh.exports=function(){if(Qh)return tf;Qh=1;var t=gr,e=Jh,n="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},r=e.useSyncExternalStore,o=t.useRef,i=t.useEffect,s=t.useMemo,a=t.useDebugValue;return tf.useSyncExternalStoreWithSelector=function(t,e,c,l,u){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=s((function(){function t(t){if(!i){if(i=!0,r=t,t=l(t),void 0!==u&&p.hasValue){var e=p.value;if(u(e,t))return o=e}return o=t}if(e=o,n(r,t))return e;var s=l(t);return void 0!==u&&u(e,s)?e:(r=t,o=s)}var r,o,i=!1,s=void 0===c?null:c;return[function(){return t(e())},null===s?void 0:function(){return t(s())}]}),[e,c,l,u]);var h=r(t,d[0],d[1]);return i((function(){p.hasValue=!0,p.value=h}),[h]),a(h),h},tf}(),Zh.exports;"undefined"==typeof window||Boolean("undefined"!=typeof window&&window.next);(0,gr.createContext)({editor:null}).Consumer;const ef=(0,gr.createContext)({onDragStart:void 0}),nf=gr.forwardRef(((t,e)=>{const{onDragStart:n}=(0,gr.useContext)(ef),r=t.as||"div";return gr.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})}));class rf{constructor(t,{editor:e,props:n={},as:r="div",className:o="",attrs:i}){this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=t,this.editor=e,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),i&&Object.keys(i).forEach((t=>{this.element.setAttribute(t,i[t])})),this.editor.isInitialized?(0,fr.flushSync)((()=>{this.render()})):this.render()}render(){var t;const e=this.component,n=this.props,r=this.editor;(function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)||function(t){var e;return!("object"!=typeof t||"Symbol(react.forward_ref)"!==(null===(e=t.$$typeof)||void 0===e?void 0:e.toString()))}(e))&&(n.ref=t=>{this.ref=t}),this.reactElement=gr.createElement(e,n),null===(t=null==r?void 0:r.contentComponent)||void 0===t||t.setRenderer(this.id,this)}updateProps(t={}){this.props={...this.props,...t},this.render()}destroy(){var t;const e=this.editor;null===(t=null==e?void 0:e.contentComponent)||void 0===t||t.removeRenderer(this.id)}}class of extends gu{mount(){const t={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(t={})=>this.updateAttributes(t),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const t=t=>t.charAt(0).toUpperCase()+t.substring(1);this.component.displayName=t(this.extension.name)}const e={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:t=>{t&&this.contentDOMElement&&t.firstChild!==this.contentDOMElement&&t.appendChild(this.contentDOMElement)}},n=this.component,r=gr.memo((t=>gr.createElement(ef.Provider,{value:e},gr.createElement(n,t))));r.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let o=this.node.isInline?"span":"div";this.options.as&&(o=this.options.as);const{className:i=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new rf(r,{editor:this.editor,props:t,as:o,className:`node-${this.node.type.name} ${i}`.trim(),attrs:this.options.attrs})}get dom(){var t;if(this.renderer.element.firstElementChild&&!(null===(t=this.renderer.element.firstElementChild)||void 0===t?void 0:t.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:t,to:e}=this.editor.state.selection;if(t<=this.getPos()&&e>=this.getPos()+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(t,e){const n=t=>{this.renderer.updateProps(t)};if(t.type!==this.node.type)return!1;if("function"==typeof this.options.update){const r=this.node,o=this.decorations;return this.node=t,this.decorations=e,this.options.update({oldNode:r,oldDecorations:o,newNode:t,newDecorations:e,updateProps:()=>n({node:t,decorations:e})})}return t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,n({node:t,decorations:e})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}}function sf(){return(0,_r.jsx)(nf,{className:"story__ad-container",children:(0,_r.jsx)(co,{adType:oo,page:"story"})})}const af=mu.create({name:"adComponent",group:"block",parseHTML:()=>[{tag:"ad-component"}],renderHTML(t){let{HTMLAttributes:e}=t;return["ad-component",vl(e)]},addNodeView:()=>{return t=sf,e=>e.editor.contentComponent?new of(t,e,void 0):{};var t}});function cf(t){const e=[];for(const n of["2x","3x"])t.searchParams.set("width",""+_o*parseInt(n)),e.push(`${t.toString()} ${n}`);return e.join(", ")}const lf=mu.create({name:"figure",group:"block",content:"caption credit",addExtensions:()=>[pf,df],parseHTML:()=>[{tag:"figure"}],addAttributes:()=>({segmentId:{default:null},src:{default:null,parseHTML:t=>t.querySelector("img")?.getAttribute("src")},alt:{default:"",parseHTML:t=>t.querySelector("img")?.getAttribute("alt")??""},title:{default:null,parseHTML:t=>t.querySelector("img")?.getAttribute("title")},width:{default:null,parseHTML:t=>t.querySelector("img")?.getAttribute("width")},height:{default:null,parseHTML:t=>t.querySelector("img")?.getAttribute("height")},href:{default:null,parseHTML:t=>t.querySelector("a")?.getAttribute("href")}}),renderHTML(t){let{HTMLAttributes:{href:e,src:n,...r}}=t;const o="string"==typeof n?new URL(n):null;o&&(o.searchParams.set("width",_o.toString()),o.searchParams.set("quality","85,50"));const i=o?["img",vl(r,{loading:"lazy",src:o,srcset:cf(o)})]:null;return["figure",this.options?.HTMLAttributes||{},"string"==typeof e&&e.length>0?["a",{href:e,rel:"noopener noreferrer",style:"display: block;",target:"_blank"},i]:i,["div",0]]}}),uf=mu.create({name:"figcaption",content:"inline*",group:"figure",marks:"",addAttributes:()=>({placeholder:{default:""}}),parseHTML:()=>[{tag:"figcaption"}],renderHTML:()=>["figcaption",0]}),df=uf.extend({name:"caption",addAttributes:()=>({placeholder:{default:"Add caption for this image (optional)"}}),parseHTML:()=>[{tag:"figcaption.caption"}]}),pf=uf.extend({name:"credit",addAttributes:()=>({placeholder:{default:"Add credit for this image (optional)"}}),parseHTML:()=>[{tag:"figcaption.credit"}]}),hf=[Cd,Fh,jh,Ed,gd.extend({group:"block",content:"inline*",draggable:!0,addAttributes:()=>({segmentId:{default:null}})}),lf,Od,Lh,Dh,Hh.configure({types:["heading","paragraph","blockquote"]}),wd,Id,zh,Uh,Mh.configure({openOnClick:!1}),Ad,Td,af];function ff(t){let{content:e}=t;const n=(0,gr.useMemo)((()=>fd(e,hf)),[e]);return(0,_r.jsx)("div",{className:"EditorViewV3",dangerouslySetInnerHTML:{__html:n}})}function mf(t){const{bgImageSrc:e,lang:n,title:r,readTimeMinutes:o}=t;return(0,_r.jsxs)("header",{className:"Header",itemProp:"image",children:[(0,_r.jsx)("img",{alt:`Cover for ${r}`,className:"Header__Image",height:_o/4*3,width:_o,...vo(e)}),(0,_r.jsx)("div",{className:"Header__Gradient"}),(0,_r.jsxs)(lo,{className:"Header__Content",children:[(0,_r.jsxs)(Br,{style:{textTransform:"uppercase",letterSpacing:"0.14285714em"},visualSize:"sm",children:[o||1," minute read"]}),(0,_r.jsx)(mo,{itemProp:"headline",lang:n,level:1,visualSize:"sm",children:r})]})]})}const gf=(0,gr.memo)(mf);var yf={badge:"Badge__badge__V11MP__0-0-3287","badge--solid":"Badge__badge--solid__W5nq4__0-0-3287","badge--warning":"Badge__badge--warning__WCMr8__0-0-3287","badge--neutral":"Badge__badge--neutral__yNtvJ__0-0-3287","badge--secondary":"Badge__badge--secondary__7H-Eb__0-0-3287","badge--danger":"Badge__badge--danger__qG3-9__0-0-3287","badge--success":"Badge__badge--success__cD1jd__0-0-3287","badge--outline":"Badge__badge--outline__5DSgg__0-0-3287","badge--medium":"Badge__badge--medium__4sJhJ__0-0-3287"};const _f="badge";function bf(t){let{children:e,className:n,size:r="small",type:o="solid",variant:i="default"}=t;const s=jr()(n,yf[_f],yf[`${_f}--${o}`],{[yf[`${_f}--${i}`]]:"default"!==i,[yf[`${_f}--${r}`]]:"small"!==r});return gr.createElement("span",{className:s},e)}var vf={"publication-card":"PublicationCard__publication-card__dZd0M__0-0-3287","publication-card--xs":"PublicationCard__publication-card--xs__kiYrJ__0-0-3287","publication-card--sm":"PublicationCard__publication-card--sm__ji7-l__0-0-3287","publication-card--md":"PublicationCard__publication-card--md__gR-Ne__0-0-3287","publication-card--lg":"PublicationCard__publication-card--lg__x-ORm__0-0-3287","publication-card__promoted":"PublicationCard__publication-card__promoted__uwMdx__0-0-3287","publication-card__card-link":"PublicationCard__publication-card__card-link__hUKEG__0-0-3287","publication-card__cover-img":"PublicationCard__publication-card__cover-img__5ibKR__0-0-3287","publication-card__cover-frame":"PublicationCard__publication-card__cover-frame__6jbWI__0-0-3287","publication-card__label":"PublicationCard__publication-card__label__gGc5Q__0-0-3287","publication-card__cover-wrapper":"PublicationCard__publication-card__cover-wrapper__aCt5I__0-0-3287","publication-card__title-container":"PublicationCard__publication-card__title-container__vcS8E__0-0-3287","publication-card__card-title":"PublicationCard__publication-card__card-title__jufAN__0-0-3287","publication-card__price":"PublicationCard__publication-card__price__SATkI__0-0-3287","publication-card__title-compensator":"PublicationCard__publication-card__title-compensator__dayGP__0-0-3287","publication-card__meta":"PublicationCard__publication-card__meta__aO2ik__0-0-3287","publication-card__author-link":"PublicationCard__publication-card__author-link__-bT0k__0-0-3287"};const wf="publication-card";function xf(t){let{availability:e}=t;return gr.createElement("div",{className:vf[`${wf}__label`]},gr.createElement(bf,{variant:"private"===e?"default":"secondary",size:"medium"},"private"===e?"Internal":"Unlisted"))}const kf=(t,e)=>{let{authorName:n,authorUrl:r,className:o,imageAlt:i="",availability:s,imageRatio:a,imageSrc:c,isPromoted:l,onClick:u,pagesAmount:d,price:p,publishDate:h,title:f,titleLang:m,url:g}=t;const y=Math.max(a,.7),_=jr()(o,vf[wf]),b=vf[`${wf}__cover-wrapper`],v=vf[`${wf}__meta`];return gr.createElement("div",{"data-testid":"publication-card",ref:e,className:_},l&&gr.createElement("div",{className:vf[`${wf}__promoted`]},"Promoted"),gr.createElement("a",{href:g,className:vf[`${wf}__card-link`],onClick:u},gr.createElement("div",{className:b,style:{aspectRatio:`${y}`},"aria-hidden":"true"},gr.createElement("div",{className:vf[`${wf}__cover-frame`]},gr.createElement("img",{className:vf[`${wf}__cover-img`],alt:i,style:{aspectRatio:`${a}`},src:c}),("private"===s||"unlisted"===s)&&gr.createElement(xf,{availability:s}))),gr.createElement("div",{className:vf[`${wf}__title-container`]},gr.createElement("h3",{className:vf[`${wf}__card-title`],"data-testid":"publication-card-title",lang:m},f)),p&&gr.createElement("div",{className:vf[`${wf}__price`]},function(t){let{amount:e,currency:n}=t;return new Intl.NumberFormat("en-US",{maximumFractionDigits:2,minimumFractionDigits:2,style:"currency",currency:n,currencyDisplay:["GBP","USD","EUR","INR","JPY"].includes(n)?"narrowSymbol":"code"}).format(e/100).replace(/^(\S+)\s+(\S+)$/,"$2 $1")}(p))),gr.createElement("div",{className:vf[`${wf}__title-compensator`]},gr.createElement("div",{className:vf[`${wf}__card-title`]},gr.createElement("br",null))),h&&gr.createElement("div",{className:v},function(t){return new Date(t.year,t.month-1,t.day).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}(h)),n&&gr.createElement("div",{className:v},"by ",r?gr.createElement("a",{className:vf[`${wf}__author-link`],href:r},n):n),d&&gr.createElement("div",{className:v},gr.createElement("div",null,`${d} ${1===d?"page":"pages"}`)))};var Sf=gr.forwardRef(kf);function Ef(t){return(0,_r.jsx)("section",{className:"PublicationInfo",children:(0,_r.jsxs)(lo,{className:"PublicationInfo__Content",children:[(0,_r.jsx)(mo,{level:2,visualSize:"2xs",children:"This article is from:"}),(0,_r.jsx)("div",{className:"PublicationInfo__Publication",children:(0,_r.jsx)(Sf,{...t})})]})})}function Cf(t){let{adElement:e,content:n,detectedLanguage:r,publisherAvatarFallbackUrl:o,publisherAvatarUrl:i,publisherDisplayName:s,publisherUrl:a,publicationUrl:c,publicationTitle:l,isTeamsAccount:u,isProd:d,readTimeMinutes:p,publicationCoverUrl:h,title:f,shareElement:m,onPublicationClicked:g,onPublisherClicked:y,nextElement:_,moreStories:b,createdAt:v,coverImageUrl:w}=t;const x=(0,gr.useMemo)((()=>e&&n.json?(t=>{if(!t.content)return t;if(0===t.content.length)return t;const e={...t,content:[...t.content]};return e.content.splice(2,0,{type:"adComponent"}),e})(n.json):n.json),[n.json]);if(2===n.version){const t=n.json[0];"header"===t.type&&(w=t.header.photo&&t.header.photo.imageUrl,f=t.header.headline.text||f)}const k=d?"https://static.isu.pub/fe/default-story-images/news.jpg":"https://static-tissuu.isu.pub/fe/default-story-images/news.jpg ";return(0,_r.jsxs)("article",{className:"ContentView",itemScope:!0,itemType:"http://schema.org/Article",children:[(0,_r.jsx)("meta",{content:v&&new Date(v).toISOString(),itemProp:"datePublished"}),(0,_r.jsx)("meta",{content:"http://schema.org/Article",itemProp:"mainEntityOfPage"}),(0,_r.jsx)(gf,{bgImageSrc:w??k,lang:r,readTimeMinutes:p,title:f}),(0,_r.jsx)(uo,{isTeamsAccount:u,onPublicationClicked:g,onPublisherClicked:y,publicationTitle:l,publicationUrl:c,publisherAvatarFallbackUrl:o,publisherAvatarUrl:i,publisherDisplayName:s,publisherUrl:a,shareElement:m}),(0,_r.jsx)("div",{lang:r,children:2===n.version?(0,_r.jsx)(Co,{adElement:e,blocks:n.json.slice(1),nextElement:_}):(0,_r.jsxs)(lo,{children:[(0,_r.jsx)(ff,{content:x}),_]})}),m,b,(0,_r.jsx)(Ef,{imageRatio:0,imageSrc:h,title:l,titleLang:r,url:c})]})}var Tf={"spacing--margin-top-0":"Spacing__spacing--margin-top-0__RVqB9__0-0-3287","spacing--margin-top-1":"Spacing__spacing--margin-top-1__iM9hN__0-0-3287","spacing--margin-top-2":"Spacing__spacing--margin-top-2__YQFc-__0-0-3287","spacing--margin-top-3":"Spacing__spacing--margin-top-3__oEL3L__0-0-3287","spacing--margin-top-4":"Spacing__spacing--margin-top-4__bUhyX__0-0-3287","spacing--margin-top-5":"Spacing__spacing--margin-top-5__HRqqH__0-0-3287","spacing--margin-top-6":"Spacing__spacing--margin-top-6__Kmo0G__0-0-3287","spacing--margin-top-7":"Spacing__spacing--margin-top-7__PC14w__0-0-3287","spacing--margin-top-8":"Spacing__spacing--margin-top-8__fgNXj__0-0-3287","spacing--margin-top-9":"Spacing__spacing--margin-top-9__1paIe__0-0-3287","spacing--margin-top-10":"Spacing__spacing--margin-top-10__uY6Qs__0-0-3287","spacing--margin-top-11":"Spacing__spacing--margin-top-11__QCS2a__0-0-3287","spacing--margin-top-12":"Spacing__spacing--margin-top-12__5UGmk__0-0-3287","spacing--margin-right-0":"Spacing__spacing--margin-right-0__jkMpg__0-0-3287","spacing--margin-right-1":"Spacing__spacing--margin-right-1__3V2jr__0-0-3287","spacing--margin-right-2":"Spacing__spacing--margin-right-2__1X-zA__0-0-3287","spacing--margin-right-3":"Spacing__spacing--margin-right-3__bhFg-__0-0-3287","spacing--margin-right-4":"Spacing__spacing--margin-right-4__XdgzB__0-0-3287","spacing--margin-right-5":"Spacing__spacing--margin-right-5__D6-y2__0-0-3287","spacing--margin-right-6":"Spacing__spacing--margin-right-6__-MasA__0-0-3287","spacing--margin-right-7":"Spacing__spacing--margin-right-7__HfK5A__0-0-3287","spacing--margin-right-8":"Spacing__spacing--margin-right-8__KqjMA__0-0-3287","spacing--margin-right-9":"Spacing__spacing--margin-right-9__CDsOt__0-0-3287","spacing--margin-right-10":"Spacing__spacing--margin-right-10__d0oNC__0-0-3287","spacing--margin-right-11":"Spacing__spacing--margin-right-11__HNqJK__0-0-3287","spacing--margin-right-12":"Spacing__spacing--margin-right-12__-xGPl__0-0-3287","spacing--margin-bottom-0":"Spacing__spacing--margin-bottom-0__RfzL2__0-0-3287","spacing--margin-bottom-1":"Spacing__spacing--margin-bottom-1__iuZHe__0-0-3287","spacing--margin-bottom-2":"Spacing__spacing--margin-bottom-2__OQ-jA__0-0-3287","spacing--margin-bottom-3":"Spacing__spacing--margin-bottom-3__-Igr5__0-0-3287","spacing--margin-bottom-4":"Spacing__spacing--margin-bottom-4__8fiyX__0-0-3287","spacing--margin-bottom-5":"Spacing__spacing--margin-bottom-5__iuhnS__0-0-3287","spacing--margin-bottom-6":"Spacing__spacing--margin-bottom-6__GwRRB__0-0-3287","spacing--margin-bottom-7":"Spacing__spacing--margin-bottom-7__VMMGk__0-0-3287","spacing--margin-bottom-8":"Spacing__spacing--margin-bottom-8__mHUbV__0-0-3287","spacing--margin-bottom-9":"Spacing__spacing--margin-bottom-9__IjOJW__0-0-3287","spacing--margin-bottom-10":"Spacing__spacing--margin-bottom-10__BSwTC__0-0-3287","spacing--margin-bottom-11":"Spacing__spacing--margin-bottom-11__Dc-vD__0-0-3287","spacing--margin-bottom-12":"Spacing__spacing--margin-bottom-12__94w6b__0-0-3287","spacing--margin-left-0":"Spacing__spacing--margin-left-0__CDHNp__0-0-3287","spacing--margin-left-1":"Spacing__spacing--margin-left-1__mOOkJ__0-0-3287","spacing--margin-left-2":"Spacing__spacing--margin-left-2__6AKnO__0-0-3287","spacing--margin-left-3":"Spacing__spacing--margin-left-3__Tr2iQ__0-0-3287","spacing--margin-left-4":"Spacing__spacing--margin-left-4__khnCb__0-0-3287","spacing--margin-left-5":"Spacing__spacing--margin-left-5__Qhlce__0-0-3287","spacing--margin-left-6":"Spacing__spacing--margin-left-6__NtocC__0-0-3287","spacing--margin-left-7":"Spacing__spacing--margin-left-7__oMGfa__0-0-3287","spacing--margin-left-8":"Spacing__spacing--margin-left-8__U7ipl__0-0-3287","spacing--margin-left-9":"Spacing__spacing--margin-left-9__PHQdV__0-0-3287","spacing--margin-left-10":"Spacing__spacing--margin-left-10__A68C-__0-0-3287","spacing--margin-left-11":"Spacing__spacing--margin-left-11__hJ7do__0-0-3287","spacing--margin-left-12":"Spacing__spacing--margin-left-12__NRnSf__0-0-3287","spacing--padding-top-0":"Spacing__spacing--padding-top-0__diXK-__0-0-3287","spacing--padding-top-1":"Spacing__spacing--padding-top-1__T-4cA__0-0-3287","spacing--padding-top-2":"Spacing__spacing--padding-top-2__2hEVs__0-0-3287","spacing--padding-top-3":"Spacing__spacing--padding-top-3__tKXSA__0-0-3287","spacing--padding-top-4":"Spacing__spacing--padding-top-4__myjzI__0-0-3287","spacing--padding-top-5":"Spacing__spacing--padding-top-5__pJQhG__0-0-3287","spacing--padding-top-6":"Spacing__spacing--padding-top-6__MQJcy__0-0-3287","spacing--padding-top-7":"Spacing__spacing--padding-top-7__R35Kw__0-0-3287","spacing--padding-top-8":"Spacing__spacing--padding-top-8__sw-LG__0-0-3287","spacing--padding-top-9":"Spacing__spacing--padding-top-9__p5Atz__0-0-3287","spacing--padding-top-10":"Spacing__spacing--padding-top-10__m9hwg__0-0-3287","spacing--padding-top-11":"Spacing__spacing--padding-top-11__lpfdb__0-0-3287","spacing--padding-top-12":"Spacing__spacing--padding-top-12__5ZQrV__0-0-3287","spacing--padding-right-0":"Spacing__spacing--padding-right-0__uEKp8__0-0-3287","spacing--padding-right-1":"Spacing__spacing--padding-right-1__IAmVw__0-0-3287","spacing--padding-right-2":"Spacing__spacing--padding-right-2__QH488__0-0-3287","spacing--padding-right-3":"Spacing__spacing--padding-right-3__UoPUe__0-0-3287","spacing--padding-right-4":"Spacing__spacing--padding-right-4__aCYSe__0-0-3287","spacing--padding-right-5":"Spacing__spacing--padding-right-5__SRJoO__0-0-3287","spacing--padding-right-6":"Spacing__spacing--padding-right-6__ftegD__0-0-3287","spacing--padding-right-7":"Spacing__spacing--padding-right-7__EtpRh__0-0-3287","spacing--padding-right-8":"Spacing__spacing--padding-right-8__3wox7__0-0-3287","spacing--padding-right-9":"Spacing__spacing--padding-right-9__y-ftS__0-0-3287","spacing--padding-right-10":"Spacing__spacing--padding-right-10__6Ltwv__0-0-3287","spacing--padding-right-11":"Spacing__spacing--padding-right-11__AYVMN__0-0-3287","spacing--padding-right-12":"Spacing__spacing--padding-right-12__HcjMm__0-0-3287","spacing--padding-bottom-0":"Spacing__spacing--padding-bottom-0__3iuku__0-0-3287","spacing--padding-bottom-1":"Spacing__spacing--padding-bottom-1__JJVPB__0-0-3287","spacing--padding-bottom-2":"Spacing__spacing--padding-bottom-2__hq6mU__0-0-3287","spacing--padding-bottom-3":"Spacing__spacing--padding-bottom-3__peE0Y__0-0-3287","spacing--padding-bottom-4":"Spacing__spacing--padding-bottom-4__wrIpd__0-0-3287","spacing--padding-bottom-5":"Spacing__spacing--padding-bottom-5__ro3K-__0-0-3287","spacing--padding-bottom-6":"Spacing__spacing--padding-bottom-6__93OWD__0-0-3287","spacing--padding-bottom-7":"Spacing__spacing--padding-bottom-7__oKiWG__0-0-3287","spacing--padding-bottom-8":"Spacing__spacing--padding-bottom-8__dsigT__0-0-3287","spacing--padding-bottom-9":"Spacing__spacing--padding-bottom-9__LhkJ1__0-0-3287","spacing--padding-bottom-10":"Spacing__spacing--padding-bottom-10__umiud__0-0-3287","spacing--padding-bottom-11":"Spacing__spacing--padding-bottom-11__L6w81__0-0-3287","spacing--padding-bottom-12":"Spacing__spacing--padding-bottom-12__Je3Uk__0-0-3287","spacing--padding-left-0":"Spacing__spacing--padding-left-0__Ms4qc__0-0-3287","spacing--padding-left-1":"Spacing__spacing--padding-left-1__tb-eM__0-0-3287","spacing--padding-left-2":"Spacing__spacing--padding-left-2__ojyC7__0-0-3287","spacing--padding-left-3":"Spacing__spacing--padding-left-3__8OD-2__0-0-3287","spacing--padding-left-4":"Spacing__spacing--padding-left-4__OAEKK__0-0-3287","spacing--padding-left-5":"Spacing__spacing--padding-left-5__tZi5X__0-0-3287","spacing--padding-left-6":"Spacing__spacing--padding-left-6__9S4K8__0-0-3287","spacing--padding-left-7":"Spacing__spacing--padding-left-7__hKj2n__0-0-3287","spacing--padding-left-8":"Spacing__spacing--padding-left-8__IR-05__0-0-3287","spacing--padding-left-9":"Spacing__spacing--padding-left-9__lHYrf__0-0-3287","spacing--padding-left-10":"Spacing__spacing--padding-left-10__LRWA-__0-0-3287","spacing--padding-left-11":"Spacing__spacing--padding-left-11__gSsWL__0-0-3287","spacing--padding-left-12":"Spacing__spacing--padding-left-12__m98SS__0-0-3287"};const Af=t=>{let{children:e,top:n,bottom:r,left:o,right:i,type:s="margin"}=t;const a=jr()({[Tf[`spacing--${s}-top-${n}`]]:"number"==typeof n,[Tf[`spacing--${s}-right-${i}`]]:"number"==typeof i,[Tf[`spacing--${s}-bottom-${r}`]]:"number"==typeof r,[Tf[`spacing--${s}-left-${o}`]]:"number"==typeof o});return gr.createElement("div",{className:a},e)};var Of={icon:"Icon__icon__DqC9j__0-0-3287"};let Nf="/fe/silkscreen/0.0.3287/icons/sprites.svg",Mf="https://static.issuu.com/fe/silkscreen/0.0.3287/icons/gradient/";function Df(t){return t?function(t){if(!t)return!1;const e=new RegExp(/^(auto|fit-content(\(.+\))?|inherit|initial|max-content|min-content|revert(-layer)?|unset)$/);return"string"==typeof t&&e.test(t)}(t)?t:function(t){if(void 0===t)return"";const e=parseFloat(t.toString());if(isNaN(e))throw`Invalid Number: ${t}' is not a valid number, cannot transform to 'rem' \n`;return 0===e?"0":"number"==typeof t||"string"==typeof t&&/(px|\d)$/.test(t)?e/16+"rem":t}(t):null}function Rf(t){let{blockSize:e,className:n,color:r,inlineSize:o,name:i,size:s=24,style:a,title:c,...l}=t;const u=jr()(n,Of.icon),d=i.split("-").includes("gradient"),p=i.split("-").includes("original");return d?gr.createElement("img",{...l,alt:c??"",className:u,src:`${Mf}icon-${i}.svg`,style:{...a,"--size-block-icon":o&&!e?"auto":Df(e)||Df(s)||"auto","--size-inline-icon":e&&!o?"auto":Df(o)||Df(s)||"auto"}}):gr.createElement("svg",{...l,className:u,role:c?"img":"presentation",style:{...a,"--color-icon":r||(p?"unset":"currentColor"),"--size-block-icon":o&&!e?"auto":Df(e)||Df(s)||"auto","--size-inline-icon":e&&!o?"auto":Df(o)||Df(s)||"auto"}},c&&gr.createElement("title",null,c),gr.createElement("use",{xlinkHref:`${Nf}#icon-${i}`}))}"undefined"!=typeof process&&process.env?.STORYBOOK&&(Nf="./icons/sprites.svg",Mf="./icons/gradient/");var If={spinner:"Spinner__spinner__7h9wW__0-0-3287","spinner-animation":"Spinner__spinner-animation__8DUuF__0-0-3287"};function $f(t){let{className:e,...n}=t;return gr.createElement(Rf,{...n,name:"spinner",className:jr()(e,If.spinner)})}function jf(t){return"loading"===t||"pending"===t}function Lf(t){let{className:e,feedbackState:n,icon:r}=t;if(n)switch(n){case"loading":case"pending":r=gr.createElement($f,null);break;case"done":case"success":r=gr.createElement(Rf,{name:"check"});break;case"error":r=gr.createElement(Rf,{name:"close"});break;default:return function(){throw new Error("This should never execute")}()}return r?gr.createElement("span",{className:e},r):null}function Pf(t){const{children:e,feedbackState:n,icon:r,iconClassNames:o,textClassNames:i}=t;return gr.createElement(gr.Fragment,null,gr.createElement(Lf,{className:o,feedbackState:n,icon:r}),gr.createElement("span",{className:i},e))}function Bf(t,e){const{children:n,feedbackState:r,icon:o,iconClassNames:i,textClassNames:s,type:a="button",...c}=t;return gr.createElement("button",{...c,ref:e,type:a},gr.createElement(Pf,{children:n,feedbackState:r,icon:o,iconClassNames:i,textClassNames:s}))}const zf=gr.forwardRef(Bf);var Ff="_screen-reader-only__u-screen-reader-only__xIfkK__0-0-3287",Hf={"product-button":"ProductButton__product-button__oPHZY__0-0-3287","product-button--active":"ProductButton__product-button--active__i-Kpq__0-0-3287","product-button--ghost":"ProductButton__product-button--ghost__k-Fdm__0-0-3287","product-button--loading":"ProductButton__product-button--loading__4MQpY__0-0-3287","product-button--medium":"ProductButton__product-button--medium__FveF3__0-0-3287","product-button--large":"ProductButton__product-button--large__14bTO__0-0-3287","product-button--nano":"ProductButton__product-button--nano__pKS-N__0-0-3287","product-button--icon-alone":"ProductButton__product-button--icon-alone__k3p3C__0-0-3287","product-button--icon-alone-alternate":"ProductButton__product-button--icon-alone-alternate__T5mQy__0-0-3287","product-button--icon-left":"ProductButton__product-button--icon-left__qLB0n__0-0-3287","product-button--icon-right":"ProductButton__product-button--icon-right__AbJ7d__0-0-3287","product-button__text":"ProductButton__product-button__text__6CgRS__0-0-3287","product-button__icon":"ProductButton__product-button__icon__vl-zg__0-0-3287","product-button__icon--left":"ProductButton__product-button__icon--left__ytoMs__0-0-3287","product-button__icon--right":"ProductButton__product-button__icon--right__04iin__0-0-3287","product-button--primary":"ProductButton__product-button--primary__9T1iW__0-0-3287","product-button--secondary":"ProductButton__product-button--secondary__P606t__0-0-3287","product-button--secondary-inverse":"ProductButton__product-button--secondary-inverse__pzImA__0-0-3287","product-button--tertiary":"ProductButton__product-button--tertiary__oa1O0__0-0-3287","product-button--tertiary-inverse":"ProductButton__product-button--tertiary-inverse__EyFLL__0-0-3287","product-button--danger-solid":"ProductButton__product-button--danger-solid__Z4bB0__0-0-3287","product-button--success-solid":"ProductButton__product-button--success-solid__dsiU5__0-0-3287","product-button--full-width":"ProductButton__product-button--full-width__GyAdl__0-0-3287"};function Uf(t,e){let{active:n,children:r,className:o,feedbackState:i,fullWidth:s,icon:a,iconPlacement:c,size:l,visualSize:u,variant:d,...p}=t;const{componentClassNames:h,iconClassNames:f,textClassNames:m}=function(t){let{active:e,baseClassName:n,className:r,feedbackState:o,fullWidth:i=!1,icon:s,iconPlacement:a="left",size:c,styles:l,visualSize:u,variant:d}=t;const p=u||c||"small";return{componentClassNames:jr()(r,l[n],l[`${n}--${d}`],l[`${n}--${p}`],{[l[`${n}--loading`]]:jf(o),[l[`${n}--icon-${a}`]]:!!s||!!o,[l[`${n}--full-width`]]:i,[l[`${n}--active`]]:!!e}),iconClassNames:jr()(l[`${n}__icon`],l[`${n}__icon--${a}`]),textClassNames:jr()(l[`${n}__text`],{[Ff]:"alone"===a||"alone-alternate"===a})}}({active:n,baseClassName:"product-button",className:o,feedbackState:i,fullWidth:s,icon:a,iconPlacement:c,size:l,styles:Hf,visualSize:u,variant:d});return gr.createElement(zf,{...p,className:h,feedbackState:i,icon:a,iconClassNames:f,textClassNames:m,ref:e},r)}const qf=gr.forwardRef(Uf);var Vf={"article-card":"ArticleCard__article-card__OeCBK__0-0-3287","article-card--sm":"ArticleCard__article-card--sm__C-kT9__0-0-3287","article-card--md":"ArticleCard__article-card--md__7LmH1__0-0-3287","article-card--flex":"ArticleCard__article-card--flex__Ag-3Z__0-0-3287","article-card__article-link":"ArticleCard__article-card__article-link__lIdH4__0-0-3287","article-card__cover-img":"ArticleCard__article-card__cover-img__qnYLg__0-0-3287","article-card__cover-frame":"ArticleCard__article-card__cover-frame__4Aa0H__0-0-3287","article-card__meta":"ArticleCard__article-card__meta__tBusj__0-0-3287","article-card__title":"ArticleCard__article-card__title__B-lAz__0-0-3287","article-card__read-details":"ArticleCard__article-card__read-details__BtsRR__0-0-3287","article-card__article-pages":"ArticleCard__article-card__article-pages__9evHp__0-0-3287"};const Wf="article-card",Jf=(t,e)=>{let{pageNumbers:n,coverImageAlt:r="",coverImageUrl:o,title:i,titleLang:s,minutesToRead:a,articleUrl:c,className:l,onClick:u,size:d="flex"}=t;const p=jr()(l,Vf[Wf],{[Vf[`${Wf}--${d}`]]:!0});return gr.createElement("div",{"data-testid":"article-card",className:p,ref:e},gr.createElement("a",{href:c,className:Vf[`${Wf}__article-link`],onClick:u},gr.createElement("div",{className:Vf[`${Wf}__cover-frame`]},gr.createElement("img",{className:Vf[`${Wf}__cover-img`],alt:r,src:o})),gr.createElement("div",{className:Vf[`${Wf}__meta`]},gr.createElement("h3",{className:Vf[`${Wf}__title`],"data-testid":"article-card-title",lang:s},i),(a||n)&&gr.createElement("div",{className:Vf[`${Wf}__read-details`]},void 0!==a&&(t=>t>=60?`${Math.floor(t/60)}hr`:`${t||1}min`)(a),n&&gr.createElement("div",{className:Vf[`${Wf}__article-pages`]},(t=>{const e=t.length<=1?"page":"pages",n=t.sort(((t,e)=>t-e));let r="";return`${e} ${n.reduce(((t,e,n,o)=>{if(e-o[n-1]==1)return r=`-${e}`,n===o.length-1?`${t}${r}`:t;{const n=`${t}${r}${t?", ":""}${e}`;return r="",n}}),"")}`})(n))))))};var Kf=gr.forwardRef(Jf);const Gf=(0,gr.memo)((function(t){let{...e}=t;const n=function(t){const e=(0,gr.useRef)(null),n=(0,gr.useRef)(!1);return(0,gr.useEffect)((()=>{const r=window.IntersectionObserver,o=e.current;if(r&&o&&!n.current&&t){const e=new r((r=>{r.forEach((r=>{r.isIntersecting&&!n.current&&(n.current=!0,e.unobserve(o),t())}))}),undefined);return e.observe(o),()=>{n.current||e.unobserve(o)}}}),[t]),e}((0,gr.useCallback)((()=>{e.trackStoryImpression(e.id)}),[]));return(0,_r.jsx)(Kf,{...e,ref:n})}));function Yf(t){let{moreStories:e,trackStoryImpression:n,getMore:r,nextCursor:o}=t;const[i,s]=(0,gr.useState)(!1),[a,c]=(0,gr.useState)(e),[l,u]=(0,gr.useState)(o),d=(0,gr.useRef)(!1),p=(0,gr.useCallback)((()=>{l&&!d.current&&(s(!0),d.current=!0,r(l).then((t=>{c((e=>[...e,...t.articles])),u(t.nextCursor)})).catch((()=>{})).finally((()=>{d.current=!1,s(!1)})))}),[l,r]),h=10===a.length&&l?a.slice(0,9):a;return(0,_r.jsx)("section",{className:"more-stories",children:(0,_r.jsxs)("div",{className:"more-stories__wrapper",children:[(0,_r.jsx)(Af,{bottom:3,children:(0,_r.jsx)(mo,{level:2,visualSize:"xs",children:"More articles from this publication:"})}),(0,_r.jsx)("ul",{className:"more-stories__list",children:h.map((t=>(0,_r.jsx)("li",{children:(0,_r.jsx)(Gf,{articleUrl:t.articleLinks.path,coverImageUrl:t.coverImageUrl,id:t.id,minutesToRead:Math.ceil(t.readTime/60),pageNumbers:t.pages,title:t.title,titleLang:t.detectedLanguage,trackStoryImpression:n})},t.id)))}),l&&(0,_r.jsxs)("div",{className:"more-stories__loader",children:[i?(0,_r.jsx)($f,{size:32}):(0,_r.jsx)(qf,{onClick:p,variant:"tertiary",visualSize:"small",children:"Show more articles"}),(0,_r.jsx)("span",{"aria-live":"polite",role:"status",style:{position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:0},children:i?"Loading more articles":""})]})]})})}const Xf=t=>{let{story:e,trackStoryImpression:n}=t;return(0,_r.jsx)("aside",{"aria-labelledby":"next-article-heading",className:"NextStory",children:(0,_r.jsx)("div",{className:"NextStory__relative-container",children:(0,_r.jsxs)("div",{className:"NextStory__absolute-container",children:[(0,_r.jsx)(mo,{id:"next-article-heading",level:2,visualSize:"xs",children:"Next Article"}),(0,_r.jsx)(Gf,{articleUrl:e.articleLinks.path,coverImageUrl:e.coverImageUrl,id:e.id,title:e.title,titleLang:e.detectedLanguage,trackStoryImpression:n})]})})})},Qf=t=>Object.entries(t).reduce(((t,e)=>{let[n,r]=e;return"string"==typeof r&&t.push(`${n}=${encodeURIComponent(r)}`),t}),[]).join("&"),Zf=t=>{let{url:e,params:n}=t;const r=window.screen.width,o=window.screen.height,i=Math.round(r/2-275),s=o>420?Math.round(o/2-210):0;window.open(`${e}?${Qf(n)}`,"",`scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left=${i},top=${s}`)};var tm=n(329),em=n.n(tm);class nm extends gr.Component{constructor(t){super(t),this.state={copied:!1}}onSuccess=()=>{this.setState({copied:!0}),this.props.onSuccess&&this.props.onSuccess(),setTimeout((()=>{this.setState({copied:!1})}),2e3)};onError=()=>{const t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";window.prompt(`Press ${t} to copy`,this.props.copyText)};render(){const t=this.props["aria-label"]?{"button-aria-label":this.props["aria-label"]}:{};return(0,_r.jsx)(em(),{className:this.props.className,"data-clipboard-text":this.props.copyText,onError:this.onError,onSuccess:this.onSuccess,title:this.props.title,...t,children:(0,_r.jsxs)(gr.Fragment,{children:[this.props.children,(0,_r.jsx)("span",{"aria-live":"assertive",role:"status",children:this.state.copied?this.props.successText:""})]})})}}class rm extends gr.PureComponent{shareOnFacebook=()=>{const{url:t,title:e,imageUrl:n}=this.props;Zf({url:"https://www.facebook.com/sharer.php",params:{u:{url:t,title:e,imageUrl:n}.url}}),this.props.onShare("facebook")};shareOnTwitter=()=>{const{url:t,hosts:e,title:n,imageUrl:r}=this.props;var o,i;o={hosts:e},Zf({url:"https://twitter.com/intent/tweet",params:{text:(i={url:t,title:n,imageUrl:r}).title,url:i.url,via:"issuu",related:"issuu",original_referer:`https://${o.hosts.main}`}}),this.props.onShare("twitter")};shareOnLinkedin=()=>{const{url:t,title:e,imageUrl:n}=this.props;Zf({url:"https://www.linkedin.com/sharing/share-offsite",params:{url:{url:t,title:e,imageUrl:n}.url}}),this.props.onShare("linkedin")};shareLink=()=>{this.props.onShare("link")};shareOnPinterest=()=>{const{url:t,title:e,imageUrl:n}=this.props;(function(t){const e={description:t.title&&t.description&&t.title!==t.description?`${t.title}\n\n${t.description}`:t.title,url:t.url,media:t.imageUrl};Zf({url:"https://www.pinterest.com/pin/create/button",params:e})})({url:t,title:e,imageUrl:n}),this.props.onShare("pinterest")};shareOnEmail=()=>{const{url:t,title:e,imageUrl:n}=this.props;(function(t){const e=`Check this out:\n\n${t.url}\n`,n={subject:t.title,body:e};window.location.assign(`mailto:?${Qf(n)}`)})({url:t,title:e,imageUrl:n}),this.props.onShare("email")};render(){const{url:t}=this.props;return(0,_r.jsxs)("div",{"aria-label":"Share this article",className:"share",role:"group",children:[(0,_r.jsx)("button",{"aria-label":"Share on Facebook",className:"share__social-button",onClick:this.shareOnFacebook,title:"Share on Facebook",children:(0,_r.jsx)(Rf,{name:"facebook-round-original",size:40})}),(0,_r.jsx)("button",{"aria-label":"Share on Linkedin",className:"share__social-button",onClick:this.shareOnLinkedin,title:"Share on Linkedin",children:(0,_r.jsx)(Rf,{name:"linkedin-original",size:40})}),(0,_r.jsx)("button",{"aria-label":"Share on Pinterest",className:"share__social-button",onClick:this.shareOnPinterest,title:"Share on Pinterest",children:(0,_r.jsx)(Rf,{name:"pinterest-original",size:40})}),(0,_r.jsx)("button",{"aria-label":"Share on Twitter",className:"share__social-button",onClick:this.shareOnTwitter,title:"Share on Twitter",children:(0,_r.jsx)(Rf,{name:"x-original",size:40})}),(0,_r.jsx)("button",{"aria-label":"Share via email",className:"share__social-button",onClick:this.shareOnEmail,title:"Share via email",children:(0,_r.jsx)(Rf,{name:"mail",size:40})}),(0,_r.jsx)(nm,{"aria-label":"Copy link",className:"share__social-button",copyText:t,onSuccess:this.shareLink,successText:"Copied!",title:"Copy link",children:(0,_r.jsx)(Rf,{name:"link",size:40})})]})}}const om=["mousemove","scroll","keydown","resize","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"];class im extends gr.Component{userActivityThrottlerTimeout=null;shouldComponentUpdate(){return!1}componentDidMount(){om.forEach((t=>{window.addEventListener(t,this.userActivityThrottler)})),window.addEventListener("beforeunload",this.destroyEvents),document.addEventListener("visibilitychange",(()=>{document.hidden||this.userActivityThrottler()})),this.resetUserActivityTimeout()}componentWillUnmount(){this.destroyEvents()}destroyEvents=()=>{om.forEach((t=>{window.removeEventListener(t,this.userActivityThrottler)})),window.removeEventListener("beforeunload",this.destroyEvents)};resetUserActivityTimeout=()=>{clearTimeout(this.userActivityTimeout),this.userActivityTimeout=setTimeout((()=>{this.props.onUserInactivation(),this.userState="inactive"}),this.props.timeout)};userActivityThrottler=()=>{"inactive"===this.userState&&(this.userState="active",this.props.onUserReactivation()),this.userActivityThrottlerTimeout||(this.userActivityThrottlerTimeout=setTimeout((()=>{this.resetUserActivityTimeout(),this.userActivityThrottlerTimeout=null}),1e3))};render(){return null}}function sm(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=[];return o=>{Array.isArray(o)?r=r.concat(o):r.push(o),!e&&r.length&&(e=setTimeout((()=>{t(r),r=[],e=void 0}),n))}}function am(t,e){let{storyTracker:n}=t;n(e,{type:"story_impression"})}function cm(t,e,n){let{storyTracker:r}=t;return r(e,{type:"story_read_time",time_increment:n})}const lm=(t,e,n)=>`https://${t}/${e}/jpg/page_1_thumb_${n}.jpg`;class um extends gr.PureComponent{isReading=!1;oneTimeEventsSent={impression:!1,read:!1};timeouts={storyReadTime:void 0,storyRead:void 0};constructor(t){super(t),this.storyRootRef=(0,gr.createRef)()}sendOneTimeEvents=()=>{const{story:t,trackers:e}=this.props;this.oneTimeEventsSent.impression||(am(e,t.id),this.oneTimeEventsSent.impression=!0),this.oneTimeEventsSent.read||(this.timeouts.storyRead=function(t,e){let{storyTracker:n}=t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;return setTimeout((()=>{r()&&n(e,{type:"story_read"})}),2e3)}(e,t.id,(()=>{const t=this.isReading;return t&&(this.oneTimeEventsSent.read=!0),t})))};componentDidMount=()=>{const{story:t}=this.props;document.hidden||(this.sendOneTimeEvents(),this.startStoryReadTimeTimer(t.id)),void 0!==typeof window&&void 0!==typeof window.addEventListener&&window.addEventListener("beforeunload",(()=>{this.stopTracking()})),document.addEventListener("visibilitychange",(()=>{document.hidden?this.stopTracking():this.startTracking()}))};startTracking=()=>{const{story:t}=this.props;this.isReading||(this.sendOneTimeEvents(),this.startStoryReadTimeTimer(t.id))};stopTracking=()=>{const{story:t}=this.props;this.trackEndStoryReadTime(t.id),this.timeouts.storyRead&&clearTimeout(this.timeouts.storyRead),this.timeouts.storyReadTime&&clearTimeout(this.timeouts.storyReadTime)};trackStoryReadTime=t=>{const e=(new Date).getTime();cm(this.props.trackers,t,e-this.storyReadLatestTime),this.storyReadLatestTime=e;const n=Math.min(e-this.storyReadStartTime,6e4);this.timeouts.storyReadTime=setTimeout((()=>this.trackStoryReadTime(t)),n)};trackEndStoryReadTime=t=>{if(!this.isReading)return 0;this.isReading=!1;const e=(new Date).getTime();e-this.storyReadStartTime>2e3&&cm(this.props.trackers,t,e-this.storyReadLatestTime)};startStoryReadTimeTimer=t=>{this.isReading=!0,this.storyReadStartTime=(new Date).getTime(),this.storyReadLatestTime=this.storyReadStartTime,this.timeouts.storyReadTime=setTimeout((()=>this.trackStoryReadTime(t)),2e3)};getMore=t=>{const{story:e}=this.props;return Rr(e.documentSlotId,t)};render(){const{vendorKeys:t,hosts:e,story:n,moreStories:r,isCrawler:o,isDesktop:i,isProd:s,shouldShowAds:a,trackers:c}=this.props,l=`${n.documentId}`,u=Math.max(Math.floor(n.readTime/60),1);return(0,_r.jsxs)("main",{className:"Story__root",ref:this.storyRootRef,children:[(0,_r.jsx)(im,{onUserInactivation:this.stopTracking,onUserReactivation:this.startTracking,timeout:6e5}),(0,_r.jsx)(Cf,{adElement:a&&(0,_r.jsx)("div",{className:"story__ad-container",children:(0,_r.jsx)(co,{adType:oo,page:"story"})}),content:n.content,coverImageUrl:n.coverImageUrl,createdAt:n.createdAt,detectedLanguage:n.detectedLanguage,isDesktop:i,isProd:s,isTeamsAccount:n.isTeamsOwned,moreStories:r.articles.length>0&&!o&&(0,_r.jsx)(Yf,{getMore:this.getMore,moreStories:r.articles,nextCursor:r.nextCursor,trackStoryImpression:t=>am(c,t)}),nextElement:r.articles.length>0&&(0,_r.jsx)(Xf,{story:r.articles[0],trackStoryImpression:t=>am(c,t)}),onPublicationClicked:()=>{c.monitorTracker({type:"stories-page.story.publication.click"})},onPublisherClicked:()=>{c.monitorTracker({type:"stories-page.story.publisher.click"})},publicationCoverUrl:lm(e.image,l,"large"),publicationCoverUrlLowRes:lm(e.image,l,"small"),publicationId:l,publicationPublishDate:n.documentPublishDate,publicationTitle:n.documentTitle,publicationUrl:n.documentLinks.path,publisherAvatarFallbackUrl:n.avatarFallbackUrl,publisherAvatarUrl:n.avatarUrl,publisherDisplayName:n.displayName,publisherUrl:n.profileUrl,readTimeMinutes:u,shareElement:(0,_r.jsx)(rm,{hosts:e,imageUrl:n.coverImageUrl,onShare:t=>c.storyTracker(n.id,{type:"story_share",service:t}),title:n.title,url:n.articleLinks.url,vendorKeys:t}),title:n.title})]})}}function dm(t){return"resource"===t.entryType}function pm(t){return"responseEnd"===t||"domContentLoadedEventEnd"===t||"domInteractive"===t||"domComplete"===t||"serverTime"===t||"firstContentfulPaint"===t||"firstPaint"===t||"blockingTime"===t}function hm(t){return t/1024/1024}function fm(t){const e=function(){const t=window.performance;if(!t||!t.getEntries)return;const e=t.getEntries(),n={};let r=!1,o=!1,i=0,s=0,a=0,c=0,l=0,u=0,d=0,p=0;for(const t of e){if("navigation"===t.entryType){const e=t;n.responseEnd=e.responseEnd,n.domContentLoadedEventEnd=e.domContentLoadedEventEnd,n.domInteractive=e.domInteractive,n.domComplete=e.domComplete,n.serverTime=Math.max(0,e.responseStart-e.requestStart)}if("first-paint"===t.name&&(n.firstPaint=t.startTime),"first-contentful-paint"===t.name&&(n.firstContentfulPaint=t.startTime),dm(t)){const e=t.initiatorType;"blocking"===t.renderBlockingStatus&&(o=!0,i+=Math.max(0,t.responseEnd-t.requestStart)),"script"===e&&(l++,u+=hm(t.encodedBodySize),d+=hm(t.decodedBodySize),p+=hm(t.transferSize)),"link"===e&&s++,"img"===e&&c++,"css"!==e&&"other"!==e||(/fonts\.googleapis\.com\/css/.test(t.name)?s++:/woff2$/.test(t.name)&&a++),r=!0}}r&&(o&&(n.blockingTime=i),n.cssCount=s,n.fontsCount=a,n.imgCount=c,n.jsCount=l,n.jsEncodedSize=u,n.jsDecodedSize=d,n.jsTransferSize=p);const h={};for(const t in n){const e=n[t];void 0===e||isNaN(e)||e===1/0||e===-1/0||(h[t]=pm(t)?Math.round(e)/1e3:e)}return h}();e&&t.monitorTracker({type:`rum-${t.project}`,...e,attributes:t.attributes})}const mm="story",gm=document.getElementById("initial-data"),ym=JSON.parse(gm&&gm.getAttribute("data-json")||"");ym.config&&(At().setTag("workspace","frontend"),function(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=[...hr]),void 0===t.release&&("string"==typeof __SENTRY_RELEASE__&&(t.release=__SENTRY_RELEASE__),Xe.SENTRY_RELEASE&&Xe.SENTRY_RELEASE.id&&(t.release=Xe.SENTRY_RELEASE.id)),void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);const e={...t,stackParser:(n=t.stackParser||or,Array.isArray(n)?It(...n):n),integrations:Xt(t),transport:t.transport||(de()?dr:pr)};var n;(function(t,e){!0===e.debug&&(Z?O.enable():A((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),Vt().update(e.initialScope);const n=new t(e);!function(t){const e=At().getStackTop();e.client=t,e.scope.setClient(t)}(n),function(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}(n)})(en,e),t.autoSessionTracking&&(void 0!==Xe.document?(Wt({ignoreDuration:!0}),Gt(),we((({from:t,to:e})=>{void 0!==t&&t!==e&&(Wt({ignoreDuration:!0}),Gt())}))):He&&O.warn("Session tracking in non-browser environment with @sentry/browser is not supported."))}((n=>{let{ignoreErrors:r=[],allowUrls:o=[],...i}=n;return{...t(i),ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications.",...r],allowUrls:[...o,"www.googletagmanager.com","consent.cookiebot.com","cdnjs.cloudflare.com",/^webpack-internal:/],beforeSend(t,n){if(i.isDeployed){const r=(t.exception?.values||[])[0]?.stacktrace?.frames||[],o=r[0]?.filename;if("<anonymous>"===o)return null;const i=n?.originalException,s="string"==typeof i?i:i instanceof Error?i.message:"unknown error",a=r[r.length-1]?.filename;return a?.startsWith("https://consent.cookiebot.com/")&&(s.includes("postMessage")||s.includes("windows.CookieConsent")||s.includes("window.__tcfapi")||s.includes("null is not an object")||s.includes("Cannot read properties of null"))?null:s in e?(console.error("[Sentry] Rate limiting activated for",s),null):(e[s]=!0,setTimeout((()=>{delete e[s]}),6e4),t)}return null}}})({...ym.config.sentry,allowUrls:[ym.config.hosts.main,ym.config.hosts.static]}))),function(){const t=function(t){const e=(o={pingbackHost:t},function(t,e){if(!t||Array.isArray(t)&&0===t.length)return!1;const n=(Array.isArray(t)?t:[t]).map((t=>"webpage_load"===t.type?{...t,type:"webpage_load_v2",cookie_consent:Zr()}:t)),r={browser_size:`${window.innerWidth}x${window.innerHeight}`,events:n},i={type:"website",version:"2.2.0",origin:Gr,data:{username:document.cookie.replace(/(?:(?:^|.*;\s*)site.model.username\s*=\s*([^;]*).*$)|^.*$/,"$1")||null,ui_language:document.documentElement&&document.documentElement.lang||null,location:window.location.href.toString(),referrer:e||document.referrer||null,version:"2.2.2",contexts:[r]}};return Xr(i,o)}),n=Qr({pingbackHost:t}),r=function(t){return function(e,n,r,o){if(!n||Array.isArray(n)&&0===n.length)return!1;const i={story_id:e,source:o||"web",events:Array.isArray(n)?n:[n]},s={type:"story",version:"2.2.0",origin:Gr,data:{username:document.cookie.replace(/(?:(?:^|.*;\s*)site.model.username\s*=\s*([^;]*).*$)|^.*$/,"$1")||null,ui_language:document.documentElement&&document.documentElement.lang||null,location:window.location.href.toString(),referrer:r||document.referrer||null,version:"1.0.0",contexts:[i]}};return Xr(s,t)}}({pingbackHost:t});var o;return{monitorTracker:n,websiteTracker:e,storyTracker:r,debouncedWebsiteTracker:sm(e)}}(ym.config.hosts.pingback),e=((t,e,n)=>{const r=to();if(r("set","dimension7",""+((()=>{if("undefined"!=typeof document){const t=new RegExp("(?:(?:^|.*;\\s*)site.model.username\\s*\\=\\s*([^;]*).*$)|^.*$");return document.cookie.replace(t,"$1")}return""})()?"true":"false")),r("set","dimension8",`${t}`),t===mm&&"story"in e){const t=e.iabCategories?`${e.iabCategories.join()},`:"",n=e.story.userPlan?e.story.userPlan.toLowerCase():"",o=e.story.username?e.story.username.toLowerCase():"";r("set","dimension9",`${t}`),r("set","dimension10",`${n}`),r("set","dimension11",`${o}`)}return{trackPageView:()=>{to()("send",{hitType:"pageview"});const r=yr(e);var o,i;i={monitorTracker:n.monitorTracker,project:"product-article-stories",attributes:{hasAds:r?"yes":"no",layout:(o=window.innerWidth,o<=bo.mobileMax?"mobile":o<=bo.tabletMax?"tablet":o<=bo.desktopSmallMax?"desktopSmall":o<=bo.desktopMediumMax?"desktopMedium":"desktopLarge"),page_type:t}},"complete"===document.readyState?fm(i):document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&fm(i)}))},trackStoryClickEvent:()=>{to()("send",{hitType:"event",eventCategory:"story",eventAction:"click"})}}})(mm,ym,t),n=document.getElementById("app");n&&mr().hydrate(function(t,e){return(0,_r.jsx)(wr,{initialState:t,children:(0,_r.jsx)(um,{hosts:t.config.hosts,isCrawler:t.isCrawler,isDesktop:t.isDesktop,isProd:"prod"===t.config.environment,moreStories:t.moreStories,shouldShowAds:yr(t),story:t.story,trackers:e,vendorKeys:t.config.vendorKeys})})}(ym,t),n),e.trackPageView()}()})()})();
//# sourceMappingURL=article.js.map
//# debugId=527c7b33-5bbb-5102-b324-5a4f9d1aad64

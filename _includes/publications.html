<div class="publications">

{% assign doi_url = publication.doi | default: "" %}
{% if doi_url != "" %}
  {% unless doi_url contains "doi.org" %}
    {% assign doi_url = "https://doi.org/" | append: doi_url %}
  {% endunless %}
{% endif %}

{% assign pdf_url = publication.link1.url | default: "" %}
{% unless pdf_url contains "://" %}
  {% assign pdf_url = site.url | append: site.baseurl | append: "/docs/publications/" | append: pdf_url %}
{% endunless %}

{% assign primary_url = doi_url %}
{% if primary_url == "" %}{% assign primary_url = pdf_url %}{% endif %}

<!-- Title -->
<a href="{{ primary_url }}" target="_blank" rel="noopener">
  <div class="publication-title">{{ publication.title }}</div>
</a>

<!-- Thumbnail -->
<a href="{{ primary_url }}" target="_blank" rel="noopener">
  <img class="publication-picture"
       src="{{site.url}}{{site.baseurl}}/images/publications/{{ publication.image }}"
       alt="{{ publication.title }}" />
</a>

<!-- Description, authors, venue -->
<div class="publication-text">
  {% if publication.description %}<p>{{ publication.description }}</p>{% endif %}
  {% if publication.authors %}<p><em>{{ publication.authors }}</em></p>{% endif %}
  {% if publication.venue %}<p>{{ publication.venue }}</p>{% endif %}

  <!-- Links (1â€“6, generated by loop) -->
  {% assign max_links = publication.number_link | default: 0 %}
  {% if max_links > 0 %}
  <p>
    {% for i in (1..max_links) %}
      {% assign key = "link" | append: i %}
      {% assign link = publication[key] %}
      {% if link %}
        {% if forloop.first == false %} | {% endif %}
        {% if link.url contains "://" %}
          <a href="{{ link.url }}" target="_blank">{{ link.display }}</a>
        {% else %}
          <a href="{{site.url}}{{site.baseurl}}/docs/publications/{{ link.url }}" target="_blank">{{ link.display }}</a>
        {% endif %}
      {% endif %}
    {% endfor %}
  </p>
  {% endif %}
</div>

</div>
